📄 I. 開発指示書: eBay専用ダッシュボード (Ebay Dashboard V1.0)
1. 目的
提供されたeBay Seller Hub風のUIを基盤とし、eBay APIと連携することで、出品、注文、パフォーマンスに関するリアルタイムデータを取得・表示するシングルファイルダッシュボードを構築する。

2. 技術スタックと環境
ファイル名: EbayDashboard.jsx (シングルファイル構造を維持)

技術: React (Hooks), Tailwind CSS (インライン), Firebase (Auth/設定値管理), Google Gemini API (AI分析)

API連携: eBay RESTful API（Sales/Fulfillment/Listing/Analyticsサービスを想定）

3. 開発タスク詳細
タスク A: UIのReact化とeBay API連携 (最優先)
UIコンポーネント変換:

提供されたHTML/CSSを、ReactコンポーネントとTailwind CSSクラスに完全に変換する。eBayのテーマカラー (--ebay-blue, --ebay-redなど) をTailwindクラスで再現する。

API連携の基盤確立:

ダッシュボードの各統計カード（stat-card）の数値（$9,500、54 itemsなど）が、eBay APIから取得したデータによって動的に更新されるロジック（モック）を実装する。

認証トークン管理のプレースホルダーを設置する。

ダイレクトリンクの実装:

UI内の全てのショートカットリンク（例: 出品管理, 注文, パフォーマンスなど）は、window.open()を使用して、eBay Seller Hubの対応するページへ直接遷移させる機能を実装する。

タスク B: AI連携によるパフォーマンス分析の強化
AI分析セクションの実装:

HTMLの「AI-driven Performance Analysis」セクションを動的にする。

現在のパフォーマンスデータ（例: 落札率の低下、購入者からの問い合わせ増加など）をLLM（Gemini）に入力し、「問題点の特定と具体的な改善提案」 を出力させる機能を実装する。

プロンプト構成:

プロンプトには、販売額, 落札率, セラーレーティングなどの数値を盛り込み、「これらのデータに基づき、次の1週間で集中すべき具体的な対策を3つ提案してください」と指示する。

タスク C: タスクリストとアラート機能の動的化
タスクリスト (task-list) の動的生成:

Firestore（またはローカルState）からタスクデータを取得し、タスクリストを生成する。

タスクの完了（クリック）時にリストから削除される機能（State更新）を実装する。

緊急アラート (urgent-task) の強調:

「緊急対応 (Urgent)」とマークされたタスク（例: 未発送の注文）は、HTMLに倣って赤色で強調表示し、絶対数が減らない限り統計数値の更新対象から除外するロジック（タスク B-2のHTML仕様を参照）を維持する。

4. 厳守すべき技術的制約
シングルファイル構造: 全てのコードは、EbayDashboard.jsxの単一ファイル内に収めること。

Tailwind CSSの使用: スタイリングは全てインラインのTailwindクラスで行い、提供されたHTMLの視覚的整合性を保つこと。

禁止事項: alert(), confirm(), 外部ファイルへの分割は使用禁止。

👨‍💻 II. 開発実装: EbayDashboard.jsx (叩き台)
上記の指示書に基づき、React/Tailwind CSSでコードを実装します。

JavaScript

import React, { useState, useEffect, useMemo, useCallback } from 'react';
import { initializeApp } from 'firebase/app';
import { getFirestore, collection, doc, onSnapshot, setDoc, serverTimestamp, query } from 'firebase/firestore';
import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from 'firebase/auth';

// ⚠️ 【重要】以下の定数を実際の認証情報に置き換えてください。
const API_KEY = ""; // Google Gemini API Key
const EBAY_APP_ID = ""; // eBay API Application ID (プレースホルダー)
const __app_id = "ebay_dashboard_v1";
const __firebase_config = {
    apiKey: "",
    authDomain: "",
    projectId: "demo-ebay-dashboard",
    // ...
};
const __initial_auth_token = "demo_token_ebay";

// Firebase App Initialization
const app = initializeApp(__firebase_config);
const db = getFirestore(app);
const auth = getAuth(app);

// ユーティリティ関数
const getPrivateCollectionRef = (userId, collectionName) => {
    return collection(db, `artifacts/${__app_id}/users/${userId}/${collectionName}`);
};

// ------------------------------------
// モックデータ (API/Firestoreから取得される想定)
// ------------------------------------
const initialStats = {
    sales: 9500,
    orders: 54,
    itemsSold: 120,
    activeListings: 850,
    traffic: 12500,
    conversionRate: 8.5,
    sellerRating: 4.85,
    returns: 2,
};

const initialTasks = [
    { id: 1, title: '本日発送期限の注文を処理', value: 3, isUrgent: true, type: 'shipping' },
    { id: 2, title: '未回答の顧客メッセージ', value: 5, isUrgent: true, type: 'message' },
    { id: 3, title: '在庫切れ商品の出品を終了', value: 12, isUrgent: false, type: 'listing' },
    { id: 4, title: '低パフォーマンス商品の価格改定', value: 25, isUrgent: false, type: 'price' },
];

// ------------------------------------
// メインアプリケーションコンポーネント
// ------------------------------------
const EbayDashboard = () => {
    const [user, setUser] = useState(null);
    const [stats, setStats] = useState(initialStats);
    const [tasks, setTasks] = useState(initialTasks);
    const [loading, setLoading] = useState(false);
    const [message, setMessage] = useState('');
    const [aiAnalysis, setAiAnalysis] = useState('AI分析を実行してください...');
    const [isModalOpen, setIsModalOpen] = useState(false);
    
    const isAuthenticated = !!user;

    // ------------------------------------
    // 認証とデータ購読 (モック)
    // ------------------------------------
    useEffect(() => {
        const unsubscribeAuth = onAuthStateChanged(auth, (currentUser) => {
            if (currentUser) {
                setUser(currentUser);
                // 📝 実際にはここでeBay APIトークンを取得・検証する
                // 📝 Firestoreからカスタム設定やタスクリストを購読する
            } else {
                signInWithCustomToken(auth, __initial_auth_token)
                    .catch(() => signInAnonymously(auth));
            }
        });
        return () => unsubscribeAuth();
    }, []);

    // ------------------------------------
    // タスク C: タスク完了機能
    // ------------------------------------
    const completeTask = useCallback((taskId) => {
        setTasks(prev => prev.filter(task => task.id !== taskId));
        setMessage(`タスクID ${taskId} を完了しました。`);
    }, []);

    // ------------------------------------
    // タスク B: AI連携によるパフォーマンス分析
    // ------------------------------------
    const runAiAnalysis = async () => {
        if (!API_KEY) {
            setAiAnalysis('Gemini API Keyが設定されていません。分析を実行できません。');
            return;
        }

        setLoading(true);
        setAiAnalysis('AIがパフォーマンスデータを分析中...');

        // 📝 実際にはここでGemini APIを呼び出す
        // プロンプト構成: タスク B-2を反映
        const prompt = `
            現在のeBayのパフォーマンスデータは以下の通りです。
            - 過去30日の売上: $${stats.sales.toLocaleString()}
            - 落札率: ${stats.conversionRate}%
            - アクティブな出品数: ${stats.activeListings}
            - 顧客からの返品数: ${stats.returns}
            
            これらのデータに基づき、次の1週間で集中すべき具体的な対策を3つ提案してください。出力は箇条書きでお願いします。
        `;

        try {
            // モック応答
            await new Promise(resolve => setTimeout(resolve, 2000)); 
            const mockAnalysis = `
                <h4 class="font-bold text-base text-ebay-blue-dark mb-2">💡 AIによる改善提案</h4>
                <ol class="list-decimal list-inside space-y-2 text-sm text-ebay-text">
                    <li>**【在庫最適化】** アクティブな出品数が多い割に売上が伸びていません。過去3ヶ月売れていない出品を洗い出し、価格改定または再出品（手数料節約のため）を検討してください。</li>
                    <li>**【返品率改善】** 返品数 (${stats.returns}件) は低水準ですが、高額商品の場合は要注意です。商品画像と説明文を見直し、特に返品理由として多い点（サイズ、状態）を明確に記載してください。</li>
                    <li>**【トラフィック対策】** 落札率 ${stats.conversionRate}% は健全ですが、売上増加のためにはトラフィックが必要です。最低5つの売れ筋商品に対し、プロモーテッドリスティングの予算を20%増額してください。</li>
                </ol>
            `;
            setAiAnalysis(mockAnalysis);

        } catch (error) {
            setAiAnalysis('AI分析中にエラーが発生しました。APIキーまたは接続を確認してください。');
        } finally {
            setLoading(false);
        }
    };
    
    // ------------------------------------
    // UIコンポーネント
    // ------------------------------------
    
    const StatCard = ({ title, value, iconClass, colorClass, link }) => (
        <a href={link} target="_blank" rel="noopener noreferrer" className={`stat-card p-4 rounded-lg shadow-md transition hover:shadow-lg ${colorClass} flex items-center justify-between cursor-pointer`}>
            <div>
                <div className="text-xl font-extrabold stat-value text-ebay-white">{value}</div>
                <div className="text-xs font-medium text-ebay-white/90 mt-1">{title}</div>
            </div>
            <i className={`${iconClass} text-3xl opacity-75 text-ebay-white`}></i>
        </a>
    );

    const TaskItem = ({ task, onComplete }) => {
        const valueClass = task.isUrgent ? 'text-ebay-red' : 'text-ebay-blue-dark';
        const itemClass = task.isUrgent ? 'bg-red-50 hover:bg-red-100 border-l-4 border-ebay-red' : 'bg-gray-50 hover:bg-gray-100 border-l-4 border-ebay-blue';

        return (
            <div className={`task-item flex justify-between items-center p-3 rounded transition ${itemClass}`}>
                <div className="flex items-center space-x-3">
                    <button onClick={() => onComplete(task.id)} className="text-gray-400 hover:text-ebay-green">
                        <i className="far fa-circle hover:far fa-check-circle"></i>
                    </button>
                    <span className="text-sm text-ebay-text">{task.title}</span>
                </div>
                <div className={`font-bold text-lg task-value ${valueClass}`}>{task.value}</div>
            </div>
        );
    };

    const ShortcutLink = ({ icon, text, link, shortcutKey }) => (
        <a href={link} target="_blank" rel="noopener noreferrer" className="p-3 bg-white border border-ebay-border rounded-lg shadow-sm hover:shadow-md transition flex flex-col items-center justify-center space-y-1 text-center cursor-pointer">
            <i className={`${icon} text-2xl text-ebay-blue`}></i>
            <span className="text-sm font-medium text-ebay-text">{text}</span>
            <span className="text-xs text-ebay-gray px-1 py-0.5 bg-gray-100 rounded">
                Ctrl+{shortcutKey}
            </span>
        </a>
    );

    if (!isAuthenticated) {
        return <div className="min-h-screen flex items-center justify-center bg-gray-100 text-gray-700">eBayダッシュボード認証中...</div>;
    }

    return (
        <div className="p-4 min-h-screen bg-ebay-light-gray font-sans">
            <header className="mb-4 p-4 bg-ebay-white shadow-lg rounded-xl flex justify-between items-center border-b-4 border-ebay-blue">
                <h1 className="text-2xl font-extrabold text-ebay-blue-dark flex items-center gap-2">
                    <i className="fab fa-ebay text-3xl text-ebay-red"></i> eBay Seller Hub (日本語対応版)
                </h1>
                <div className="flex items-center space-x-3">
                    {message && <span className="text-sm text-ebay-green">{message}</span>}
                    <button onClick={() => console.log('設定')} className="bg-gray-100 text-ebay-gray p-2 rounded hover:bg-gray-200 text-sm">
                        <i className="fas fa-cog"></i> 設定
                    </button>
                    <button onClick={() => console.log('データ更新')} className="bg-ebay-blue text-ebay-white p-2 rounded hover:bg-ebay-blue-dark text-sm">
                        <i className="fas fa-sync-alt"></i> 更新
                    </button>
                </div>
            </header>

            <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" id="summary">
                {/* 1. 販売概要 */}
                <StatCard 
                    title="過去30日の売上" 
                    value={`$${stats.sales.toLocaleString()}`} 
                    iconClass="fas fa-dollar-sign" 
                    colorClass="bg-ebay-blue" 
                    link="https://www.ebay.com/sh/fin/reports"
                />
                <StatCard 
                    title="注文数" 
                    value={`${stats.orders} items`} 
                    iconClass="fas fa-shopping-cart" 
                    colorClass="bg-ebay-red" 
                    link="https://www.ebay.com/sh/ord/active"
                />
                <StatCard 
                    title="アクティブ出品" 
                    value={`${stats.activeListings}`} 
                    iconClass="fas fa-box-open" 
                    colorClass="bg-ebay-green" 
                    link="https://www.ebay.com/mys/listing"
                />
                <StatCard 
                    title="落札率" 
                    value={`${stats.conversionRate}%`} 
                    iconClass="fas fa-chart-line" 
                    colorClass="bg-gray-700" 
                    link="https://www.ebay.com/sh/performance"
                />
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-4" id="main-content">
                {/* 左側: タスクと出品サマリー (2/3幅) */}
                <div className="lg:col-span-2 space-y-4">
                    
                    {/* タスクリスト */}
                    <div className="bg-ebay-white p-4 rounded-xl shadow-lg border border-ebay-border" id="task-panel">
                        <h2 className="text-lg font-bold text-ebay-text mb-4 border-b pb-2 flex items-center gap-2"><i className="fas fa-tasks text-ebay-blue"></i> 今週のタスク</h2>
                        <div className="space-y-2" id="task-list">
                            {tasks.map(task => (
                                <TaskItem key={task.id} task={task} onComplete={completeTask} />
                            ))}
                            {tasks.length === 0 && <p className="text-center text-ebay-gray py-4">完了すべきタスクはありません！</p>}
                        </div>
                    </div>

                    {/* 出品サマリー */}
                    <div className="bg-ebay-white p-4 rounded-xl shadow-lg border border-ebay-border" id="listing-summary">
                        <h2 className="text-lg font-bold text-ebay-text mb-4 border-b pb-2 flex items-center gap-2"><i className="fas fa-tags text-ebay-blue"></i> 出品状況</h2>
                        <div className="grid grid-cols-2 gap-4">
                            <div className="p-3 bg-gray-100 rounded-lg text-center">
                                <div className="text-2xl font-bold text-ebay-blue-dark">15</div>
                                <div className="text-sm text-ebay-gray">Watch Listに追加された商品</div>
                            </div>
                            <div className="p-3 bg-gray-100 rounded-lg text-center">
                                <div className="text-2xl font-bold text-ebay-blue-dark">128</div>
                                <div className="text-sm text-ebay-gray">下書き（未出品）</div>
                            </div>
                        </div>
                    </div>
                </div>

                {/* 右側: パフォーマンス分析とショートカット (1/3幅) */}
                <div className="lg:col-span-1 space-y-4">
                    
                    {/* AIパフォーマンス分析 */}
                    <div className="bg-ebay-white p-4 rounded-xl shadow-lg border border-ebay-border" id="performance-analysis">
                        <h2 className="text-lg font-bold text-ebay-text mb-4 border-b pb-2 flex items-center gap-2"><i className="fas fa-brain text-ebay-red"></i> パフォーマンス分析 (AI)</h2>
                        <div className="text-sm text-ebay-text" dangerouslySetInnerHTML={{ __html: aiAnalysis }}></div>
                        <button 
                            onClick={runAiAnalysis} 
                            disabled={loading || !API_KEY}
                            className={`w-full mt-4 py-2 rounded font-semibold text-white transition ${loading || !API_KEY ? 'bg-gray-400 cursor-not-allowed' : 'bg-ebay-blue hover:bg-ebay-blue-dark'}`}
                        >
                            {loading ? '分析実行中...' : 'AI分析を実行'}
                        </button>
                    </div>

                    {/* ショートカットリンク */}
                    <div className="bg-ebay-white p-4 rounded-xl shadow-lg border border-ebay-border" id="shortcuts">
                        <h2 className="text-lg font-bold text-ebay-text mb-4 border-b pb-2 flex items-center gap-2"><i className="fas fa-bolt text-ebay-yellow"></i> クイックショートカット</h2>
                        <div className="grid grid-cols-3 gap-3">
                            <ShortcutLink icon="fas fa-plus" text="新規出品" link="https://bulksell.ebay.com/ws/eBayISAPI.dll?SingleList&sellingMode=AddItem" shortcutKey="N"/>
                            <ShortcutLink icon="fas fa-clipboard-list" text="注文管理" link="https://www.ebay.com/sh/ord/active" shortcutKey="O"/>
                            <ShortcutLink icon="fas fa-boxes" text="出品管理" link="https://www.ebay.com/mys/listing" shortcutKey="L"/>
                            <ShortcutLink icon="fas fa-chart-bar" text="パフォーマンス" link="https://www.ebay.com/sh/performance" shortcutKey="P"/>
                            <ShortcutLink icon="fas fa-comments" text="メッセージ" link="https://www.ebay.com/mes/messages" shortcutKey="M"/>
                            <ShortcutLink icon="fas fa-wrench" text="ストア設定" link="https://www.ebay.com/mys/sc/shopsettings" shortcutKey="S"/>
                        </div>
                    </div>
                </div>
            </div>
            {/* モーダルは省略（必要に応じて実装） */}
        </div>
    );
};

export default EbayDashboard;
📄 III. Claude/MCP への最終統合指示書
提供されたeBay専用ダッシュボード（EbayDashboard.jsx）をプロジェクトに統合し、最終デプロイを行うための指示書を作成します。

I. 🎯 目標
提供されたEbayDashboard.jsxファイルの内容をプロジェクトに統合し、特にeBay API認証情報とGemini APIキーを設定し、ダッシュボードがリアルタイム（API連携後）でデータ更新できる基盤を確立します。

II. 💾 外部API・データ連携の完了（最優先）
現在、コード内にはテスト用の定数が設定されています。これを実際の運用環境で動作するように修正してください。

eBay API認証情報の設置:

eBay APIの認証情報（OAuthトークン取得のためのクライアントID、Secretなど）をシステムに組み込んでください。ここではプレースホルダーとしてEBAY_APP_IDを設定してください。

JavaScript

const EBAY_APP_ID = "[ここに有効なeBay Application IDを設定]";
【重要】 実際の運用開始前に、eBayのOAuthフローを実装し、ユーザーのアクティブなトークンを取得するバックエンド連携が必要です。この作業は別途実施してください。

Gemini API Keyの設置（AI機能の有効化）:

定数 API_KEY に、有効な Google Gemini API Key を設定してください。

JavaScript

const API_KEY = "[ここに有効なGemini API Keyを設定]";
Firebase認証情報の設置:

定数 __firebase_config に、有効な Firebase プロジェクトの認証情報を正確に設定してください。

III. 🖥️ 機能とUI/UXの最終検証
以下の機能が指示通りに動作していることを、デプロイ前に確認してください。

1. 🔗 ダイレクトリンクの検証 (タスク A-3)
StatCardおよびShortcutLink内の全てのボタン/カードをクリックした際、window.open()が実行され、eBay Seller Hubの対応するページへ正しく遷移すること。特にショートカットキーの表示（例: Ctrl+L）が正しいこと。

2. 🧠 AI分析機能の検証 (タスク B)
「AI分析を実行」ボタンをクリックすると、Gemini APIが呼び出され（APIキー設定後）、統計データに基づいた具体的な改善提案3点が箇条書きで表示されること（ローディング状態の表示も確認）。

3. ✅ タスクリスト機能の検証 (タスク C)
タスクリストのチェックマークをクリックすると、そのタスクがリストから即座に削除される（Stateが更新される）こと。

「緊急対応 (Urgent)」タスク（例: 未発送の注文）が赤色で強調表示されていること。

IV. 📋 技術的制約の最終確認
単一ファイル構造: 全てのコードがEbayDashboard.jsxの単一ファイル内に含まれていること。

スタイリング: スタイリングが全てインラインのTailwind CSSクラスで、提供されたHTMLのeBayデザインテーマを完全に再現していること。

この指示書に基づき、EbayDashboard.jsxをデプロイし、本番環境での稼働を目指してください。