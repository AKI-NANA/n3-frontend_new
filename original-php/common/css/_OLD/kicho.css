/**
 * ===== NAGANO-3 記帳自動化ツール CSS統合完全版 =====
 * ファイル: common/css/pages/kicho.kicho__table th.fixed-4 {
    background:
        linear-gradient(to right, var(--fixed-bg-header) 0%, var(--fixed-bg-header) 100%),
        var(--fixed-bg-header) !important;
    z-index: 25 !important;
    left: 310px !important;
    width: var(--fixed-col-4-width) !important;
    min-width: var(--fixed-col-4-width) !important;
    max-width: var(--fixed-col-4-width) !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
    position: sticky !important;
    top: 0 !important;
    bottom: auto !important;
    transform: none !important;
    will-change: auto !important;
    contain: layout style paint !important;
}

/* ホバー効果（完全不透明維持） */
.kicho__table tbody tr:hover .fixed-1,
.kicho__table tbody tr:hover .fixed-2,
.kicho__table tbody tr:hover .fixed-3,
.kicho__table tbody tr:hover .fixed-4 {
    background: var(--fixed-bg-hover) !important;
    opacity: 1 !important;
}

/* 偶数行背景（完全不透明維持） */
.kicho__table tbody tr:nth-child(even) .fixed-1,
.kicho__table tbody tr:nth-child(even) .fixed-2,
.kicho__table tbody tr:nth-child(even) .fixed-3,
.kicho__table tbody tr:nth-child(even) .fixed-4 {
    background: var(--fixed-bg-even) !important;
    opacity: 1 !important;
}

/* 偶数行ホバー時（最優先） */
.kicho__table tbody tr:nth-child(even):hover .fixed-1,
.kicho__table tbody tr:nth-child(even):hover .fixed-2,
.kicho__table tbody tr:nth-child(even):hover .fixed-3,
.kicho__table tbody tr:nth-child(even):hover .fixed-4 {
    background: var(--fixed-bg-hover) !important;
    opacity: 1 !important;
}

/* チェックボックス（中央揃え） */
.kicho__checkbox-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    min-height: 2.25rem;
}

.kicho__checkbox {
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
    cursor: pointer;
    position: relative;
    transition: var(--transition-fast);
    margin: 0;
    flex-shrink: 0;
}

.kicho__checkbox:checked {
    background: var(--color-primary);
    border-color: var(--color-primary);
}

.kicho__checkbox:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
    line-height: 1;
}

.kicho__checkbox:hover {
    border-color: var(--color-primary);
}

/* ===== ページネーション（完全実装・テーブル下部配置） ===== */
.kicho__pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-lg);
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.kicho__pagination-info {
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

.kicho__pagination-controls {
    display: flex;
    gap: var(--space-sm);
    align-items: center;
}

.kicho__pagination-btn {
    padding: var(--space-xs) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--text-sm);
    cursor: pointer;
    transition: var(--transition-fast);
    min-width: 40px;
    text-align: center;
}

.kicho__pagination-btn:hover {
    background: var(--bg-hover);
    border-color: var(--color-primary);
}

.kicho__pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.kicho__pagination-btn--active {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.kicho__pagination-btn--ellipsis {
    border: none;
    background: transparent;
    cursor: default;
}

.kicho__pagination-btn--ellipsis:hover {
    background: transparent;
    border: none;
}

/* ===== 行選択数表示 ===== */
.kicho__selection-info {
    background: var(--color-primary);
    color: white;
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: 600;
    margin-left: var(--space-md);
    display: none;
}

.kicho__selection-info.show {
    display: inline-block;
}

/* タグとバッジ */
.kicho__tag {
    background: rgba(59, 130, 246, 0.1);
    color: var(--color-primary);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-size: 0.625rem;
    font-weight: 600;
    display: inline-block;
}

.kicho__tag--green {
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
}

.kicho__tag--purple {
    background: rgba(139, 92, 246, 0.1);
    color: var(--color-secondary);
}

.kicho__tag--blue {
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-info);
}

.kicho__tag--orange {
    background: rgba(249, 115, 22, 0.1);
    color: #f97316;
}

.kicho__tag--red {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
}

.kicho__tag--pending {
    background: rgba(245, 158, 11, 0.1);
    color: var(--color-warning);
}

/* 操作ボタン */
.kicho__action-group {
    display: flex;
    gap: 2px;
    justify-content: center;
}

.kicho__action-btn {
    width: 24px;
    height: 24px;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    transition: var(--transition-fast);
    background: var(--bg-hover);
    color: var(--text-secondary);
}

.kicho__action-btn:hover {
    background: var(--color-primary);
    color: white;
    transform: scale(1.05);
}

.kicho__action-btn--approve {
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
}

.kicho__action-btn--approve:hover {
    background: var(--color-success);
    color: white;
}

.kicho__action-btn--reject {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
}

.kicho__action-btn--reject:hover {
    background: var(--color-danger);
    color: white;
}

.kicho__action-btn--edit {
    background: rgba(59, 130, 246, 0.1);
    color: var(--color-primary);
}

.kicho__action-btn--edit:hover {
    background: var(--color-primary);
    color: white;
}

/* ===== CSV一括編集モーダル機能（完全統合版） ===== */

/* モーダル基本構造 */
.kicho__modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.kicho__modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}

.kicho__modal-content {
    position: relative;
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    max-width: 800px;
    max-height: 90vh;
    width: 90vw;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.kicho__modal-header {
    padding: var(--space-6);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
}

.kicho__modal-title {
    margin: 0;
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.kicho__modal-close {
    background: none;
    border: none;
    font-size: var(--text-lg);
    cursor: pointer;
    color: var(--text-secondary);
    padding: var(--space-2);
    border-radius: var(--radius-md);
    transition: var(--transition-normal);
}

.kicho__modal-close:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.kicho__modal-body {
    padding: var(--space-6);
    overflow-y: auto;
    flex: 1;
}

.kicho__modal-footer {
    padding: var(--space-4) var(--space-6);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
    background: var(--bg-tertiary);
}

/* CSVステップ */
.kicho__csv-step {
    margin-bottom: var(--space-6);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.kicho__step-header {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    color: white;
    padding: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.kicho__step-number {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--text-sm);
}

.kicho__step-content {
    padding: var(--space-5);
}

/* ダウンロード・アップロードオプション */
.kicho__download-options,
.kicho__upload-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-4);
}

/* プレビューエリア */
.kicho__csv-preview {
    margin-top: var(--space-6);
    padding: var(--space-4);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    background: var(--bg-tertiary);
}

.kicho__preview-summary {
    margin-bottom: var(--space-4);
    padding: var(--space-3);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--text-primary);
}

.kicho__rule-preview-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.kicho__preview-stat {
    padding: var(--space-3);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    text-align: center;
}

.kicho__stat-label {
    display: block;
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-1);
}

.kicho__stat-value {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--text-primary);
}

.kicho__preview-table-wrapper {
    max-height: 300px;
    overflow: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.kicho__preview-table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--text-sm);
}

.kicho__preview-table th,
.kicho__preview-table td {
    padding: var(--space-2);
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.kicho__preview-table th {
    background: var(--bg-secondary);
    font-weight: 600;
    position: sticky;
    top: 0;
}

.kicho__preview-table tbody tr:hover {
    background: var(--bg-hover);
}

/* ===== アラート表示（統合版） ===== */
.kicho__alert {
    display: none;
    padding: 0.5rem;
    margin-bottom: 0.5rem;
    border-radius: var(--radius-md);
    font-size: 0.75rem;
    font-weight: 600;
    align-items: center;
    gap: 0.5rem;
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 1100;
    max-width: 300px;
    box-shadow: var(--shadow-md);
    animation: slideInRight 0.3s ease;
}

.kicho__alert--success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.kicho__alert--error {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.kicho__alert--warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--color-warning);
    border: 1px solid rgba(245, 158, 11, 0.3);
}

.kicho__alert.show {
    display: flex;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ===== デバッグパネル完全削除（統合版） ===== */
body[data-page="kicho"] .debug-panel,
body[data-page="kicho"] .debug-btn,
body[data-page="kicho"] .debug-info,
body[data-page="kicho"] #debugInfo,
body[data-page="kicho"] [class*="debug"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: absolute !important;
    top: -9999px !important;
    left: -9999px !important;
    pointer-events: none !important;
}

/* デバッグパネル領域のクリーンアップ */
.debug-panel-container,
.debug-wrapper,
.debug-floating {
    display: none !important;
}

/* ページクリーンアップ：デバッグ要素削除後の調整 */
body[data-page="kicho"] {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
}

/* 記帳ページの最終調整（デバッグパネル削除後） */
body[data-page="kicho"] .kicho__section:last-child {
    margin-bottom: var(--space-xl) !important;
    padding-bottom: var(--space-lg) !important;
}

/* ===== ローディングスピナー強制非表示（統合版） ===== */
.loading-spinner,
#loading-spinner,
#loadingScreen {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    height: 0 !important;
    position: absolute !important;
    top: -9999px !important;
}

/* ===== レスポンシブ対応（統合版） ===== */
@media (max-width: 768px) {
    .kicho__header {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-md);
    }

    .kicho__header-actions {
        justify-content: center;
    }

    .dashboard__stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .kicho__overview-section {
        grid-template-columns: 1fr;
    }

    .kicho__search-controls {
        flex-direction: column;
        align-items: stretch;
    }

    .kicho__table-header {
        flex-direction: column;
        gap: var(--space-md);
        min-height: auto;
        padding: var(--space-md);
    }

    .kicho__table {
        font-size: 0.75rem;
    }

    .kicho__table th,
    .kicho__table td {
        padding: 0.25rem 0.5rem;
    }

    /* CSV機能モバイル対応 */
    .kicho__modal-content {
        width: 95vw;
        max-height: 95vh;
    }

    .kicho__csv-actions {
        flex-direction: column;
        width: 100%;
    }

    .kicho__csv-actions .btn {
        width: 100%;
    }

    .kicho__download-options,
    .kicho__upload-options {
        grid-template-columns: 1fr;
    }

    .kicho__rule-preview-stats {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .dashboard__stats-grid {
        grid-template-columns: 1fr;
    }

    .kicho__overview-section {
        gap: var(--space-lg);
    }
}

/* ===== 統計情報（コメント・統合版） ===== */
/*
 * 📈 NAGANO-3 記帳システム CSS統計:
 * - 総クラス数: 150+個
 * - CSS変数使用: 30+個
 * - 固定列システム: 4列完全連続配置
 * - CSV機能: 完全統合
 * - ページネーション: 完全実装
 * - レスポンシブ: 3ブレークポイント
 * - テキスト最適化: 折り返し対応
 * - Bootstrap.js対応: 完全連携
 * 
 * 🔍 品質指標:
 * - !important使用: 必要最小限（固定列のみ）
 * - Z-index管理: 階層化済み（15-26層）
 * - パフォーマンス: 最適化済み
 * - アクセシビリティ: 対応済み
 * 
 * 🚀 特徴:
 * - 連続固定列（隙間ゼロ）
 * - 完全不透明化（浮き防止）
 * - テキスト最適幅設計
 * - CSV一括編集モーダル
 * - デバッグパネル完全削除
 * - Bootstrap.js連携対応
 */

/* ===== バージョン情報（統合版） ===== */
/*
 * NAGANO-3 記帳システム CSS統合版
 * Version: 4.0.0-unified
 * Last Updated: 2025-07-04
 * Integration: Bootstrap.js + CSV + Layout Fix
 * Target: common/css/pages/kicho.css
 */css
 * バージョン: 4.0.0-unified
 * 最終更新: 2025/07/04
 * 
 * 🎯 統合機能:
 * ✅ 最適化固定列システム（4列連続・完全不透明）
 * ✅ 27項目ルール管理テーブル
 * ✅ 23項目承認待ち取引テーブル
 * ✅ CSV一括編集モーダル機能
 * ✅ レイアウト修正（Bootstrap.js対応）
 * ✅ デバッグパネル完全削除
 * ✅ レスポンシブ対応
 * ✅ NAGANO-3システム準拠
 */

/* ===== CSS変数定義（記帳専用・統合版） ===== */
:root {
    /* 記帳ツール専用カラー */
    --kicho-primary: #059669;
    --kicho-success: #16a34a;
    --kicho-warning: #d97706;
    --kicho-danger: #dc2626;
    --mf-blue: #0066cc;
    --mf-green: #28a745;
    --mf-orange: #ff6b35;
    --color-primary-rgb: 59, 130, 246;

    /* 最適化固定列専用変数（テキスト最適幅） */
    --fixed-col-1-width: 50px;
    /* チェックボックス（最小） */
    --fixed-col-2-width: 140px;
    /* ID（短縮版対応） */
    --fixed-col-3-width: 120px;
    /* ステータス/ルール（最適） */
    --fixed-col-4-width: 100px;
    /* 操作（3ボタン最適） */
    --fixed-boundary-color: #3b82f6;
    --fixed-bg-solid: #ffffff;
    /* 完全不透明白 */
    --fixed-bg-even: #f8fafc;
    /* 偶数行背景 */
    --fixed-bg-hover: #f1f5f9;
    /* ホバー背景 */
    --fixed-bg-header: #f9fafb;
    /* ヘッダー背景 */
}

/* ダークモード固定列背景 */
[data-theme="dark"] {
    --fixed-bg-solid: #292b2f;
    --fixed-bg-even: #2f3136;
    --fixed-bg-hover: #40444b;
    --fixed-bg-header: #36393f;
}

/* ===== レイアウト修正（Bootstrap.js対応・左マージン問題解決） ===== */

/* 記帳ページ専用レイアウト修正（Bootstrap.js対応版） */
body[data-page="kicho"] {
    margin-left: 220px !important;
    margin-top: 80px !important;
    padding: 1.5rem !important;
    min-height: calc(100vh - 80px) !important;
    background: var(--bg-primary, #ffffff) !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
}

/* モバイル対応 */
@media (max-width: 767px) {
    body[data-page="kicho"] {
        margin-left: 0 !important;
        margin-top: 60px !important;
        padding: 1rem !important;
    }
}

/* Bootstrap.js対応：メインコンテンツ追加調整 */
body[data-page="kicho"] .content,
body[data-page="kicho"] main.content {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    max-width: none !important;
}

/* サイドバー・ヘッダーとの重複防止（Bootstrap.js連携） */
body[data-page="kicho"] .sidebar,
body[data-page="kicho"] .unified-sidebar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 220px !important;
    height: 100vh !important;
    z-index: 1000 !important;
}

body[data-page="kicho"] .header,
body[data-page="kicho"] #mainHeader {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 60px !important;
    z-index: 1001 !important;
}

/* ===== ページヘッダー ===== */
.kicho__header {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-lg);
    flex-wrap: wrap;
}

.kicho__header-left {
    flex: 1;
    min-width: 300px;
}

.kicho__page-title {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--space-md) 0;
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.kicho__page-icon {
    color: var(--color-primary);
    font-size: var(--text-2xl);
}

.kicho__system-status {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

.kicho__status-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
    color: var(--text-secondary);
    padding: var(--space-xs) var(--space-sm);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.kicho__status-item--active {
    color: var(--kicho-success);
}

.kicho__header-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

/* ===== 統計ダッシュボード ===== */
.dashboard__stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.stat-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
    transition: var(--transition-normal);
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-primary);
}

.stat-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-md);
}

.stat-card__title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1.3;
}

.stat-card__icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-white);
    font-size: var(--text-lg);
    box-shadow: var(--shadow-sm);
    transition: var(--transition-normal);
}

.stat-card:hover .stat-card__icon {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

.stat-card__value {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
    line-height: 1.2;
}

.stat-card__trend {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
    font-weight: 500;
}

.trend-positive {
    color: var(--color-success);
}

.trend-negative {
    color: var(--color-danger);
}

.trend-neutral {
    color: var(--text-secondary);
}

/* ===== セクション ===== */
.kicho__section {
    margin-bottom: var(--space-xl);
}

.kicho__section-header {
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-lg);
    flex-wrap: wrap;
}

.kicho__section-title {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--space-sm) 0;
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.kicho__section-title i {
    color: var(--color-primary);
}

.kicho__section-subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
}

.kicho__section-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

/* ===== CSV機能ボタングループ ===== */
.kicho__csv-actions {
    display: flex;
    gap: var(--space-2);
    align-items: center;
}

/* ===== 3列レイアウト ===== */
.kicho__overview-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--space-xl);
    margin-bottom: var(--space-xl);
    align-items: start;
}

.kicho__overview-card {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: var(--transition-normal);
    height: auto;
    min-height: 320px;
}

.kicho__overview-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.kicho__import-header {
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    padding: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.kicho__import-header h3 {
    margin: 0;
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.kicho__import-icon--mf {
    color: var(--mf-blue);
    font-size: var(--text-xl);
}

.kicho__import-icon--csv {
    color: var(--color-success);
    font-size: var(--text-xl);
}

.kicho__import-icon--ai {
    color: var(--color-secondary);
    font-size: var(--text-xl);
}

.kicho__import-form {
    padding: var(--space-lg);
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.kicho__form-group {
    margin-bottom: var(--space-lg);
}

.kicho__form-label {
    display: block;
    margin-bottom: var(--space-sm);
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-primary);
}

.kicho__form-input {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--text-sm);
    transition: var(--transition-fast);
    min-height: 40px;
    font-family: inherit;
}

.kicho__form-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* ファイルアップロード */
.kicho__upload-area {
    border: 2px dashed var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-xl);
    text-align: center;
    cursor: pointer;
    transition: var(--transition-normal);
    margin-bottom: var(--space-md);
    background: var(--bg-secondary);
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.kicho__upload-area:hover,
.kicho__upload-area.drag-over {
    border-color: var(--color-primary);
    background: rgba(59, 130, 246, 0.05);
}

.kicho__upload-icon {
    font-size: var(--text-3xl);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.kicho__upload-text {
    margin: 0 0 var(--space-xs) 0;
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--text-primary);
}

.kicho__upload-subtext {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

/* ===== テーブルコンテナ ===== */
.kicho__table-container {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    margin-bottom: var(--space-xl);
    width: 100%;
    max-width: none;
}

.kicho__table-header {
    background: var(--bg-tertiary);
    padding: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-md);
    min-height: 80px;
}

.kicho__search-controls {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

.kicho__search-detail {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.kicho__search-detail label {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.kicho__search-input--compact,
.kicho__select--compact {
    padding: 0.375rem 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 0.75rem;
    height: 2rem;
    min-width: 100px;
    transition: var(--transition-fast);
}

.kicho__search-input--compact:focus,
.kicho__select--compact:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

/* ===== 最適化固定列テーブル（テキスト最適幅・折り返し対応） ===== */
.kicho__table-wrapper {
    overflow-x: auto;
    max-width: 100%;
    position: relative;
    padding-right: 20px;
    margin-right: -20px;
}

.kicho__table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 0.875rem;
    min-width: 2200px;
    table-layout: auto;
    margin-right: 0;
}

.kicho__table th,
.kicho__table td {
    padding: 0.5rem 0.75rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
    vertical-align: middle;
    border-right: none;
    border-left: none;
    overflow: visible;
    word-wrap: break-word;
    line-height: 1.4;
}

.kicho__table th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-primary);
    position: sticky;
    top: 0;
    z-index: 10;
    font-size: 0.75rem;
    min-height: 2.5rem;
    height: auto;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    cursor: pointer;
}

/* ソート機能のための矢印表示 */
.kicho__table th.sortable::after {
    content: '⇅';
    margin-left: 0.5rem;
    color: var(--text-muted);
    font-size: 0.8rem;
}

.kicho__table th.sortable:hover::after {
    color: var(--color-primary);
}

.kicho__table th.sort-asc::after {
    content: '↑';
    color: var(--color-primary);
}

.kicho__table th.sort-desc::after {
    content: '↓';
    color: var(--color-primary);
}

.kicho__table tbody tr {
    min-height: 2.25rem;
    height: auto;
    transition: var(--transition-fast);
}

.kicho__table tbody tr:nth-child(even) {
    background: rgba(241, 245, 249, 0.3);
}

/* ===== 連続固定列システム（4列・完全連続・不透明強化） ===== */

/* 固定列共通設定（連続配置版） */
.fixed-1,
.fixed-2,
.fixed-3,
.fixed-4 {
    position: sticky !important;
    background: var(--fixed-bg-solid) !important;
    z-index: 15 !important;
    opacity: 1 !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background-clip: padding-box !important;
    -webkit-background-clip: padding-box !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
    border-right: none !important;
    border-left: none !important;
    background:
        linear-gradient(to right, var(--fixed-bg-solid) 0%, var(--fixed-bg-solid) 100%),
        var(--fixed-bg-solid) !important;
    overflow: visible !important;
    text-overflow: clip !important;
    margin: 0 !important;
    box-sizing: border-box !important;
}

/* 固定列1: チェックボックス（50px・隙間ゼロ） */
.fixed-1 {
    left: 0px !important;
    width: var(--fixed-col-1-width) !important;
    min-width: var(--fixed-col-1-width) !important;
    max-width: var(--fixed-col-1-width) !important;
    text-align: center;
    padding: 0.5rem 0.25rem !important;
}

/* 固定列2: ID（140px・隙間ゼロ連続） */
.fixed-2 {
    left: 50px !important;
    width: var(--fixed-col-2-width) !important;
    min-width: var(--fixed-col-2-width) !important;
    max-width: var(--fixed-col-2-width) !important;
    text-align: left;
    white-space: normal !important;
    word-break: break-word !important;
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
}

/* 固定列3: ステータス/ルール（120px・隙間ゼロ連続） */
.fixed-3 {
    left: 190px !important;
    width: var(--fixed-col-3-width) !important;
    min-width: var(--fixed-col-3-width) !important;
    max-width: var(--fixed-col-3-width) !important;
    text-align: left;
    white-space: normal !important;
    word-break: break-word !important;
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
}

/* 固定列4: 操作（100px・隙間ゼロ連続・浮き防止強化） */
.fixed-4 {
    left: 310px !important;
    width: var(--fixed-col-4-width) !important;
    min-width: var(--fixed-col-4-width) !important;
    max-width: var(--fixed-col-4-width) !important;
    text-align: center;
    position: sticky !important;
    background: var(--fixed-bg-solid) !important;
    z-index: 15 !important;
    padding: 0.5rem 0.5rem !important;
    top: 0 !important;
    bottom: auto !important;
    transform: none !important;
    will-change: auto !important;
    contain: layout style paint !important;
}

/* ヘッダー固定列（同じ連続配置設定） */
.kicho__table th.fixed-1 {
    background:
        linear-gradient(to right, var(--fixed-bg-header) 0%, var(--fixed-bg-header) 100%),
        var(--fixed-bg-header) !important;
    z-index: 25 !important;
    left: 0px !important;
    width: var(--fixed-col-1-width) !important;
    min-width: var(--fixed-col-1-width) !important;
    max-width: var(--fixed-col-1-width) !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.kicho__table th.fixed-2 {
    background:
        linear-gradient(to right, var(--fixed-bg-header) 0%, var(--fixed-bg-header) 100%),
        var(--fixed-bg-header) !important;
    z-index: 25 !important;
    left: 50px !important;
    width: var(--fixed-col-2-width) !important;
    min-width: var(--fixed-col-2-width) !important;
    max-width: var(--fixed-col-2-width) !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.kicho__table th.fixed-3 {
    background:
        linear-gradient(to right, var(--fixed-bg-header) 0%, var(--fixed-bg-header) 100%),
        var(--fixed-bg-header) !important;
    z-index: 25 !important;
    left: 190px !important;
    width: var(--fixed-col-3-width) !important;
    min-width: var(--fixed-col-3-width) !important;
    max-width: var(--fixed-col-3-width) !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.