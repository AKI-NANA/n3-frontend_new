<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€æ–™è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ  - NAGANO-3 å®Œå…¨çµ±åˆç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* ===== é€æ–™è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ çµ±åˆCSSï¼ˆé‡è¤‡æ•´ç†ç‰ˆ - ã‚¯ãƒ©ã‚¹åå¤‰æ›´ãªã—ï¼‰ ===== */
/* HTMLã®ã‚¯ãƒ©ã‚¹åã¯ä¸€åˆ‡å¤‰æ›´ã›ãšã€é‡è¤‡éƒ¨åˆ†ã®ã¿çµ±åˆ */

/* ===== NAGANO-3çµ±ä¸€CSSå¤‰æ•°ï¼ˆæ—¢å­˜æ´»ç”¨ï¼‰ ===== */
:root {
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    
    --color-primary: #3b82f6;
    --color-secondary: #8b5cf6;
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-danger: #ef4444;
    --color-info: #06b6d4;
    
    --accent-blue: #06b6d4;
    --accent-purple: #8b5cf6;
    --accent-green: #10b981;
    --accent-yellow: #f59e0b;
    --accent-red: #ef4444;
    --accent-orange: #f97316;
    
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f1f5f9;
    --bg-hover: #e2e8f0;
    --bg-active: #cbd5e1;
    
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-tertiary: #64748b;
    --text-muted: #94a3b8;
    --text-white: #ffffff;
    
    --border-color: #e2e8f0;
    --border-light: #f1f5f9;
    --border-dark: #cbd5e1;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-full: 9999px;
    --transition-fast: all 0.15s ease-in-out;
    --transition-normal: all 0.2s ease-in-out;
    
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 1.875rem;
    
    --z-modal-backdrop: 1000;
    --z-modal: 1001;
}

/* ===== åŸºæœ¬ãƒªã‚»ãƒƒãƒˆ ===== */
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Yu Gothic', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
}

/* ===== ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ  ===== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--text-sm);
    font-weight: 500;
    text-decoration: none;
    cursor: pointer;
    transition: var(--transition-fast);
    white-space: nowrap;
    font-family: inherit;
}

.btn:hover {
    background: var(--bg-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

.btn--small {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--text-xs);
}

.btn--primary {
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    color: var(--text-white);
    border-color: transparent;
    box-shadow: var(--shadow-md);
}

.btn--primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.btn--secondary {
    background: transparent;
    color: var(--color-primary);
    border: 1px solid var(--color-primary);
}

.btn--secondary:hover {
    background: var(--color-primary);
    color: var(--text-white);
}

.btn--success {
    background: var(--color-success);
    color: var(--text-white);
    border-color: var(--color-success);
}

.btn--warning {
    background: var(--color-warning);
    color: var(--text-white);
    border-color: var(--color-warning);
}

.btn--danger {
    background: var(--color-danger);
    color: var(--text-white);
    border-color: var(--color-danger);
}

.btn--info {
    background: var(--color-info);
    color: var(--text-white);
    border-color: var(--color-info);
}

.btn--full {
    width: 100%;
    justify-content: center;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* ===== ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ===== */
.content {
    margin-left: 0 !important;
    max-width: 100vw;
    padding: var(--space-lg);
    overflow-x: hidden;
    box-sizing: border-box;
}

/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
.shipping__header {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-lg);
    flex-wrap: wrap;
}

.shipping__page-title {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--space-md) 0;
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.shipping__page-icon {
    color: var(--color-primary);
    font-size: var(--text-2xl);
}

.shipping__system-status {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

.shipping__status-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
    color: var(--text-secondary);
    padding: var(--space-xs) var(--space-sm);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.shipping__status-item--active {
    color: var(--color-success);
}

.shipping__header-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

/* ===== ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
.shipping__section {
    margin-bottom: var(--space-xl);
}

.shipping__section-header {
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-lg);
    flex-wrap: wrap;
}

.shipping__section-title {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--space-sm) 0;
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.shipping__section-title i {
    color: var(--color-primary);
}

.shipping__section-subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
}

.shipping__section-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

/* ===== ã‚«ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ===== */
.shipping__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
    align-items: start;
}

.shipping__card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: var(--transition-fast);
}

.shipping__card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.shipping__card-header {
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    padding: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.shipping__card-header h3 {
    margin: 0;
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.shipping__card-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: var(--text-white);
}

.shipping__card-icon--carrier {
    background: var(--color-primary);
}

.shipping__card-icon--condition {
    background: var(--accent-purple);
}

.shipping__card-icon--region {
    background: var(--color-success);
}

.shipping__card-icon--marketplace {
    background: var(--accent-orange);
}

.shipping__card-body {
    padding: var(--space-lg);
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* ===== ãƒ•ã‚©ãƒ¼ãƒ è¦ç´  ===== */
.shipping__form-group {
    margin-bottom: var(--space-lg);
}

.shipping__form-label {
    display: block;
    margin-bottom: var(--space-sm);
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-primary);
}

.shipping__form-input,
.shipping__form-select {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--text-sm);
    transition: var(--transition-fast);
    min-height: 40px;
    font-family: inherit;
}

.shipping__form-input:focus,
.shipping__form-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* ===== é…é€ä¼šç¤¾ç®¡ç† ===== */
.shipping__carrier-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-md);
}

.shipping__carrier-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-md);
    transition: var(--transition-fast);
}

.shipping__carrier-item:hover {
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
}

.shipping__carrier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
}

.shipping__carrier-name {
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.shipping__carrier-info {
    font-size: var(--text-xs);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
    line-height: 1.4;
}

.shipping__carrier-actions {
    display: flex;
    gap: var(--space-xs);
    flex-wrap: wrap;
}

.shipping__carrier-actions .btn {
    flex: 1;
    min-width: 60px;
}

.shipping__file-upload {
    display: none;
}

/* ===== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ ===== */
.shipping__status-badge {
    font-size: var(--text-xs);
    font-weight: 600;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-full);
    white-space: nowrap;
}

.shipping__status-badge--active {
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.shipping__status-badge--pending {
    background: rgba(245, 158, 11, 0.1);
    color: var(--color-warning);
    border: 1px solid rgba(245, 158, 11, 0.3);
}

.shipping__status-badge--inactive {
    background: rgba(107, 114, 128, 0.1);
    color: var(--text-secondary);
    border: 1px solid rgba(107, 114, 128, 0.3);
}

/* ===== ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šã‚¨ãƒªã‚¢ ===== */
.shipping__marketplace-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--space-lg);
}

.shipping__marketplace-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    transition: var(--transition-fast);
    display: flex;
    flex-direction: column;
    min-height: 180px;
}

.shipping__marketplace-item:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.shipping__marketplace-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.shipping__marketplace-name {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex: 1;
    min-width: 0;
}

.shipping__toggle-btn {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    transition: var(--transition-fast);
    flex-shrink: 0;
}

.shipping__toggle-btn i {
    transition: transform 0.3s ease;
}

.shipping__marketplace-summary {
    padding: var(--space-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-sm);
    border-left: 3px solid var(--color-primary);
}

.shipping__marketplace-summary strong {
    color: var(--color-primary);
}

.shipping__selected-preview {
    display: block;
    font-size: var(--text-xs);
    color: var(--text-secondary);
    margin-top: var(--space-xs);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.shipping__marketplace-methods {
    overflow: hidden;
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
    max-height: 400px;
    opacity: 1;
}

.shipping__marketplace-methods--collapsed {
    max-height: 0;
    opacity: 0;
}

.shipping__select-actions {
    display: flex;
    gap: var(--space-xs);
    margin-bottom: var(--space-sm);
    flex-wrap: wrap;
}

.shipping__select-actions .btn {
    font-size: var(--text-xs);
    padding: var(--space-xs) var(--space-sm);
    flex: 1;
    min-width: 80px;
}

.shipping__method-search {
    margin-bottom: var(--space-sm);
}

.shipping__method-search .shipping__form-input {
    font-size: var(--text-xs);
    padding: var(--space-xs) var(--space-sm);
    min-height: 32px;
}

.shipping__method-scroll {
    max-height: 160px;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    margin-bottom: var(--space-sm);
}

.shipping__method-scroll::-webkit-scrollbar {
    width: 4px;
}

.shipping__method-scroll::-webkit-scrollbar-track {
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
}

.shipping__method-scroll::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
}

.shipping__method-scroll::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary);
}

.shipping__method-scroll {
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) var(--bg-primary);
}

.shipping__method-item-checkbox {
    padding: var(--space-xs) var(--space-sm);
    border-bottom: 1px solid var(--border-light);
    transition: var(--transition-fast);
}

.shipping__method-item-checkbox:last-child {
    border-bottom: none;
}

.shipping__method-item-checkbox:hover {
    background: var(--bg-hover);
}

.shipping__checkbox-container {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    cursor: pointer;
    width: 100%;
}

.shipping__checkbox {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
}

.shipping__checkmark {
    width: 16px;
    height: 16px;
    background: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-sm);
    position: relative;
    transition: var(--transition-fast);
    flex-shrink: 0;
}

.shipping__checkbox:checked ~ .shipping__checkmark {
    background: var(--color-primary);
    border-color: var(--color-primary);
}

.shipping__checkmark::after {
    content: '';
    position: absolute;
    display: none;
    left: 4px;
    top: 1px;
    width: 3px;
    height: 7px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.shipping__checkbox:checked ~ .shipping__checkmark::after {
    display: block;
}

.shipping__carrier-details {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-xs);
}

.shipping__carrier-details i {
    color: var(--color-primary);
    width: 14px;
    flex-shrink: 0;
}

.shipping__marketplace-restrictions {
    margin-top: auto;
    padding-top: var(--space-sm);
    font-size: var(--text-xs);
    color: var(--text-secondary);
    border-top: 1px solid var(--border-light);
    line-height: 1.4;
}

.shipping__optimization-note {
    font-size: var(--text-xs);
    color: var(--text-secondary);
    font-style: italic;
}

.shipping__carrier-management {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-top: var(--space-xl);
}

.shipping__carrier-management h3 {
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    color: var(--text-primary);
}

.shipping__carrier-management-actions {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
}

/* ===== ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç† ===== */
.shipping__category-scroll-list {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
}

.shipping__category-scroll-item {
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--border-light);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: var(--transition-fast);
}

.shipping__category-scroll-item:last-child {
    border-bottom: none;
}

.shipping__category-scroll-item:hover {
    background: var(--bg-hover);
}

.shipping__category-name {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--text-primary);
}

.shipping__category-actions {
    display: flex;
    gap: var(--space-xs);
    opacity: 0.7;
    transition: var(--transition-fast);
}

.shipping__category-scroll-item:hover .shipping__category-actions {
    opacity: 1;
}

/* ===== åœ°åŸŸåˆ¥èª¿æ•´ãƒ†ãƒ¼ãƒ–ãƒ« ===== */
.shipping__region-table {
    width: 100%;
    border-collapse: collapse;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
}

.shipping__region-table th,
.shipping__region-table td {
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.shipping__region-table th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-primary);
    font-size: var(--text-sm);
}

.shipping__region-table tbody tr:hover {
    background: var(--bg-hover);
}

/* ===== ãƒ¢ãƒ¼ãƒ€ãƒ« ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: var(--z-modal-backdrop);
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-normal);
}

.modal-overlay--active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    max-width: 95%;
    width: 1200px;
    max-height: 95vh;
    overflow-y: auto;
    box-shadow: var(--shadow-xl);
    padding: var(--space-xl);
    border: 1px solid var(--border-color);
    transform: scale(0.95) translateY(-20px);
    transition: var(--transition-normal);
}

.modal-overlay--active .modal {
    transform: scale(1) translateY(0);
}

.modal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-lg);
    padding-bottom: var(--space-md);
    border-bottom: 1px solid var(--border-light);
}

.modal__title {
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.modal__close {
    width: 32px;
    height: 32px;
    border: none;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: var(--transition-fast);
}

.modal__close:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.modal__body {
    margin-bottom: var(--space-lg);
    line-height: 1.6;
}

.modal__footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-sm);
}

/* ===== ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º ===== */
.shipping__alert {
    display: none;
    padding: var(--space-sm);
    margin-bottom: var(--space-sm);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: 600;
    align-items: center;
    gap: var(--space-xs);
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 1100;
    max-width: 350px;
    box-shadow: var(--shadow-md);
    animation: slideInRight 0.3s ease;
}

.shipping__alert--success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.shipping__alert--error {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.shipping__alert--warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--color-warning);
    border: 1px solid rgba(245, 158, 11, 0.3);
}

.shipping__alert--info {
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-info);
    border: 1px solid rgba(6, 182, 212, 0.3);
}

.shipping__alert.show {
    display: flex;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ===== è¨ˆç®—çµæœè¡¨ç¤º ===== */
.shipping__calculation-result {
    background: var(--bg-secondary);
    border: 2px solid var(--color-success);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin: var(--space-lg) 0;
    display: none;
}

.shipping__result-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-md);
    margin-top: var(--space-md);
}

.shipping__result-item {
    background: var(--bg-primary);
    padding: var(--space-md);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--color-primary);
    box-shadow: var(--shadow-sm);
}

.shipping__result-item--total {
    border-left-color: var(--color-success);
}

.shipping__result-label {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.shipping__result-value {
    font-size: var(--text-lg);
    font-weight: bold;
    color: var(--color-primary);
}

.shipping__result-value--total {
    color: var(--color-success);
    font-size: var(--text-xl);
}

/* ===== åˆ†å²æ¡ä»¶å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  ===== */
.shipping__condition-form {
    background: var(--bg-tertiary);
    padding: var(--space-lg);
    border-radius: var(--radius-md);
    border: 2px dashed var(--border-color);
    margin-bottom: var(--space-md);
    display: none;
}

.shipping__condition-form--active {
    display: block;
    border-color: var(--color-primary);
}

.shipping__condition-form-row {
    display: grid;
    grid-template-columns: 1fr auto 1fr auto 1fr auto;
    gap: var(--space-sm);
    align-items: end;
    margin-bottom: var(--space-md);
}

/* ===== åœ°åŸŸåˆ¥æ–™é‡‘è¡¨ç”¨ã‚¹ã‚¿ã‚¤ãƒ« ===== */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-xl);
    padding: var(--space-lg);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    flex-wrap: wrap;
    gap: var(--space-lg);
}

.page-title {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--space-md) 0;
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.page-icon {
    color: var(--color-primary);
    font-size: var(--text-2xl);
}

.page-subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.5;
}

.page-actions {
    display: flex;
    gap: var(--space-md);
    align-items: center;
    flex-wrap: wrap;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.stat-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: var(--transition-fast);
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-lg);
    color: var(--text-white);
    box-shadow: var(--shadow-sm);
}

.stat-icon--primary {
    background: var(--color-primary);
}

.stat-icon--success {
    background: var(--color-success);
}

.stat-icon--warning {
    background: var(--color-warning);
}

.stat-icon--info {
    background: var(--color-info);
}

.stat-title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-secondary);
    margin: 0;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
}

.stat-description {
    font-size: var(--text-xs);
    color: var(--text-secondary);
    line-height: 1.4;
}

.filter-section {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
}

.filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.filter-label {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-primary);
}

.filter-select {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--text-sm);
    transition: var(--transition-fast);
    min-height: 40px;
    font-family: inherit;
}

.filter-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.table-container {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    overflow: hidden;
    margin-bottom: var(--space-xl);
}

.table-header {
    background: var(--bg-tertiary);
    padding: var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-md);
}

.table-title {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.table-actions {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.table-wrapper {
    overflow-x: auto;
    max-height: 70vh;
    position: relative;
}

.rates-table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--text-sm);
    min-width: 1400px;
}

.rates-table th,
.rates-table td {
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--border-light);
    vertical-align: middle;
}

.rates-table th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-primary);
    position: sticky;
    top: 0;
    z-index: 10;
}

.rates-table tbody tr:hover {
    background: var(--bg-hover);
}

.zone-header {
    background: rgba(59, 130, 246, 0.1) !important;
    font-weight: bold;
    color: var(--color-primary);
}

.zone-header td {
    padding: var(--space-md);
    border-bottom: 2px solid var(--color-primary);
}

.carrier-name {
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    min-width: 200px;
}

.price-cell {
    font-weight: 600;
    text-align: center;
}

.price-economy {
    color: var(--color-success);
}

.price-expedited {
    color: var(--color-warning);
}

.price-premium {
    color: var(--color-danger);
}

.delivery-days {
    text-align: center;
    color: var(--text-secondary);
}

.fuel-rate {
    text-align: center;
    font-weight: 600;
    color: var(--color-info);
}

.recommended {
    background: rgba(16, 185, 129, 0.1) !important;
    border-left: 4px solid var(--color-success);
}

/* ===== ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ ===== */
@media (max-width: 1200px) {
    .shipping__marketplace-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .shipping__method-scroll {
        max-height: 140px;
    }
    
    .page-header {
        flex-direction: column;
        align-items: stretch;
    }
    
    .page-actions {
        justify-content: center;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .filter-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .content {
        padding: var(--space-md);
    }
    
    .shipping__header {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-md);
    }
    
    .shipping__header-actions {
        justify-content: center;
    }
    
    .shipping__grid,
    .shipping__marketplace-grid {
        grid-template-columns: 1fr;
    }

    .shipping__carrier-actions {
        flex-direction: column;
    }

    .shipping__carrier-actions .btn {
        width: 100%;
    }

    .shipping__condition-form-row {
        grid-template-columns: 1fr;
        gap: var(--space-sm);
    }
    
    .shipping__marketplace-item {
        min-height: 160px;
    }
    
    .shipping__marketplace-header {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-sm);
    }
    
    .shipping__method-scroll {
        max-height: 120px;
    }
    
    .shipping__select-actions {
        justify-content: center;
    }
    
    .shipping__carrier-details {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-xs);
    }
    
    .shipping__carrier-name {
        white-space: normal;
        overflow: visible;
        text-overflow: unset;
    }
    
    .shipping__carrier-management-actions {
        flex-direction: column;
    }
    
    .shipping__carrier-management-actions .btn {
        width: 100%;
        justify-content: center;
    }
    
    .page-header {
        padding: var(--space-md);
    }
    
    .page-title {
        font-size: var(--text-xl);
        flex-direction: column;
        text-align: center;
        gap: var(--space-sm);
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .filter-grid {
        grid-template-columns: 1fr;
    }
    
    .table-header {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-md);
    }
    
    .table-actions {
        justify-content: center;
    }
    
    .rates-table {
        font-size: var(--text-xs);
    }
    
    .rates-table th,
    .rates-table td {
        padding: var(--space-xs) var(--space-sm);
    }
    
    .carrier-name {
        min-width: 150px;
        font-size: var(--text-xs);
    }
    
    .page-actions {
        flex-direction: column;
        gap: var(--space-sm);
    }
    
    .page-actions .btn {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .shipping__grid {
        gap: var(--space-lg);
    }
    
    .shipping__marketplace-item {
        min-height: 140px;
        padding: var(--space-md);
    }
    
    .shipping__method-scroll {
        max-height: 100px;
    }
    
    .shipping__select-actions {
        flex-direction: column;
    }
    
    .shipping__select-actions .btn {
        width: 100%;
        justify-content: center;
    }
    
    .page-header {
        padding: var(--space-sm);
    }
    
    .filter-section {
        padding: var(--space-md);
    }
    
    .table-header {
        padding: var(--space-md);
    }
    
    .stat-card {
        padding: var(--space-md);
    }
    
    .stat-value {
        font-size: var(--text-xl);
    }
    
    .carrier-name {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-xs);
        min-width: 120px;
    }
    
    .carrier-name i {
        width: auto;
    }
}

/* ===== ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ ===== */
@media (prefers-reduced-motion: reduce) {
    .shipping__marketplace-methods,
    .shipping__checkmark,
    .shipping__method-item-checkbox,
    .shipping__toggle-btn,
    .stat-card,
    .table-container,
    .filter-select {
        transition: none;
    }
    
    .stat-card:hover {
        transform: none;
    }
}

.shipping__checkbox:focus + .shipping__checkmark {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

@media (prefers-contrast: high) {
    .zone-header {
        background: var(--color-primary) !important;
        color: white;
    }
    
    .recommended {
        border-left-width: 6px;
    }
    
    .rates-table th {
        background: var(--text-primary);
        color: var(--bg-secondary);
    }
}

/* ===== ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒå¯¾å¿œ ===== */
[data-theme="dark"] .shipping__method-scroll {
    background: #2f3136;
    border-color: #40444b;
}

[data-theme="dark"] .shipping__method-item-checkbox:hover {
    background: #36393f;
}

[data-theme="dark"] .shipping__checkmark {
    background: #36393f;
    border-color: #40444b;
}

[data-theme="dark"] .shipping__marketplace-summary {
    background: #36393f;
}

[data-theme="dark"] .shipping__method-scroll::-webkit-scrollbar-track {
    background: #2f3136;
}

[data-theme="dark"] .shipping__method-scroll::-webkit-scrollbar-thumb {
    background: #40444b;
}

[data-theme="dark"] .shipping__method-scroll::-webkit-scrollbar-thumb:hover {
    background: #5865f2;
}
</style>
<script>
// CAIDS error_handling Hook

// CAIDS ã‚¨ãƒ©ãƒ¼å‡¦ç†Hook - å®Œå…¨å®Ÿè£…
window.CAIDS_ERROR_HANDLER = {
    isActive: true,
    errorCount: 0,
    errorHistory: [],
    
    initialize: function() {
        this.setupGlobalErrorHandler();
        this.setupUnhandledPromiseRejection();
        this.setupNetworkErrorHandler();
        console.log('âš ï¸ CAIDS ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨åˆæœŸåŒ–');
    },
    
    setupGlobalErrorHandler: function() {
        window.addEventListener('error', (event) => {
            this.handleError({
                type: 'JavaScript Error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error?.stack
            });
        });
    },
    
    setupUnhandledPromiseRejection: function() {
        window.addEventListener('unhandledrejection', (event) => {
            this.handleError({
                type: 'Unhandled Promise Rejection',
                message: event.reason?.message || String(event.reason),
                stack: event.reason?.stack
            });
        });
    },
    
    setupNetworkErrorHandler: function() {
        const originalFetch = window.fetch;
        window.fetch = async function(...args) {
            try {
                const response = await originalFetch.apply(this, args);
                if (!response.ok) {
                    window.CAIDS_ERROR_HANDLER.handleError({
                        type: 'Network Error',
                        message: `HTTP ${response.status}: ${response.statusText}`,
                        url: args[0]
                    });
                }
                return response;
            } catch (error) {
                window.CAIDS_ERROR_HANDLER.handleError({
                    type: 'Network Fetch Error',
                    message: error.message,
                    url: args[0]
                });
                throw error;
            }
        };
    },
    
    handleError: function(errorInfo) {
        this.errorCount++;
        this.errorHistory.push({...errorInfo, timestamp: new Date().toISOString()});
        
        console.error('ğŸš¨ CAIDS Error Handler:', errorInfo);
        this.showErrorNotification(errorInfo);
        this.reportError(errorInfo);
    },
    
    showErrorNotification: function(errorInfo) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = `
            position: fixed; top: 10px; right: 10px; z-index: 999999;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white; padding: 15px 20px; border-radius: 8px;
            max-width: 350px; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            border: 2px solid #ff6666; animation: caids-error-shake 0.5s ease-in-out;
        `;
        errorDiv.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 18px;">ğŸš¨</span>
                <div>
                    <strong>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong><br>
                    <small style="opacity: 0.9;">${errorInfo.type}: ${errorInfo.message}</small>
                </div>
            </div>
        `;
        
        // CSS Animation
        if (!document.getElementById('caids-error-styles')) {
            const style = document.createElement('style');
            style.id = 'caids-error-styles';
            style.textContent = `
                @keyframes caids-error-shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(errorDiv);
        setTimeout(() => errorDiv.remove(), 7000);
    },
    
    reportError: function(errorInfo) {
        // ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»é€ä¿¡ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
        const report = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            errorCount: this.errorCount,
            sessionId: this.getSessionId(),
            ...errorInfo
        };
        
        console.log('ğŸ“‹ CAIDS Error Report:', report);
        localStorage.setItem('caids_last_error', JSON.stringify(report));
    },
    
    getSessionId: function() {
        let sessionId = sessionStorage.getItem('caids_session_id');
        if (!sessionId) {
            sessionId = 'caids_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('caids_session_id', sessionId);
        }
        return sessionId;
    },
    
    getErrorStats: function() {
        return {
            totalErrors: this.errorCount,
            recentErrors: this.errorHistory.slice(-10),
            sessionId: this.getSessionId()
        };
    }
};

window.CAIDS_ERROR_HANDLER.initialize();

</script>
<script>
// CAIDS user_feedback Hook
// CAIDS user_feedback Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_feedback Hook loaded');
</script>
<script>
// CAIDS character_limit Hook
// CAIDS character_limit Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_limit Hook loaded');
</script>
<script>
// CAIDS natural_explanation Hook
// CAIDS natural_explanation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… natural_explanation Hook loaded');
</script>
<script>
// CAIDS character_monitoring Hook
// CAIDS character_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_monitoring Hook loaded');
</script>
<script>
// CAIDS emergency_accumulation Hook
// CAIDS emergency_accumulation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… emergency_accumulation Hook loaded');
</script>
<script>
// CAIDS processing_capacity_monitoring Hook
// CAIDS processing_capacity_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… processing_capacity_monitoring Hook loaded');
</script>
<script>
// CAIDS pre_analysis_enforcement Hook
// CAIDS pre_analysis_enforcement Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… pre_analysis_enforcement Hook loaded');
</script>
<script>
// CAIDS user_approval_required Hook
// CAIDS user_approval_required Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_approval_required Hook loaded');
</script>
<script>
// CAIDS timeout_management Hook
// CAIDS timeout_management Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… timeout_management Hook loaded');
</script>
<script>
// CAIDS development_control Hook
// CAIDS development_control Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… development_control Hook loaded');
</script>
</head>
<body>
    <!-- ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div class="shipping__alert shipping__alert--success" id="successAlert">
        <i class="fas fa-check-circle"></i>
        <span id="successMessage">å‡¦ç†ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸã€‚</span>
    </div>

    <div class="shipping__alert shipping__alert--error" id="errorAlert">
        <i class="fas fa-exclamation-triangle"></i>
        <span id="errorMessage">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</span>
    </div>

    <div class="shipping__alert shipping__alert--warning" id="warningAlert">
        <i class="fas fa-exclamation-circle"></i>
        <span id="warningMessage">è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚</span>
    </div>

    <div class="shipping__alert shipping__alert--info" id="infoAlert">
        <i class="fas fa-info-circle"></i>
        <span id="infoMessage">æƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚</span>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="content">
        <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="shipping__header">
            <div>
                <h1 class="shipping__page-title">
                    <i class="fas fa-shipping-fast shipping__page-icon"></i>
                    é€æ–™è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ  - NAGANO-3 å®Œå…¨çµ±åˆç‰ˆ
                </h1>
                <div class="shipping__system-status">
                    <div class="shipping__status-item shipping__status-item--active">
                        <i class="fas fa-circle"></i>
                        <span>ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­</span>
                    </div>
                    <div class="shipping__status-item">
                        <i class="fas fa-database"></i>
                        APIé€£æº: æ­£å¸¸
                    </div>
                    <div class="shipping__status-item">
                        <i class="fas fa-fire"></i>
                        ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—
                    </div>
                    <div class="shipping__status-item">
                        <i class="fas fa-clock"></i>
                        <span>æœ€çµ‚æ›´æ–°: <span id="last-update-time">2025/06/29 14:30</span></span>
                    </div>
                </div>
            </div>
            <div class="shipping__header-actions">
                <button class="btn btn--secondary" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i>
                    ãƒ‡ãƒ¼ã‚¿æ›´æ–°
                </button>
                <button class="btn btn--primary" onclick="openCalculator()">
                    <i class="fas fa-calculator"></i>
                    é€æ–™è¨ˆç®—ãƒ†ã‚¹ãƒˆ
                </button>
                <button class="btn btn--success" onclick="openRegionalRatesModal()">
                    <i class="fas fa-globe"></i>
                    åœ°åŸŸåˆ¥æ–™é‡‘è¡¨
                </button>
            </div>
        </div>

        <!-- é…é€ä¼šç¤¾ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå…¨é…é€ä¼šç¤¾å¯¾å¿œç‰ˆï¼‰ -->
        <section class="shipping__section" id="carriers">
            <div class="shipping__section-header">
                <div>
                    <h2 class="shipping__section-title">
                        <i class="fas fa-truck"></i>
                        é…é€ä¼šç¤¾ç®¡ç†ï¼ˆå…¨18ç¤¾å¯¾å¿œï¼‰
                    </h2>
                    <p class="shipping__section-subtitle">
                        é…é€ä¼šç¤¾åˆ¥CSVæ–™é‡‘ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»APIè‡ªå‹•é€£æºãƒ»åœ°åŸŸåˆ¥æ–™é‡‘è¨­å®šãƒ»ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIè‡ªå‹•å–å¾—
                    </p>
                </div>
                <div class="shipping__section-actions">
                    <button class="btn btn--secondary" onclick="addNewCarrier()">
                        <i class="fas fa-plus"></i>
                        é…é€ä¼šç¤¾è¿½åŠ 
                    </button>
                    <button class="btn btn--warning" onclick="bulkUpdateRates()">
                        <i class="fas fa-sync-alt"></i>
                        ä¸€æ‹¬æ–™é‡‘æ›´æ–°
                    </button>
                </div>
            </div>

            <div class="shipping__carrier-list" id="carrierList">
                <!-- FedExé–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-plane"></i>
                            FedExï¼ˆé€šå¸¸ï¼‰
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            APIé€£æºæ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/29 10:30 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 2,220ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—ï¼ˆ12.5%ï¼‰ | å¯¾å¿œåœ°åŸŸ: å…¨ä¸–ç•Œ
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="fedex-normal-csv" accept=".csv" onchange="uploadCarrierCSV('fedex-normal', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('fedex-normal-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--success" onclick="updateAPIRates('fedex-normal')">
                            <i class="fas fa-sync"></i>
                            APIæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('fedex-normal')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-shipping-fast"></i>
                            CPASS + FedEx
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            å‰²å¼•æ–™é‡‘é©ç”¨
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/20 14:20 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,680ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | å‰²å¼•ç‡: 15-25%
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="cpass-fedex-csv" accept=".csv" onchange="uploadCarrierCSV('cpass-fedex', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('cpass-fedex-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVç™»éŒ²
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('cpass-fedex')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-box"></i>
                            Eloji + FedEx
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/25 09:15 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,940ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | ç‰¹å¾´: æ—¥æœ¬ç‰¹åŒ–
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="eloji-fedex-csv" accept=".csv" onchange="uploadCarrierCSV('eloji-fedex', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('eloji-fedex-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('eloji-fedex')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- DHLé–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-shipping-fast"></i>
                            DHLï¼ˆé€šå¸¸ï¼‰
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            APIé€£æºæ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/29 11:15 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,940ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—ï¼ˆ18.0%ï¼‰ | å¼·ã¿: æ¬§å·ãƒ»ã‚¢ã‚¸ã‚¢
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="dhl-normal-csv" accept=".csv" onchange="uploadCarrierCSV('dhl-normal', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('dhl-normal-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--success" onclick="updateAPIRates('dhl-normal')">
                            <i class="fas fa-sync"></i>
                            APIæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('dhl-normal')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-shipping-fast"></i>
                            CPASS + DHL
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--pending">
                            ãƒ‡ãƒ¼ã‚¿æœŸé™è¿‘ã„
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/05/15 16:45 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,520ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | å‰²å¼•ç‡: 20-30%
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="cpass-dhl-csv" accept=".csv" onchange="uploadCarrierCSV('cpass-dhl', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('cpass-dhl-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('cpass-dhl')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-box"></i>
                            Eloji + DHL
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/22 11:30 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,780ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | ç‰¹å¾´: ã‚¢ã‚¸ã‚¢æœ€é©åŒ–
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="eloji-dhl-csv" accept=".csv" onchange="uploadCarrierCSV('eloji-dhl', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('eloji-dhl-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('eloji-dhl')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- UPSé–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-truck"></i>
                            UPSï¼ˆé€šå¸¸ï¼‰
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--pending">
                            APIè¨­å®šä¸­
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/15 09:00 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,250ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—ï¼ˆ15.2%ï¼‰ | å¼·ã¿: åŒ—ç±³ãƒ»å—ç±³
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="ups-normal-csv" accept=".csv" onchange="uploadCarrierCSV('ups-normal', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('ups-normal-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('ups-normal')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-box"></i>
                            Eloji + UPS
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--pending">
                            CSVæ›´æ–°è¦
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/10 14:30 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 890ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | å‰²å¼•ç‡: 10-20%
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="eloji-ups-csv" accept=".csv" onchange="uploadCarrierCSV('eloji-ups', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('eloji-ups-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('eloji-ups')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- æ—¥æœ¬éƒµä¾¿é–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-mail-bulk"></i>
                            æ—¥æœ¬éƒµä¾¿ EMS
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            APIé€£æºæ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/28 08:00 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 950ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—ï¼ˆ5.8%ï¼‰ | ç‰¹å¾´: æ—¥æœ¬ç™ºé€æœ€é©
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="jppost-ems-csv" accept=".csv" onchange="uploadCarrierCSV('jppost-ems', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('jppost-ems-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--success" onclick="updateAPIRates('jppost-ems')">
                            <i class="fas fa-sync"></i>
                            APIæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('jppost-ems')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-mail-bulk"></i>
                            æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/26 15:20 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 680ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | ç‰¹å¾´: å°ç‰©ç‰¹åŒ–
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="jppost-small-csv" accept=".csv" onchange="uploadCarrierCSV('jppost-small', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('jppost-small-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('jppost-small')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-mail-bulk"></i>
                            æ—¥æœ¬éƒµä¾¿ æ›¸ç•™
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/25 12:10 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 430ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | ç‰¹å¾´: ä¿é™ºä»˜
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="jppost-registered-csv" accept=".csv" onchange="uploadCarrierCSV('jppost-registered', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('jppost-registered-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('jppost-registered')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- eBayé–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fab fa-ebay"></i>
                            CPASS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--active">
                            ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ¸ˆã¿
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/27 10:45 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1,240ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æ–™é‡‘ã«å«ã‚€ | ç‰¹å¾´: eBayæœ€é©åŒ–
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="cpass-ebay-csv" accept=".csv" onchange="uploadCarrierCSV('cpass-ebay', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('cpass-ebay-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('cpass-ebay')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fab fa-ebay"></i>
                            Eloji + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--pending">
                            è¨­å®šä¸­
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: æœªè¨­å®š | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 0ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æœªè¨­å®š | ç‰¹å¾´: æ–°è¦è¿½åŠ äºˆå®š
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="eloji-ebay-csv" accept=".csv" onchange="uploadCarrierCSV('eloji-ebay', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('eloji-ebay-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVç™»éŒ²
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('eloji-ebay')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- USPSé–¢é€£ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-envelope"></i>
                            USPS Priority Mail
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--pending">
                            APIè¨­å®šä¸­
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        æœ€çµ‚æ›´æ–°: 2024/06/20 16:20 | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 820ä»¶ | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIè‡ªå‹•å–å¾—ï¼ˆ8.5%ï¼‰ | ç‰¹å¾´: ç±³å›½å†…æœ€å®‰
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="usps-priority-csv" accept=".csv" onchange="uploadCarrierCSV('usps-priority', this)">
                        <button class="btn btn--small btn--secondary" onclick="document.getElementById('usps-priority-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVæ›´æ–°
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('usps-priority')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-envelope"></i>
                            USPS Priority Express
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--inactive">
                            æœªè¨­å®š
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        CSVãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªè¨­å®š | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æœªè¨­å®š | ç‰¹å¾´: é€Ÿé”ã‚µãƒ¼ãƒ“ã‚¹
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="usps-express-csv" accept=".csv" onchange="uploadCarrierCSV('usps-express', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('usps-express-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVç™»éŒ²
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('usps-express')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <!-- ãã®ä»–ã®é…é€ä¼šç¤¾ -->
                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-shipping-fast"></i>
                            TNT Express
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--inactive">
                            æœªè¨­å®š
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        CSVãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªè¨­å®š | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æœªè¨­å®š | ç‰¹å¾´: ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘å¼·åŒ–
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="tnt-express-csv" accept=".csv" onchange="uploadCarrierCSV('tnt-express', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('tnt-express-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVç™»éŒ²
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('tnt-express')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>

                <div class="shipping__carrier-item">
                    <div class="shipping__carrier-header">
                        <h3 class="shipping__carrier-name">
                            <i class="fas fa-globe"></i>
                            Aramex
                        </h3>
                        <span class="shipping__status-badge shipping__status-badge--inactive">
                            æœªè¨­å®š
                        </span>
                    </div>
                    <div class="shipping__carrier-info">
                        CSVãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªè¨­å®š | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æœªè¨­å®š | ç‰¹å¾´: ä¸­æ±ãƒ»ã‚¢ãƒ•ãƒªã‚«
                    </div>
                    <div class="shipping__carrier-actions">
                        <input type="file" class="shipping__file-upload" id="aramex-csv" accept=".csv" onchange="uploadCarrierCSV('aramex', this)">
                        <button class="btn btn--small btn--primary" onclick="document.getElementById('aramex-csv').click()">
                            <i class="fas fa-upload"></i>
                            CSVç™»éŒ²
                        </button>
                        <button class="btn btn--small btn--warning" onclick="editCarrier('aramex')">
                            <i class="fas fa-edit"></i>
                            è¨­å®š
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
<!-- ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè¤‡æ•°é¸æŠå¯¾å¿œç‰ˆï¼‰ -->
<!-- ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè¤‡æ•°é¸æŠå¯¾å¿œç‰ˆï¼‰ -->
<section class="shipping__section" id="marketplace-shipping">
    <div class="shipping__section-header">
        <div>
            <h2 class="shipping__section-title">
                <i class="fas fa-store"></i>
                ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šï¼ˆè¤‡æ•°é¸æŠå¯¾å¿œï¼‰
            </h2>
            <p class="shipping__section-subtitle">
                ç™»éŒ²æ¸ˆã¿18é…é€ä¼šç¤¾ã®è¤‡æ•°é¸æŠç®¡ç†ã€‚å„ãƒ¢ãƒ¼ãƒ«ã§è¤‡æ•°é…é€æ–¹æ³•ã‚’åŒæ™‚é©ç”¨ã—ã€æœ€é©ãªé…é€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•é¸æŠ
            </p>
        </div>
        <div class="shipping__section-actions">
            <button class="btn btn--secondary" onclick="refreshCarrierList()">
                <i class="fas fa-sync"></i>
                é…é€ä¼šç¤¾æ›´æ–°
            </button>
            <button class="btn btn--warning" onclick="bulkSelectCarriers()">
                <i class="fas fa-check-double"></i>
                ä¸€æ‹¬é¸æŠ
            </button>
            <button class="btn btn--success" onclick="saveMarketplaceSettings()">
                <i class="fas fa-save"></i>
                è¨­å®šä¿å­˜
            </button>
        </div>
    </div>

    <div class="shipping__marketplace-grid">
        <!-- Shopify -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fab fa-shopify" style="color: var(--color-success);"></i>
                    Shopify
                </h3>
                <span class="shipping__status-badge shipping__status-badge--active">é€£æºæ¸ˆã¿</span>
                <button class="btn btn--small btn--secondary shipping__toggle-btn" onclick="toggleCarrierPanel('shopify')">
                    <i class="fas fa-chevron-down"></i>
                    <span>è¨­å®š</span>
                </button>
            </div>
            <div class="shipping__marketplace-summary">
                é¸æŠæ¸ˆã¿: <strong><span id="shopify-selected-count">4</span></strong> / å…¨<span id="shopify-total-count">18</span>ç¤¾
                <span class="shipping__selected-preview" id="shopify-preview">FedExï¼ˆé€šå¸¸ï¼‰, DHLï¼ˆé€šå¸¸ï¼‰, UPSï¼ˆé€šå¸¸ï¼‰, æ—¥æœ¬éƒµä¾¿ EMS</span>
            </div>
            <div class="shipping__marketplace-methods shipping__marketplace-methods--collapsed" id="shopify-methods">
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('shopify')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('shopify')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="shopify-carrier-search" onkeyup="filterCarriers('shopify', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="shopify-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div class="shipping__marketplace-restrictions">
                åˆ¶é™: é‡é‡30kgä»¥ä¸‹ã€å¯¸æ³•200cmä»¥ä¸‹ | ç‰¹å¾´: ã‚°ãƒ­ãƒ¼ãƒãƒ«é…é€å¯¾å¿œã€è¿½è·¡ç•ªå·è‡ªå‹•é€šçŸ¥
            </div>
        </div>

        <!-- eBay -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fab fa-ebay" style="color: var(--color-primary);"></i>
                    eBay
                </h3>
                <span class="shipping__status-badge shipping__status-badge--active">é€£æºæ¸ˆã¿</span>
                <button class="btn btn--small btn--secondary shipping__toggle-btn" onclick="toggleCarrierPanel('ebay')">
                    <i class="fas fa-chevron-down"></i>
                    <span>è¨­å®š</span>
                </button>
            </div>
            <div class="shipping__marketplace-summary">
                é¸æŠæ¸ˆã¿: <strong><span id="ebay-selected-count">4</span></strong> / å…¨<span id="ebay-total-count">18</span>ç¤¾
                <span class="shipping__selected-preview" id="ebay-preview">CPA SS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯, FedExï¼ˆé€šå¸¸ï¼‰, DHLï¼ˆé€šå¸¸ï¼‰, æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©</span>
            </div>
            <div class="shipping__marketplace-methods shipping__marketplace-methods--collapsed" id="ebay-methods">
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('ebay')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('ebay')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="ebay-carrier-search" onkeyup="filterCarriers('ebay', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="ebay-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div class="shipping__marketplace-restrictions">
                åˆ¶é™: eBayãƒãƒªã‚·ãƒ¼æº–æ‹  | ç‰¹å¾´: ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚·ãƒƒãƒ”ãƒ³ã‚°ãƒ—ãƒ­ã‚°ãƒ©ãƒ å¯¾å¿œã€é…é€æ™‚é–“è¡¨ç¤º
            </div>
        </div>

        <!-- Amazon -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fab fa-amazon" style="color: var(--color-warning);"></i>
                    Amazon
                </h3>
                <span class="shipping__status-badge shipping__status-badge--pending">è¨­å®šä¸­</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('amazon')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('amazon')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="amazon-carrier-search" onkeyup="filterCarriers('amazon', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="amazon-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="amazon-selected-count">0</span></strong> / å…¨<span id="amazon-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: Amazoné…é€è¦å‰‡é©ç”¨ | ç‰¹å¾´: FBAé€£æºã€Primeå¯¾å¿œã€è¿”å“å¯¾å¿œè‡ªå‹•åŒ–
            </div>
        </div>

        <!-- Etsy -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fas fa-handshake" style="color: var(--accent-orange);"></i>
                    Etsy
                </h3>
                <span class="shipping__status-badge shipping__status-badge--active">é€£æºæ¸ˆã¿</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('etsy')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('etsy')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="etsy-carrier-search" onkeyup="filterCarriers('etsy', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="etsy-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="etsy-selected-count">0</span></strong> / å…¨<span id="etsy-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: æ‰‹ä½œã‚Šãƒ»ãƒ´ã‚£ãƒ³ãƒ†ãƒ¼ã‚¸å•†å“ | ç‰¹å¾´: å€‹äººè²©å£²è€…å¯¾å¿œã€ã‚«ã‚¹ã‚¿ãƒ é…é€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
            </div>
        </div>

        <!-- Mercari -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fas fa-shopping-bag" style="color: var(--accent-red);"></i>
                    Mercari
                </h3>
                <span class="shipping__status-badge shipping__status-badge--inactive">æœªå¯¾å¿œ</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('mercari')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('mercari')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="mercari-carrier-search" onkeyup="filterCarriers('mercari', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="mercari-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="mercari-selected-count">0</span></strong> / å…¨<span id="mercari-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: å›½å†…é…é€ã®ã¿ | ç‰¹å¾´: åŒ¿åé…é€ã€é…é€æ–™å‰²å¼•ã€è£œå„Ÿä»˜ã
            </div>
        </div>

        <!-- Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚° -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fab fa-yahoo" style="color: var(--accent-purple);"></i>
                    Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°
                </h3>
                <span class="shipping__status-badge shipping__status-badge--pending">è¨­å®šä¸­</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('yahoo')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('yahoo')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="yahoo-carrier-search" onkeyup="filterCarriers('yahoo', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="yahoo-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="yahoo-selected-count">0</span></strong> / å…¨<span id="yahoo-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: Yahoo!ãƒãƒªã‚·ãƒ¼æº–æ‹  | ç‰¹å¾´: PayPayé€£æºã€Tãƒã‚¤ãƒ³ãƒˆå¯¾å¿œã€é…é€ã‚ªãƒ—ã‚·ãƒ§ãƒ³è±Šå¯Œ
            </div>
        </div>

        <!-- Shopeeï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fas fa-shopping-cart" style="color: var(--accent-orange);"></i>
                    Shopee
                </h3>
                <span class="shipping__status-badge shipping__status-badge--pending">è¨­å®šä¸­</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('shopee')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('shopee')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="shopee-carrier-search" onkeyup="filterCarriers('shopee', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="shopee-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="shopee-selected-count">0</span></strong> / å…¨<span id="shopee-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: æ±å—ã‚¢ã‚¸ã‚¢åœ°åŸŸ | ç‰¹å¾´: ç¾åœ°é…é€ç‰¹åŒ–ã€CODå¯¾å¿œã€Shopee Logisticsé€£æº
            </div>
        </div>

        <!-- Rakuten Global -->
        <div class="shipping__marketplace-item">
            <div class="shipping__marketplace-header">
                <h3 class="shipping__marketplace-name">
                    <i class="fas fa-globe" style="color: var(--color-danger);"></i>
                    Rakuten Global
                </h3>
                <span class="shipping__status-badge shipping__status-badge--inactive">æœªå¯¾å¿œ</span>
                <div class="shipping__select-actions">
                    <button class="btn btn--small btn--secondary" onclick="selectAllCarriers('rakuten-global')">
                        <i class="fas fa-check-square"></i>
                        å…¨é¸æŠ
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="clearAllCarriers('rakuten-global')">
                        <i class="fas fa-square"></i>
                        å…¨è§£é™¤
                    </button>
                </div>
            </div>
            <div class="shipping__marketplace-methods">
                <label class="shipping__form-label">åˆ©ç”¨å¯èƒ½é…é€æ–¹æ³•ï¼ˆè¤‡æ•°é¸æŠï¼‰</label>
                <div class="shipping__method-search">
                    <input type="text" placeholder="é…é€ä¼šç¤¾æ¤œç´¢..." class="shipping__form-input" id="rakuten-global-carrier-search" onkeyup="filterCarriers('rakuten-global', this.value)">
                </div>
                <div class="shipping__method-list-checkbox shipping__method-scroll" id="rakuten-global-carrier-list">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ -->
                </div>
                <div class="shipping__method-summary">
                    é¸æŠæ¸ˆã¿: <strong><span id="rakuten-global-selected-count">0</span></strong> / å…¨<span id="rakuten-global-total-count">18</span>ç¤¾
                    <span class="shipping__optimization-note">â€»è¤‡æ•°é¸æŠæ™‚ã¯æœ€é©é…é€ä¼šç¤¾ã‚’è‡ªå‹•é¸æŠ</span>
                </div>
            </div>
            <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                åˆ¶é™: å›½éš›é…é€å°‚ç”¨ | ç‰¹å¾´: æ¥½å¤©è¶Šå¢ƒECã€å¤šè¨€èªå¯¾å¿œã€æµ·å¤–æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ 
            </div>
        </div>
    </div>

    <!-- é…é€ä¼šç¤¾ç®¡ç†ãƒ‘ãƒãƒ«ï¼ˆæ‹¡å¼µç‰ˆï¼‰ -->
    <div class="shipping__carrier-management">
        <h3 style="margin-bottom: var(--space-md); display: flex; align-items: center; gap: var(--space-sm);">
            <i class="fas fa-cogs"></i>
            é…é€ä¼šç¤¾ç®¡ç†ãƒ‘ãƒãƒ«ï¼ˆè¤‡æ•°é¸æŠå¯¾å¿œï¼‰
        </h3>
        <div class="shipping__carrier-management-actions">
            <button class="btn btn--primary" onclick="openCarrierMappingModal()">
                <i class="fas fa-map"></i>
                é…é€ä¼šç¤¾ãƒãƒƒãƒ”ãƒ³ã‚°è¡¨ç¤º
            </button>
            <button class="btn btn--warning" onclick="bulkCarrierUpdate()">
                <i class="fas fa-sync-alt"></i>
                å…¨ãƒ¢ãƒ¼ãƒ«ä¸€æ‹¬æ›´æ–°
            </button>
            <button class="btn btn--info" onclick="optimizeCarrierSelection()">
                <i class="fas fa-magic"></i>
                æœ€é©åŒ–æ¨å¥¨è¨­å®š
            </button>
            <button class="btn btn--success" onclick="exportCarrierSettings()">
                <i class="fas fa-download"></i>
                è¨­å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
            </button>
        </div>
    </div>
</section>

<script>
// ===== ç™»éŒ²æ¸ˆã¿é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆ18ç¤¾ï¼‰- å¤‰æ›´ãªã— =====
const registeredCarriers = [
    // FedExé–¢é€£
    { id: 'fedex-normal', name: 'FedExï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-plane', status: 'active', apiEnabled: true },
    { id: 'cpass-fedex', name: 'CPA SS + FedEx', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: false },
    { id: 'eloji-fedex', name: 'Eloji + FedEx', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // DHLé–¢é€£
    { id: 'dhl-normal', name: 'DHLï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: true },
    { id: 'cpass-dhl', name: 'CPA SS + DHL', icon: 'fas fa-shipping-fast', status: 'pending', apiEnabled: false },
    { id: 'eloji-dhl', name: 'Eloji + DHL', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // UPSé–¢é€£
    { id: 'ups-normal', name: 'UPSï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-truck', status: 'pending', apiEnabled: true },
    { id: 'eloji-ups', name: 'Eloji + UPS', icon: 'fas fa-box', status: 'pending', apiEnabled: false },
    
    // æ—¥æœ¬éƒµä¾¿é–¢é€£
    { id: 'jppost-ems', name: 'æ—¥æœ¬éƒµä¾¿ EMS', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: true },
    { id: 'jppost-small', name: 'æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    { id: 'jppost-registered', name: 'æ—¥æœ¬éƒµä¾¿ æ›¸ç•™', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    
    // eBayé–¢é€£
    { id: 'cpass-ebay', name: 'CPA SS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'active', apiEnabled: false },
    { id: 'eloji-ebay', name: 'Eloji + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'pending', apiEnabled: false },
    
    // USPSé–¢é€£
    { id: 'usps-priority', name: 'USPS Priority Mail', icon: 'fas fa-envelope', status: 'pending', apiEnabled: true },
    { id: 'usps-express', name: 'USPS Priority Express', icon: 'fas fa-envelope', status: 'inactive', apiEnabled: false },
    
    // ãã®ä»–
    { id: 'tnt-express', name: 'TNT Express', icon: 'fas fa-shipping-fast', status: 'inactive', apiEnabled: false },
    { id: 'aramex', name: 'Aramex', icon: 'fas fa-globe', status: 'inactive', apiEnabled: false },
    { id: 'shopee-logistics', name: 'Shopee Logistics', icon: 'fas fa-shopping-cart', status: 'pending', apiEnabled: false }
];

// ãƒ¢ãƒ¼ãƒ«åˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰
const marketplaceDefaults = {
    'shopify': ['fedex-normal', 'dhl-normal', 'ups-normal', 'jppost-ems'],
    'ebay': ['cpass-ebay', 'fedex-normal', 'dhl-normal', 'jppost-small'],
    'amazon': ['fedex-normal', 'dhl-normal', 'jppost-ems'],
    'etsy': ['jppost-ems', 'jppost-small', 'fedex-normal'],
    'mercari': ['jppost-ems', 'jppost-small'],
    'yahoo': ['jppost-ems', 'fedex-normal'],
    'shopee': ['shopee-logistics', 'dhl-normal', 'fedex-normal'],
    'rakuten-global': ['jppost-ems', 'fedex-normal', 'dhl-normal']
};

let marketplaceSettings = {};

// ===== åˆæœŸåŒ–ï¼ˆä¿®æ­£ç‰ˆï¼šæœ€åˆã¯å…¨ã¦æŠ˜ã‚ŠãŸãŸã¿ï¼‰ =====
function initializeMarketplaceShipping() {
    Object.keys(marketplaceDefaults).forEach(marketplace => {
        generateCarrierListCheckbox(marketplace);
        updateCarrierCounts(marketplace);
        updateSelectedPreview(marketplace);
        
        // åˆæœŸçŠ¶æ…‹ã§å…¨ã¦æŠ˜ã‚ŠãŸãŸã¿
        const panel = document.getElementById(`${marketplace}-methods`);
        if (panel) {
            panel.classList.add('shipping__marketplace-methods--collapsed');
        }
    });
}

// ===== æŠ˜ã‚ŠãŸãŸã¿ãƒ‘ãƒãƒ«åˆ¶å¾¡ï¼ˆä¿®æ­£ç‰ˆï¼‰ =====
function toggleCarrierPanel(marketplace) {
    const panel = document.getElementById(`${marketplace}-methods`);
    const button = panel.closest('.shipping__marketplace-item').querySelector('.shipping__toggle-btn');
    const icon = button.querySelector('i');
    const text = button.querySelector('span');
    
    if (panel.classList.contains('shipping__marketplace-methods--collapsed')) {
        // å±•é–‹
        panel.classList.remove('shipping__marketplace-methods--collapsed');
        icon.className = 'fas fa-chevron-up';
        text.textContent = 'é–‰ã˜ã‚‹';
    } else {
        // æŠ˜ã‚ŠãŸãŸã¿
        panel.classList.add('shipping__marketplace-methods--collapsed');
        icon.className = 'fas fa-chevron-down';
        text.textContent = 'è¨­å®š';
    }
}

// ===== é¸æŠæ¸ˆã¿é…é€ä¼šç¤¾ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° =====
function updateSelectedPreview(marketplace) {
    const previewElement = document.getElementById(`${marketplace}-preview`);
    if (!previewElement) return;
    
    const selectedCarriers = marketplaceSettings[marketplace] || marketplaceDefaults[marketplace] || [];
    const carrierNames = selectedCarriers.map(carrierId => {
        const carrier = registeredCarriers.find(c => c.id === carrierId);
        return carrier ? carrier.name : carrierId;
    });
    
    if (carrierNames.length === 0) {
        previewElement.textContent = 'æœªé¸æŠ';
        previewElement.style.color = 'var(--text-secondary)';
    } else if (carrierNames.length <= 3) {
        previewElement.textContent = carrierNames.join(', ');
        previewElement.style.color = 'var(--text-primary)';
    } else {
        previewElement.textContent = `${carrierNames.slice(0, 2).join(', ')} ä»–${carrierNames.length - 2}ç¤¾`;
        previewElement.style.color = 'var(--text-primary)';
    }
}

// ===== é…é€ä¼šç¤¾ãƒªã‚¹ãƒˆç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ =====
function generateCarrierListCheckbox(marketplace) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;

    const enabledCarriers = marketplaceDefaults[marketplace] || [];
    
    container.innerHTML = registeredCarriers.map(carrier => {
        const isChecked = enabledCarriers.includes(carrier.id);
        const statusIcon = getStatusIcon(carrier.status);
        const apiIndicator = carrier.apiEnabled ? '<i class="fas fa-wifi" style="color: var(--color-success); font-size: 10px;" title="APIå¯¾å¿œ"></i>' : '';
        
        return `
            <div class="shipping__method-item-checkbox" data-carrier-id="${carrier.id}">
                <label class="shipping__checkbox-container">
                    <input type="checkbox" class="shipping__checkbox" 
                           ${isChecked ? 'checked' : ''} 
                           onchange="toggleCarrierSelection('${marketplace}', '${carrier.id}', this.checked)">
                    <span class="shipping__checkmark"></span>
                    <div class="shipping__carrier-info">
                        <span class="shipping__carrier-details">
                            <i class="${carrier.icon}" style="color: var(--color-primary);"></i>
                            <span class="shipping__carrier-name">${carrier.name}</span>
                            ${statusIcon}
                            ${apiIndicator}
                        </span>
                    </div>
                </label>
            </div>
        `;
    }).join('');
}

// ===== é…é€ä¼šç¤¾é¸æŠãƒˆã‚°ãƒ«ï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰ =====
function toggleCarrierSelection(marketplace, carrierId, isChecked) {
    if (!marketplaceSettings[marketplace]) {
        marketplaceSettings[marketplace] = [];
    }
    
    if (isChecked) {
        if (!marketplaceSettings[marketplace].includes(carrierId)) {
            marketplaceSettings[marketplace].push(carrierId);
        }
    } else {
        marketplaceSettings[marketplace] = marketplaceSettings[marketplace].filter(id => id !== carrierId);
    }
    
    updateCarrierCounts(marketplace);
    updateSelectedPreview(marketplace);
    
    const carrierName = registeredCarriers.find(c => c.id === carrierId)?.name;
    showAlert('info', `${marketplace}ã§${carrierName}ã‚’${isChecked ? 'é¸æŠ' : 'é¸æŠè§£é™¤'}ã—ã¾ã—ãŸã€‚`);
}

// ===== å…¨é¸æŠãƒ»å…¨è§£é™¤ =====
function selectAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (!checkbox.checked) {
            checkbox.checked = true;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, true);
        }
    });
    updateSelectedPreview(marketplace);
    showAlert('success', `${marketplace}ã®å…¨é…é€ä¼šç¤¾ã‚’é¸æŠã—ã¾ã—ãŸã€‚`);
}

function clearAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
            checkbox.checked = false;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, false);
        }
    });
    updateSelectedPreview(marketplace);
    showAlert('warning', `${marketplace}ã®å…¨é…é€ä¼šç¤¾é¸æŠã‚’è§£é™¤ã—ã¾ã—ãŸã€‚`);
}

// ===== é…é€ä¼šç¤¾æ•°æ›´æ–°ï¼ˆé¸æŠæ¸ˆã¿è¡¨ç¤ºï¼‰ =====
function updateCarrierCounts(marketplace) {
    const selectedElement = document.getElementById(`${marketplace}-selected-count`);
    const totalElement = document.getElementById(`${marketplace}-total-count`);
    
    if (!selectedElement || !totalElement) return;
    
    const container = document.getElementById(`${marketplace}-carrier-list`);
    const checkedBoxes = container?.querySelectorAll('.shipping__checkbox:checked').length || 0;
    
    selectedElement.textContent = checkedBoxes;
    totalElement.textContent = registeredCarriers.length;
}

// ===== é…é€ä¼šç¤¾ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆå¯¾å¿œï¼‰ =====
function filterCarriers(marketplace, searchTerm) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;
    
    const items = container.querySelectorAll('.shipping__method-item-checkbox');
    const term = searchTerm.toLowerCase();
    
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        const shouldShow = !term || text.includes(term);
        item.style.display = shouldShow ? 'block' : 'none';
    });
}

// ===== ä¸€æ‹¬é¸æŠæ©Ÿèƒ½ =====
function bulkSelectCarriers() {
    showAlert('info', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠä¸­...');
    
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            selectAllCarriers(marketplace);
        });
        showAlert('success', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠã—ã¾ã—ãŸã€‚');
    }, 1500);
}

// ===== æœ€é©åŒ–æ¨å¥¨è¨­å®š =====
function optimizeCarrierSelection() {
    showAlert('warning', 'AIã«ã‚ˆã‚‹æœ€é©é…é€ä¼šç¤¾é¸æŠã‚’å®Ÿè¡Œä¸­...');
    
    setTimeout(() => {
        showAlert('success', 'å„ãƒ¢ãƒ¼ãƒ«ã«æœ€é©ãªé…é€ä¼šç¤¾ã®çµ„ã¿åˆã‚ã›ã‚’è‡ªå‹•é¸æŠã—ã¾ã—ãŸã€‚ã‚³ã‚¹ãƒˆãƒ»é€Ÿåº¦ãƒ»ä¿¡é ¼æ€§ã‚’ç·åˆçš„ã«åˆ¤å®šæ¸ˆã¿ã§ã™ã€‚');
        updateLastUpdateTime();
    }, 3000);
}

// ===== ãã®ä»–ã®æ—¢å­˜é–¢æ•°ã¯ãã®ã¾ã¾ =====
function getStatusIcon(status) {
    const icons = {
        'active': '<i class="fas fa-check-circle" style="color: var(--color-success); font-size: 10px;" title="ç¨¼åƒä¸­"></i>',
        'pending': '<i class="fas fa-clock" style="color: var(--color-warning); font-size: 10px;" title="è¨­å®šä¸­"></i>',
        'inactive': '<i class="fas fa-times-circle" style="color: var(--text-secondary); font-size: 10px;" title="æœªè¨­å®š"></i>'
    };
    return icons[status] || '';
}

function refreshCarrierList() {
    showAlert('warning', 'é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ä¸­...');
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            generateCarrierListCheckbox(marketplace);
            updateCarrierCounts(marketplace);
        });
        showAlert('success', '18ç¤¾ã®é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚');
        updateLastUpdateTime();
    }, 2000);
}

function saveMarketplaceSettings() {
    showAlert('warning', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€è¨­å®šã‚’ä¿å­˜ä¸­...');
    setTimeout(() => {
        showAlert('success', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šï¼ˆè¤‡æ•°é¸æŠï¼‰ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚é¸æŠã•ã‚ŒãŸé…é€ä¼šç¤¾ã‹ã‚‰æœ€é©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•é¸æŠã•ã‚Œã¾ã™ã€‚');
        updateLastUpdateTime();
    }, 1500);
}

function exportCarrierSettings() {
    const settings = {
        carriers: registeredCarriers,
        marketplaceSettings: marketplaceSettings,
        defaults: marketplaceDefaults,
        exportDate: new Date().toISOString(),
        selectionType: 'multiple'
    };
    
    const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'shipping-settings-multiple-export.json';
    a.click();
    URL.revokeObjectURL(url);
    
    showAlert('success', 'è¤‡æ•°é¸æŠå¯¾å¿œã®é…é€è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚');
}

// ===== åˆæœŸåŒ–å®Ÿè¡Œ =====
document.addEventListener('DOMContentLoaded', function() {
    initializeMarketplaceShipping();
});
</script>

<script>
// ===== ç™»éŒ²æ¸ˆã¿é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆ18ç¤¾ï¼‰- å¤‰æ›´ãªã— =====
const registeredCarriers = [
    // FedExé–¢é€£
    { id: 'fedex-normal', name: 'FedExï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-plane', status: 'active', apiEnabled: true },
    { id: 'cpass-fedex', name: 'CPA SS + FedEx', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: false },
    { id: 'eloji-fedex', name: 'Eloji + FedEx', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // DHLé–¢é€£
    { id: 'dhl-normal', name: 'DHLï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: true },
    { id: 'cpass-dhl', name: 'CPA SS + DHL', icon: 'fas fa-shipping-fast', status: 'pending', apiEnabled: false },
    { id: 'eloji-dhl', name: 'Eloji + DHL', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // UPSé–¢é€£
    { id: 'ups-normal', name: 'UPSï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-truck', status: 'pending', apiEnabled: true },
    { id: 'eloji-ups', name: 'Eloji + UPS', icon: 'fas fa-box', status: 'pending', apiEnabled: false },
    
    // æ—¥æœ¬éƒµä¾¿é–¢é€£
    { id: 'jppost-ems', name: 'æ—¥æœ¬éƒµä¾¿ EMS', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: true },
    { id: 'jppost-small', name: 'æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    { id: 'jppost-registered', name: 'æ—¥æœ¬éƒµä¾¿ æ›¸ç•™', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    
    // eBayé–¢é€£
    { id: 'cpass-ebay', name: 'CPA SS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'active', apiEnabled: false },
    { id: 'eloji-ebay', name: 'Eloji + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'pending', apiEnabled: false },
    
    // USPSé–¢é€£
    { id: 'usps-priority', name: 'USPS Priority Mail', icon: 'fas fa-envelope', status: 'pending', apiEnabled: true },
    { id: 'usps-express', name: 'USPS Priority Express', icon: 'fas fa-envelope', status: 'inactive', apiEnabled: false },
    
    // ãã®ä»–
    { id: 'tnt-express', name: 'TNT Express', icon: 'fas fa-shipping-fast', status: 'inactive', apiEnabled: false },
    { id: 'aramex', name: 'Aramex', icon: 'fas fa-globe', status: 'inactive', apiEnabled: false },
    { id: 'shopee-logistics', name: 'Shopee Logistics', icon: 'fas fa-shopping-cart', status: 'pending', apiEnabled: false }
];

// ãƒ¢ãƒ¼ãƒ«åˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰
const marketplaceDefaults = {
    'shopify': ['fedex-normal', 'dhl-normal', 'ups-normal', 'jppost-ems'],
    'ebay': ['cpass-ebay', 'fedex-normal', 'dhl-normal', 'jppost-small'],
    'amazon': ['fedex-normal', 'dhl-normal', 'jppost-ems'],
    'etsy': ['jppost-ems', 'jppost-small', 'fedex-normal'],
    'mercari': ['jppost-ems', 'jppost-small'],
    'yahoo': ['jppost-ems', 'fedex-normal'],
    'shopee': ['shopee-logistics', 'dhl-normal', 'fedex-normal'],
    'rakuten-global': ['jppost-ems', 'fedex-normal', 'dhl-normal']
};

let marketplaceSettings = {};

// ===== åˆæœŸåŒ–ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ =====
function initializeMarketplaceShipping() {
    Object.keys(marketplaceDefaults).forEach(marketplace => {
        generateCarrierListCheckbox(marketplace);
        updateCarrierCounts(marketplace);
        updateSelectedPreview(marketplace);
    });
}

// ===== æŠ˜ã‚ŠãŸãŸã¿ãƒ‘ãƒãƒ«åˆ¶å¾¡ =====
function toggleCarrierPanel(marketplace) {
    const panel = document.getElementById(`${marketplace}-methods`);
    const button = panel.closest('.shipping__marketplace-item').querySelector('.shipping__toggle-btn');
    const icon = button.querySelector('i');
    const text = button.querySelector('span');
    
    if (panel.classList.contains('shipping__marketplace-methods--collapsed')) {
        // å±•é–‹
        panel.classList.remove('shipping__marketplace-methods--collapsed');
        icon.className = 'fas fa-chevron-up';
        text.textContent = 'é–‰ã˜ã‚‹';
    } else {
        // æŠ˜ã‚ŠãŸãŸã¿
        panel.classList.add('shipping__marketplace-methods--collapsed');
        icon.className = 'fas fa-chevron-down';
        text.textContent = 'è¨­å®š';
    }
}

// ===== é¸æŠæ¸ˆã¿é…é€ä¼šç¤¾ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° =====
function updateSelectedPreview(marketplace) {
    const previewElement = document.getElementById(`${marketplace}-preview`);
    if (!previewElement) return;
    
    const selectedCarriers = marketplaceSettings[marketplace] || marketplaceDefaults[marketplace] || [];
    const carrierNames = selectedCarriers.map(carrierId => {
        const carrier = registeredCarriers.find(c => c.id === carrierId);
        return carrier ? carrier.name : carrierId;
    });
    
    if (carrierNames.length === 0) {
        previewElement.textContent = 'æœªé¸æŠ';
        previewElement.style.color = 'var(--text-secondary)';
    } else if (carrierNames.length <= 3) {
        previewElement.textContent = carrierNames.join(', ');
        previewElement.style.color = 'var(--text-primary)';
    } else {
        previewElement.textContent = `${carrierNames.slice(0, 2).join(', ')} ä»–${carrierNames.length - 2}ç¤¾`;
        previewElement.style.color = 'var(--text-primary)';
    }
}

// ===== é…é€ä¼šç¤¾ãƒªã‚¹ãƒˆç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ =====
function generateCarrierListCheckbox(marketplace) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;

    const enabledCarriers = marketplaceDefaults[marketplace] || [];
    
    container.innerHTML = registeredCarriers.map(carrier => {
        const isChecked = enabledCarriers.includes(carrier.id);
        const statusIcon = getStatusIcon(carrier.status);
        const apiIndicator = carrier.apiEnabled ? '<i class="fas fa-wifi" style="color: var(--color-success); font-size: 10px;" title="APIå¯¾å¿œ"></i>' : '';
        
        return `
            <div class="shipping__method-item-checkbox" data-carrier-id="${carrier.id}">
                <label class="shipping__checkbox-container">
                    <input type="checkbox" class="shipping__checkbox" 
                           ${isChecked ? 'checked' : ''} 
                           onchange="toggleCarrierSelection('${marketplace}', '${carrier.id}', this.checked)">
                    <span class="shipping__checkmark"></span>
                    <div class="shipping__carrier-info">
                        <span class="shipping__carrier-details">
                            <i class="${carrier.icon}" style="color: var(--color-primary);"></i>
                            <span class="shipping__carrier-name">${carrier.name}</span>
                            ${statusIcon}
                            ${apiIndicator}
                        </span>
                    </div>
                </label>
            </div>
        `;
    }).join('');
}

// ===== é…é€ä¼šç¤¾é¸æŠãƒˆã‚°ãƒ«ï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰ =====
function toggleCarrierSelection(marketplace, carrierId, isChecked) {
    if (!marketplaceSettings[marketplace]) {
        marketplaceSettings[marketplace] = [];
    }
    
    if (isChecked) {
        if (!marketplaceSettings[marketplace].includes(carrierId)) {
            marketplaceSettings[marketplace].push(carrierId);
        }
    } else {
        marketplaceSettings[marketplace] = marketplaceSettings[marketplace].filter(id => id !== carrierId);
    }
    
    updateCarrierCounts(marketplace);
    updateSelectedPreview(marketplace);
    
    const carrierName = registeredCarriers.find(c => c.id === carrierId)?.name;
    showAlert('info', `${marketplace}ã§${carrierName}ã‚’${isChecked ? 'é¸æŠ' : 'é¸æŠè§£é™¤'}ã—ã¾ã—ãŸã€‚`);
}

// ===== å…¨é¸æŠãƒ»å…¨è§£é™¤ =====
function selectAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (!checkbox.checked) {
            checkbox.checked = true;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, true);
        }
    });
    updateSelectedPreview(marketplace);
    showAlert('success', `${marketplace}ã®å…¨é…é€ä¼šç¤¾ã‚’é¸æŠã—ã¾ã—ãŸã€‚`);
}

function clearAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
            checkbox.checked = false;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, false);
        }
    });
    updateSelectedPreview(marketplace);
    showAlert('warning', `${marketplace}ã®å…¨é…é€ä¼šç¤¾é¸æŠã‚’è§£é™¤ã—ã¾ã—ãŸã€‚`);
}

// ===== é…é€ä¼šç¤¾æ•°æ›´æ–°ï¼ˆé¸æŠæ¸ˆã¿è¡¨ç¤ºï¼‰ =====
function updateCarrierCounts(marketplace) {
    const selectedElement = document.getElementById(`${marketplace}-selected-count`);
    const totalElement = document.getElementById(`${marketplace}-total-count`);
    
    if (!selectedElement || !totalElement) return;
    
    const container = document.getElementById(`${marketplace}-carrier-list`);
    const checkedBoxes = container?.querySelectorAll('.shipping__checkbox:checked').length || 0;
    
    selectedElement.textContent = checkedBoxes;
    totalElement.textContent = registeredCarriers.length;
}

// ===== é…é€ä¼šç¤¾ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆå¯¾å¿œï¼‰ =====
function filterCarriers(marketplace, searchTerm) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;
    
    const items = container.querySelectorAll('.shipping__method-item-checkbox');
    const term = searchTerm.toLowerCase();
    
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        const shouldShow = !term || text.includes(term);
        item.style.display = shouldShow ? 'block' : 'none';
    });
}

// ===== ä¸€æ‹¬é¸æŠæ©Ÿèƒ½ =====
function bulkSelectCarriers() {
    showAlert('info', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠä¸­...');
    
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            selectAllCarriers(marketplace);
        });
        showAlert('success', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠã—ã¾ã—ãŸã€‚');
    }, 1500);
}

// ===== æœ€é©åŒ–æ¨å¥¨è¨­å®š =====
function optimizeCarrierSelection() {
    showAlert('warning', 'AIã«ã‚ˆã‚‹æœ€é©é…é€ä¼šç¤¾é¸æŠã‚’å®Ÿè¡Œä¸­...');
    
    setTimeout(() => {
        showAlert('success', 'å„ãƒ¢ãƒ¼ãƒ«ã«æœ€é©ãªé…é€ä¼šç¤¾ã®çµ„ã¿åˆã‚ã›ã‚’è‡ªå‹•é¸æŠã—ã¾ã—ãŸã€‚ã‚³ã‚¹ãƒˆãƒ»é€Ÿåº¦ãƒ»ä¿¡é ¼æ€§ã‚’ç·åˆçš„ã«åˆ¤å®šæ¸ˆã¿ã§ã™ã€‚');
        updateLastUpdateTime();
    }, 3000);
}

// ===== ãã®ä»–ã®æ—¢å­˜é–¢æ•°ã¯ãã®ã¾ã¾ =====
function getStatusIcon(status) {
    const icons = {
        'active': '<i class="fas fa-check-circle" style="color: var(--color-success); font-size: 10px;" title="ç¨¼åƒä¸­"></i>',
        'pending': '<i class="fas fa-clock" style="color: var(--color-warning); font-size: 10px;" title="è¨­å®šä¸­"></i>',
        'inactive': '<i class="fas fa-times-circle" style="color: var(--text-secondary); font-size: 10px;" title="æœªè¨­å®š"></i>'
    };
    return icons[status] || '';
}

function refreshCarrierList() {
    showAlert('warning', 'é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ä¸­...');
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            generateCarrierListCheckbox(marketplace);
            updateCarrierCounts(marketplace);
        });
        showAlert('success', '18ç¤¾ã®é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚');
        updateLastUpdateTime();
    }, 2000);
}

function saveMarketplaceSettings() {
    showAlert('warning', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€è¨­å®šã‚’ä¿å­˜ä¸­...');
    setTimeout(() => {
        showAlert('success', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šï¼ˆè¤‡æ•°é¸æŠï¼‰ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚é¸æŠã•ã‚ŒãŸé…é€ä¼šç¤¾ã‹ã‚‰æœ€é©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•é¸æŠã•ã‚Œã¾ã™ã€‚');
        updateLastUpdateTime();
    }, 1500);
}

function exportCarrierSettings() {
    const settings = {
        carriers: registeredCarriers,
        marketplaceSettings: marketplaceSettings,
        defaults: marketplaceDefaults,
        exportDate: new Date().toISOString(),
        selectionType: 'multiple'
    };
    
    const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'shipping-settings-multiple-export.json';
    a.click();
    URL.revokeObjectURL(url);
    
    showAlert('success', 'è¤‡æ•°é¸æŠå¯¾å¿œã®é…é€è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚');
}

// ===== åˆæœŸåŒ–å®Ÿè¡Œ =====
document.addEventListener('DOMContentLoaded', function() {
    initializeMarketplaceShipping();
});
</script>
<script>
// ===== ç™»éŒ²æ¸ˆã¿é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆ18ç¤¾ï¼‰- å¤‰æ›´ãªã— =====
const registeredCarriers = [
    // FedExé–¢é€£
    { id: 'fedex-normal', name: 'FedExï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-plane', status: 'active', apiEnabled: true },
    { id: 'cpass-fedex', name: 'CPA SS + FedEx', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: false },
    { id: 'eloji-fedex', name: 'Eloji + FedEx', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // DHLé–¢é€£
    { id: 'dhl-normal', name: 'DHLï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: true },
    { id: 'cpass-dhl', name: 'CPA SS + DHL', icon: 'fas fa-shipping-fast', status: 'pending', apiEnabled: false },
    { id: 'eloji-dhl', name: 'Eloji + DHL', icon: 'fas fa-box', status: 'active', apiEnabled: false },
    
    // UPSé–¢é€£
    { id: 'ups-normal', name: 'UPSï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-truck', status: 'pending', apiEnabled: true },
    { id: 'eloji-ups', name: 'Eloji + UPS', icon: 'fas fa-box', status: 'pending', apiEnabled: false },
    
    // æ—¥æœ¬éƒµä¾¿é–¢é€£
    { id: 'jppost-ems', name: 'æ—¥æœ¬éƒµä¾¿ EMS', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: true },
    { id: 'jppost-small', name: 'æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    { id: 'jppost-registered', name: 'æ—¥æœ¬éƒµä¾¿ æ›¸ç•™', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
    
    // eBayé–¢é€£
    { id: 'cpass-ebay', name: 'CPA SS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'active', apiEnabled: false },
    { id: 'eloji-ebay', name: 'Eloji + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'pending', apiEnabled: false },
    
    // USPSé–¢é€£
    { id: 'usps-priority', name: 'USPS Priority Mail', icon: 'fas fa-envelope', status: 'pending', apiEnabled: true },
    { id: 'usps-express', name: 'USPS Priority Express', icon: 'fas fa-envelope', status: 'inactive', apiEnabled: false },
    
    // ãã®ä»–
    { id: 'tnt-express', name: 'TNT Express', icon: 'fas fa-shipping-fast', status: 'inactive', apiEnabled: false },
    { id: 'aramex', name: 'Aramex', icon: 'fas fa-globe', status: 'inactive', apiEnabled: false },
    { id: 'shopee-logistics', name: 'Shopee Logistics', icon: 'fas fa-shopping-cart', status: 'pending', apiEnabled: false }
];

// ãƒ¢ãƒ¼ãƒ«åˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰
const marketplaceDefaults = {
    'shopify': ['fedex-normal', 'dhl-normal', 'ups-normal', 'jppost-ems'],
    'ebay': ['cpass-ebay', 'fedex-normal', 'dhl-normal', 'jppost-small'],
    'amazon': ['fedex-normal', 'dhl-normal', 'jppost-ems'],
    'etsy': ['jppost-ems', 'jppost-small', 'fedex-normal'],
    'mercari': ['jppost-ems', 'jppost-small'],
    'yahoo': ['jppost-ems', 'fedex-normal'],
    'shopee': ['shopee-logistics', 'dhl-normal', 'fedex-normal'],
    'rakuten-global': ['jppost-ems', 'fedex-normal', 'dhl-normal']
};

let marketplaceSettings = {};

// ===== åˆæœŸåŒ–ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ =====
function initializeMarketplaceShipping() {
    Object.keys(marketplaceDefaults).forEach(marketplace => {
        generateCarrierListCheckbox(marketplace);
        updateCarrierCounts(marketplace);
    });
}

// ===== é…é€ä¼šç¤¾ãƒªã‚¹ãƒˆç”Ÿæˆï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆï¼‰ =====
function generateCarrierListCheckbox(marketplace) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;

    const enabledCarriers = marketplaceDefaults[marketplace] || [];
    
    container.innerHTML = registeredCarriers.map(carrier => {
        const isChecked = enabledCarriers.includes(carrier.id);
        const statusIcon = getStatusIcon(carrier.status);
        const apiIndicator = carrier.apiEnabled ? '<i class="fas fa-wifi" style="color: var(--color-success); font-size: 10px;" title="APIå¯¾å¿œ"></i>' : '';
        
        return `
            <div class="shipping__method-item-checkbox" data-carrier-id="${carrier.id}">
                <label class="shipping__checkbox-container">
                    <input type="checkbox" class="shipping__checkbox" 
                           ${isChecked ? 'checked' : ''} 
                           onchange="toggleCarrierSelection('${marketplace}', '${carrier.id}', this.checked)">
                    <span class="shipping__checkmark"></span>
                    <div class="shipping__carrier-info">
                        <span class="shipping__carrier-details">
                            <i class="${carrier.icon}" style="color: var(--color-primary);"></i>
                            <span class="shipping__carrier-name">${carrier.name}</span>
                            ${statusIcon}
                            ${apiIndicator}
                        </span>
                    </div>
                </label>
            </div>
        `;
    }).join('');
}

// ===== é…é€ä¼šç¤¾é¸æŠãƒˆã‚°ãƒ«ï¼ˆè¤‡æ•°é¸æŠç‰ˆï¼‰ =====
function toggleCarrierSelection(marketplace, carrierId, isChecked) {
    if (!marketplaceSettings[marketplace]) {
        marketplaceSettings[marketplace] = [];
    }
    
    if (isChecked) {
        if (!marketplaceSettings[marketplace].includes(carrierId)) {
            marketplaceSettings[marketplace].push(carrierId);
        }
    } else {
        marketplaceSettings[marketplace] = marketplaceSettings[marketplace].filter(id => id !== carrierId);
    }
    
    updateCarrierCounts(marketplace);
    
    const carrierName = registeredCarriers.find(c => c.id === carrierId)?.name;
    showAlert('info', `${marketplace}ã§${carrierName}ã‚’${isChecked ? 'é¸æŠ' : 'é¸æŠè§£é™¤'}ã—ã¾ã—ãŸã€‚`);
}

// ===== å…¨é¸æŠãƒ»å…¨è§£é™¤ =====
function selectAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (!checkbox.checked) {
            checkbox.checked = true;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, true);
        }
    });
    showAlert('success', `${marketplace}ã®å…¨é…é€ä¼šç¤¾ã‚’é¸æŠã—ã¾ã—ãŸã€‚`);
}

function clearAllCarriers(marketplace) {
    const checkboxes = document.querySelectorAll(`#${marketplace}-carrier-list .shipping__checkbox`);
    checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
            checkbox.checked = false;
            const carrierId = checkbox.closest('.shipping__method-item-checkbox').dataset.carrierId;
            toggleCarrierSelection(marketplace, carrierId, false);
        }
    });
    showAlert('warning', `${marketplace}ã®å…¨é…é€ä¼šç¤¾é¸æŠã‚’è§£é™¤ã—ã¾ã—ãŸã€‚`);
}

// ===== é…é€ä¼šç¤¾æ•°æ›´æ–°ï¼ˆé¸æŠæ¸ˆã¿è¡¨ç¤ºï¼‰ =====
function updateCarrierCounts(marketplace) {
    const selectedElement = document.getElementById(`${marketplace}-selected-count`);
    const totalElement = document.getElementById(`${marketplace}-total-count`);
    
    if (!selectedElement || !totalElement) return;
    
    const container = document.getElementById(`${marketplace}-carrier-list`);
    const checkedBoxes = container?.querySelectorAll('.shipping__checkbox:checked').length || 0;
    
    selectedElement.textContent = checkedBoxes;
    totalElement.textContent = registeredCarriers.length;
}

// ===== é…é€ä¼šç¤¾ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç‰ˆå¯¾å¿œï¼‰ =====
function filterCarriers(marketplace, searchTerm) {
    const container = document.getElementById(`${marketplace}-carrier-list`);
    if (!container) return;
    
    const items = container.querySelectorAll('.shipping__method-item-checkbox');
    const term = searchTerm.toLowerCase();
    
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        const shouldShow = !term || text.includes(term);
        item.style.display = shouldShow ? 'block' : 'none';
    });
}

// ===== ä¸€æ‹¬é¸æŠæ©Ÿèƒ½ =====
function bulkSelectCarriers() {
    showAlert('info', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠä¸­...');
    
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            selectAllCarriers(marketplace);
        });
        showAlert('success', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®æ¨å¥¨é…é€ä¼šç¤¾ã‚’ä¸€æ‹¬é¸æŠã—ã¾ã—ãŸã€‚');
    }, 1500);
}

// ===== æœ€é©åŒ–æ¨å¥¨è¨­å®š =====
function optimizeCarrierSelection() {
    showAlert('warning', 'AIã«ã‚ˆã‚‹æœ€é©é…é€ä¼šç¤¾é¸æŠã‚’å®Ÿè¡Œä¸­...');
    
    setTimeout(() => {
        showAlert('success', 'å„ãƒ¢ãƒ¼ãƒ«ã«æœ€é©ãªé…é€ä¼šç¤¾ã®çµ„ã¿åˆã‚ã›ã‚’è‡ªå‹•é¸æŠã—ã¾ã—ãŸã€‚ã‚³ã‚¹ãƒˆãƒ»é€Ÿåº¦ãƒ»ä¿¡é ¼æ€§ã‚’ç·åˆçš„ã«åˆ¤å®šæ¸ˆã¿ã§ã™ã€‚');
        updateLastUpdateTime();
    }, 3000);
}

// ===== ãã®ä»–ã®æ—¢å­˜é–¢æ•°ã¯ãã®ã¾ã¾ =====
function getStatusIcon(status) {
    const icons = {
        'active': '<i class="fas fa-check-circle" style="color: var(--color-success); font-size: 10px;" title="ç¨¼åƒä¸­"></i>',
        'pending': '<i class="fas fa-clock" style="color: var(--color-warning); font-size: 10px;" title="è¨­å®šä¸­"></i>',
        'inactive': '<i class="fas fa-times-circle" style="color: var(--text-secondary); font-size: 10px;" title="æœªè¨­å®š"></i>'
    };
    return icons[status] || '';
}

function refreshCarrierList() {
    showAlert('warning', 'é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ä¸­...');
    setTimeout(() => {
        Object.keys(marketplaceDefaults).forEach(marketplace => {
            generateCarrierListCheckbox(marketplace);
            updateCarrierCounts(marketplace);
        });
        showAlert('success', '18ç¤¾ã®é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚');
        updateLastUpdateTime();
    }, 2000);
}

function saveMarketplaceSettings() {
    showAlert('warning', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€è¨­å®šã‚’ä¿å­˜ä¸­...');
    setTimeout(() => {
        showAlert('success', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šï¼ˆè¤‡æ•°é¸æŠï¼‰ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚é¸æŠã•ã‚ŒãŸé…é€ä¼šç¤¾ã‹ã‚‰æœ€é©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•é¸æŠã•ã‚Œã¾ã™ã€‚');
        updateLastUpdateTime();
    }, 1500);
}

function exportCarrierSettings() {
    const settings = {
        carriers: registeredCarriers,
        marketplaceSettings: marketplaceSettings,
        defaults: marketplaceDefaults,
        exportDate: new Date().toISOString(),
        selectionType: 'multiple'
    };
    
    const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'shipping-settings-multiple-export.json';
    a.click();
    URL.revokeObjectURL(url);
    
    showAlert('success', 'è¤‡æ•°é¸æŠå¯¾å¿œã®é…é€è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚');
}

// ===== åˆæœŸåŒ–å®Ÿè¡Œ =====
document.addEventListener('DOMContentLoaded', function() {
    initializeMarketplaceShipping();
});
</script>
                    <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ»åˆ†å²æ¡ä»¶ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ‹¡å¼µç‰ˆï¼‰ -->
        <section class="shipping__section" id="categories">
            <div class="shipping__section-header">
                <div>
                    <h2 class="shipping__section-title">
                        <i class="fas fa-code-branch"></i>
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ»åˆ†å²æ¡ä»¶ç®¡ç†ï¼ˆæ‹¡å¼µç‰ˆï¼‰
                    </h2>
                    <p class="shipping__section-subtitle">
                        å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç†ã¨ã‚¨ã‚³ãƒãƒŸãƒ¼ãƒ»ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰è‡ªå‹•é¸æŠæ¡ä»¶è¨­å®šãƒ»åˆ†å²æ¡ä»¶ä½œæˆæ©Ÿèƒ½
                    </p>
                </div>
                <div class="shipping__section-actions">
                    <button class="btn btn--secondary" onclick="openAddCategoryModal()">
                        <i class="fas fa-tags"></i>
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼è¿½åŠ 
                    </button>
                    <button class="btn btn--primary" onclick="openAddConditionModal()">
                        <i class="fas fa-plus"></i>
                        æ¡ä»¶è¿½åŠ 
                    </button>
                    <button class="btn btn--success" onclick="openRegionalRatesModal()">
                        <i class="fas fa-table"></i>
                        åœ°åŸŸåˆ¥æ–™é‡‘è¡¨
                    </button>
                </div>
            </div>

            <!-- æ¨ªä¸¦ã³ã‚«ãƒ¼ãƒ‰ -->
            <div class="shipping__grid">
                <!-- å·¦ï¼šç™»éŒ²æ¸ˆã¿ã‚«ãƒ†ã‚´ãƒªãƒ¼ -->
                <div class="shipping__card">
                    <div class="shipping__card-header">
                        <div class="shipping__card-icon shipping__card-icon--condition">
                            <i class="fas fa-tags"></i>
                        </div>
                        <h3>ç™»éŒ²æ¸ˆã¿ã‚«ãƒ†ã‚´ãƒªãƒ¼</h3>
                        <span class="shipping__status-badge shipping__status-badge--active">12ä»¶</span>
                    </div>
                    <div class="shipping__card-body">
                        <div class="shipping__category-scroll-list">
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Electronics</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Electronics')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Electronics')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">å£Šã‚Œç‰©</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('å£Šã‚Œç‰©')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('å£Šã‚Œç‰©')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Clothing</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Clothing')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Clothing')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Books</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Books')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Books')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Jewelry</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Jewelry')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Jewelry')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Sports & Outdoors</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Sports & Outdoors')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Sports & Outdoors')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Home & Garden</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Home & Garden')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Home & Garden')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Beauty & Health</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Beauty & Health')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Beauty & Health')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Automotive</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Automotive')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Automotive')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Musical Instruments</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Musical Instruments')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Musical Instruments')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Baby & Kids</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Baby & Kids')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Baby & Kids')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="shipping__category-scroll-item">
                                <span class="shipping__category-name">Pet Supplies</span>
                                <div class="shipping__category-actions">
                                    <button class="btn btn--small btn--warning" onclick="editCategory('Pet Supplies')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn--small btn--danger" onclick="deleteCategory('Pet Supplies')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: var(--space-md); font-size: var(--text-xs); color: var(--text-secondary);">
                            æ³¨æ„: åˆ†å²æ¡ä»¶ã§ä½¿ç”¨ä¸­ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã¯å‰Šé™¤ã§ãã¾ã›ã‚“ã€‚Shopifyã¨çµ±ä¸€ã—ãŸã‚«ãƒ†ã‚´ãƒªãƒ¼åã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                        </div>
                    </div>
                </div>

                <!-- å³ï¼šåˆ†å²æ¡ä»¶ãƒªã‚¹ãƒˆï¼ˆä½œæˆæ©Ÿèƒ½ä»˜ãï¼‰ -->
                <div class="shipping__card">
                    <div class="shipping__card-header">
                        <div class="shipping__card-icon shipping__card-icon--condition">
                            <i class="fas fa-list-ol"></i>
                        </div>
                        <h3>åˆ†å²æ¡ä»¶ãƒªã‚¹ãƒˆ</h3>
                        <span class="shipping__status-badge shipping__status-badge--active">4æ¡ä»¶</span>
                    </div>
                    <div class="shipping__card-body">
                        <!-- åˆ†å²æ¡ä»¶è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
                        <div class="shipping__condition-form" id="conditionForm">
                            <h4 style="margin: 0 0 var(--space-md) 0; color: var(--color-primary);">
                                <i class="fas fa-plus"></i>
                                æ–°ã—ã„åˆ†å²æ¡ä»¶ã‚’ä½œæˆ
                            </h4>
                            <div class="shipping__condition-form-row">
                                <div class="shipping__form-group" style="margin-bottom: 0;">
                                    <label class="shipping__form-label">æ¡ä»¶ã‚¿ã‚¤ãƒ—</label>
                                    <select class="shipping__form-select" id="newConditionType" onchange="updateConditionFields()">
                                        <option value="category">ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>
                                        <option value="price">ä¾¡æ ¼</option>
                                        <option value="weight">é‡é‡</option>
                                        <option value="dimension">å¯¸æ³•</option>
                                        <option value="destination">é…é€å…ˆ</option>
                                        <option value="text">ãƒ†ã‚­ã‚¹ãƒˆå«ã‚€</option>
                                    </select>
                                </div>
                                <span style="align-self: center; color: var(--text-secondary);">ãŒ</span>
                                <div class="shipping__form-group" style="margin-bottom: 0;" id="conditionOperatorGroup">
                                    <label class="shipping__form-label">æ¼”ç®—å­</label>
                                    <select class="shipping__form-select" id="newConditionOperator">
                                        <option value="equals">ç­‰ã—ã„</option>
                                        <option value="contains">å«ã‚€</option>
                                        <option value="greater">ã‚ˆã‚Šå¤§ãã„</option>
                                        <option value="less">ã‚ˆã‚Šå°ã•ã„</option>
                                    </select>
                                </div>
                                <span style="align-self: center; color: var(--text-secondary);">ã®å ´åˆ</span>
                                <div class="shipping__form-group" style="margin-bottom: 0;">
                                    <label class="shipping__form-label">é…é€æ–¹æ³•</label>
                                    <select class="shipping__form-select" id="newConditionResult">
                                        <option value="economy">ã‚¨ã‚³ãƒãƒŸãƒ¼</option>
                                        <option value="expedited">ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</option>
                                    </select>
                                </div>
                                <button class="btn btn--success" onclick="addNewCondition()" style="align-self: end;">
                                    <i class="fas fa-plus"></i>
                                    è¿½åŠ 
                                </button>
                            </div>
                            <div class="shipping__form-group" id="conditionValueGroup">
                                <label class="shipping__form-label">æ¡ä»¶å€¤</label>
                                <input type="text" class="shipping__form-input" id="newConditionValue" placeholder="æ¡ä»¶å€¤ã‚’å…¥åŠ›">
                            </div>
                        </div>

                        <!-- æ—¢å­˜ã®æ¡ä»¶ãƒªã‚¹ãƒˆ -->
                        <div style="space-y: var(--space-xs);" id="conditionsList">
                            <!-- æ¡ä»¶1 -->
                            <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-md); margin-bottom: var(--space-xs);">
                                <span style="background: var(--color-primary); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--text-xs); font-weight: 600; min-width: 24px; text-align: center;">1</span>
                                <span style="flex: 1; font-size: var(--text-sm);">ã‚«ãƒ†ã‚´ãƒªã€Œå£Šã‚Œç‰©ã€ã‚’å«ã‚€ â†’ <strong style="color: var(--color-warning);">ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</strong></span>
                                <button class="btn btn--small btn--warning" onclick="editCondition(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn--small btn--danger" onclick="removeCondition(1)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            
                            <!-- æ¡ä»¶2 -->
                            <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-md); margin-bottom: var(--space-xs);">
                                <span style="background: var(--color-primary); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--text-xs); font-weight: 600; min-width: 24px; text-align: center;">2</span>
                                <span style="flex: 1; font-size: var(--text-sm);">å•†å“ä¾¡æ ¼ > $200 â†’ <strong style="color: var(--color-warning);">ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</strong></span>
                                <button class="btn btn--small btn--warning" onclick="editCondition(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn--small btn--danger" onclick="removeCondition(2)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            
                            <!-- æ¡ä»¶3 -->
                            <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-md); margin-bottom: var(--space-xs);">
                                <span style="background: var(--color-primary); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--text-xs); font-weight: 600; min-width: 24px; text-align: center;">3</span>
                                <span style="flex: 1; font-size: var(--text-sm);">é‡é‡ > 2000g â†’ <strong style="color: var(--color-warning);">ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</strong></span>
                                <button class="btn btn--small btn--warning" onclick="editCondition(3)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn--small btn--danger" onclick="removeCondition(3)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            
                            <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¡ä»¶ -->
                            <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-md);">
                                <span style="background: var(--color-info); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--text-xs); font-weight: 600; min-width: 24px; text-align: center;">4</span>
                                <span style="flex: 1; font-size: var(--text-sm);">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ â†’ <strong style="color: var(--color-info);">ã‚¨ã‚³ãƒãƒŸãƒ¼</strong></span>
                                <button class="btn btn--small btn--secondary" onclick="editCondition(4)" disabled>
                                    <i class="fas fa-lock"></i>
                                    å›ºå®š
                                </button>
                            </div>
                        </div>
                        
                        <div style="margin-top: var(--space-md); display: flex; gap: var(--space-sm); flex-wrap: wrap;">
                            <button class="btn btn--primary" onclick="toggleConditionForm()">
                                <i class="fas fa-plus"></i>
                                æ¡ä»¶è¿½åŠ 
                            </button>
                            <button class="btn btn--success" onclick="saveConditions()">
                                <i class="fas fa-save"></i>
                                è¨­å®šã‚’ä¿å­˜
                            </button>
                            <button class="btn btn--warning" onclick="testConditions()">
                                <i class="fas fa-play"></i>
                                æ¡ä»¶ãƒ†ã‚¹ãƒˆ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- é‡é‡ãƒ»ã‚µã‚¤ã‚ºè£œæ­£è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="shipping__section" id="correction-settings">
            <div class="shipping__section-header">
                <div>
                    <h2 class="shipping__section-title">
                        <i class="fas fa-balance-scale"></i>
                        é‡é‡ãƒ»ã‚µã‚¤ã‚ºè£œæ­£è¨­å®š
                    </h2>
                    <p class="shipping__section-subtitle">
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã®é‡é‡ãƒ»å¯¸æ³•è£œæ­£å€¤è¨­å®šãƒ»å®¹ç©é‡é‡è¨ˆç®—ä¿‚æ•°ãƒ»æ¢±åŒ…æé‡é‡ç®¡ç†
                    </p>
                </div>
                <div class="shipping__section-actions">
                    <button class="btn btn--secondary" onclick="resetCorrectionDefaults()">
                        <i class="fas fa-undo"></i>
                        ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
                    </button>
                    <button class="btn btn--success" onclick="saveCorrectionSettings()">
                        <i class="fas fa-save"></i>
                        è¨­å®šä¿å­˜
                    </button>
                </div>
            </div>

            <div class="shipping__grid">
                <!-- é‡é‡è£œæ­£è¨­å®š -->
                <div class="shipping__card">
                    <div class="shipping__card-header">
                        <div class="shipping__card-icon shipping__card-icon--region">
                            <i class="fas fa-weight"></i>
                        </div>
                        <h3>é‡é‡è£œæ­£è¨­å®š</h3>
                    </div>
                    <div class="shipping__card-body">
                        <div class="shipping__form-group">
                            <label class="shipping__form-label">åŸºæœ¬æ¢±åŒ…æé‡é‡ (g)</label>
                            <input type="number" class="shipping__form-input" id="basePackagingWeight" value="150" min="0" max="1000">
                            <div style="font-size: var(--text-xs); color: var(--text-secondary); margin-top: var(--space-xs);">
                                å…¨å•†å“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬æ¢±åŒ…æé‡é‡
                            </div>
                        </div>

                        <div class="shipping__form-group">
                            <label class="shipping__form-label">ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è¿½åŠ é‡é‡</label>
                            <div style="display: flex; flex-direction: column; gap: var(--space-sm);">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>å£Šã‚Œç‰©</span>
                                    <input type="number" value="200" min="0" max="500" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Electronics</span>
                                    <input type="number" value="100" min="0" max="500" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Clothing</span>
                                    <input type="number" value="50" min="0" max="500" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Books</span>
                                    <input type="number" value="80" min="0" max="500" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Jewelry</span>
                                    <input type="number" value="30" min="0" max="500" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                            </div>
                        </div>

                        <div class="shipping__form-group">
                            <label class="shipping__form-label">å®¹ç©é‡é‡ä¿‚æ•°</label>
                            <input type="number" class="shipping__form-input" id="volumetricDivisor" value="5000" min="3000" max="8000">
                            <div style="font-size: var(--text-xs); color: var(--text-secondary); margin-top: var(--space-xs);">
                                cmÂ³ Ã· ã“ã®æ•°å€¤ = å®¹ç©é‡é‡(g)
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ã‚µã‚¤ã‚ºè£œæ­£è¨­å®š -->
                <div class="shipping__card">
                    <div class="shipping__card-header">
                        <div class="shipping__card-icon shipping__card-icon--region">
                            <i class="fas fa-cube"></i>
                        </div>
                        <h3>ã‚µã‚¤ã‚ºè£œæ­£è¨­å®š</h3>
                    </div>
                    <div class="shipping__card-body">
                        <div class="shipping__form-group">
                            <label class="shipping__form-label">åŸºæœ¬ã‚µã‚¤ã‚ºè£œæ­£ (cm)</label>
                            <input type="number" class="shipping__form-input" id="baseSizeCorrection" value="2" min="0" max="10" step="0.5">
                            <div style="font-size: var(--text-xs); color: var(--text-secondary); margin-top: var(--space-xs);">
                                å…¨å•†å“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬ã‚µã‚¤ã‚ºè£œæ­£å€¤
                            </div>
                        </div>

                        <div class="shipping__form-group">
                            <label class="shipping__form-label">ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è¿½åŠ ã‚µã‚¤ã‚ºè£œæ­£</label>
                            <div style="display: flex; flex-direction: column; gap: var(--space-sm);">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>å£Šã‚Œç‰©</span>
                                    <input type="number" value="3" min="0" max="10" step="0.5" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Electronics</span>
                                    <input type="number" value="1.5" min="0" max="10" step="0.5" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-xs); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                    <span>Books</span>
                                    <input type="number" value="1" min="0" max="10" step="0.5" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                </div>
                            </div>
                        </div>

                        <div class="shipping__form-group">
                            <label class="shipping__form-label">æœ€å¤§å¯¸æ³•åˆ¶é™ (cm)</label>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-sm);">
                                <div>
                                    <label style="font-size: var(--text-xs); color: var(--text-secondary);">æœ€å¤§é•·</label>
                                    <input type="number" class="shipping__form-input" id="calcWidth" value="15" placeholder="å¹…" onchange="updateDimensionCorrection()">
                                    <div style="font-size: var(--text-xs); color: var(--text-muted); margin-top: var(--space-xs);">
                                        è£œæ­£å¾Œ: <span id="correctedWidth">17cm</span>
                                    </div>
                                </div>
                                <div>
                                    <input type="number" class="shipping__form-input" id="calcHeight" value="5" placeholder="é«˜ã•" onchange="updateDimensionCorrection()">
                                    <div style="font-size: var(--text-xs); color: var(--text-muted); margin-top: var(--space-xs);">
                                        è£œæ­£å¾Œ: <span id="correctedHeight">7cm</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="shipping__form-group">
                            <label class="shipping__form-label">å¯¾è±¡ãƒ¢ãƒ¼ãƒ«</label>
                            <select class="shipping__form-select" id="calcMarketplace">
                                <option value="shopify">Shopify</option>
                                <option value="ebay">eBay</option>
                                <option value="amazon">Amazon</option>
                                <option value="etsy">Etsy</option>
                                <option value="all">å…¨ãƒ¢ãƒ¼ãƒ«ä¸€æ‹¬è¨ˆç®—</option>
                            </select>
                        </div>

                        <button class="btn btn--primary btn--full" onclick="calculateShipping()">
                            <i class="fas fa-calculator"></i>
                            é€æ–™è¨ˆç®—å®Ÿè¡Œ
                        </button>
                    </div>
                </div>
            </div>
        </section>
    
    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼šã‚«ãƒ†ã‚´ãƒªãƒ¼è¿½åŠ  -->
    <section>
    <div class="modal-overlay" id="addCategoryModal">
        <div class="modal">
            <div class="modal__header">
                <h3 class="modal__title">ã‚«ãƒ†ã‚´ãƒªãƒ¼è¿½åŠ </h3>
                <button class="modal__close" onclick="closeModal('addCategoryModal')">&times;</button>
            </div>
            <div class="modal__body">
                <div class="shipping__form-group">
                    <label class="shipping__form-label">ã‚«ãƒ†ã‚´ãƒªãƒ¼å</label>
                    <input type="text" class="shipping__form-input" id="newCategoryName" placeholder="ä¾‹: Home & Garden">
                </div>
                
                <div class="shipping__form-group">
                    <label class="shipping__form-label">èª¬æ˜ï¼ˆä»»æ„ï¼‰</label>
                    <input type="text" class="shipping__form-input" id="newCategoryDescription" placeholder="ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®èª¬æ˜">
                </div>

                <div style="font-size: var(--text-sm); color: var(--text-secondary);">
                    <strong>æ³¨æ„:</strong> Shopifyã¨åŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼åã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--secondary" onclick="closeModal('addCategoryModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn btn--primary" onclick="addCategory()">è¿½åŠ </button>
            </div>
        </div>
    </div>
    </section>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼šåœ°åŸŸåˆ¥æ–™é‡‘è¡¨ -->
    <section>
    <div class="modal-overlay" id="regionalRatesModal">
        <div class="modal" style="max-width: 95%; max-height: 95vh;">
            <div class="modal__header">
                <h3 class="modal__title">åœ°åŸŸåˆ¥é€æ–™è¡¨ - é‡é‡ãƒ»ã‚µã‚¤ã‚ºéšç´šåˆ¥ï¼ˆå…¨18é…é€ä¼šç¤¾å¯¾å¿œï¼‰</h3>
                <button class="modal__close" onclick="closeModal('regionalRatesModal')">&times;</button>
            </div>
            <div class="modal__body" style="overflow-x: auto;">
                <div style="overflow-x: auto; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    <table class="rates-table" style="font-size: var(--text-sm); min-width: 1400px;">
                        <thead>
                            <tr>
                                <th rowspan="2" style="min-width: 200px;">é…é€åœ°åŸŸ / é…é€ä¼šç¤¾</th>
                                <th colspan="4" style="background: rgba(59, 130, 246, 0.1);">é‡é‡éšç´šåŸºæœ¬æ–™é‡‘ (USD)</th>
                                <th colspan="3" style="background: rgba(139, 92, 246, 0.1);">ã‚µã‚¤ã‚ºè¿½åŠ æ–™é‡‘ (USD)</th>
                                <th rowspan="2">é…é€æ—¥æ•°</th>
                                <th rowspan="2">ç‡ƒæ²¹ç‡(%)</th>
                            </tr>
                            <tr>
                                <th style="background: rgba(59, 130, 246, 0.1);">ï½500g</th>
                                <th style="background: rgba(59, 130, 246, 0.1);">501-1000g</th>
                                <th style="background: rgba(59, 130, 246, 0.1);">1001-2000g</th>
                                <th style="background: rgba(59, 130, 246, 0.1);">2001gï½</th>
                                <th style="background: rgba(139, 92, 246, 0.1);">ï½30cm</th>
                                <th style="background: rgba(139, 92, 246, 0.1);">31-50cm</th>
                                <th style="background: rgba(139, 92, 246, 0.1);">51cmï½</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†… -->
                            <tr class="zone-header">
                                <td colspan="10" style="font-weight: bold; background: rgba(16, 185, 129, 0.1);">
                                    <i class="fas fa-flag-usa"></i> Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†…ï¼ˆæœ¬åœŸ48å·ï¼‰
                                </td>
                            </tr>
                            <tr class="recommended">
                                <td class="carrier-name">
                                    <i class="fas fa-envelope" style="color: var(--color-primary);"></i>
                                    <strong>USPS Priority Mail</strong>
                                    <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æ¨å¥¨</span>
                                </td>
                                <td class="price-cell price-economy">$6.50</td>
                                <td class="price-cell price-economy">$8.50</td>
                                <td class="price-cell price-expedited">$11.50</td>
                                <td class="price-cell price-premium">$18.50</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$2</td>
                                <td class="price-cell">+$6</td>
                                <td class="delivery-days">2-3æ—¥</td>
                                <td class="fuel-rate">12%</td>
                            </tr>
                            <tr>
                                <td class="carrier-name">
                                    <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                    <strong>FedEx Ground</strong>
                                </td>
                                <td class="price-cell price-expedited">$8.50</td>
                                <td class="price-cell price-expedited">$10.50</td>
                                <td class="price-cell price-expedited">$13.50</td>
                                <td class="price-cell price-premium">$20.50</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$3</td>
                                <td class="price-cell">+$8</td>
                                <td class="delivery-days">3-7æ—¥</td>
                                <td class="fuel-rate">15%</td>
                            </tr>

                            <!-- Zone 5A: æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ« -->
                            <tr class="zone-header">
                                <td colspan="10" style="font-weight: bold; background: rgba(6, 182, 212, 0.1);">
                                    <i class="fas fa-flag"></i> Zone 5A: æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ« â­
                                </td>
                            </tr>
                            <tr class="recommended">
                                <td class="carrier-name">
                                    <i class="fas fa-mail-bulk" style="color: var(--color-success);"></i>
                                    <strong>æ—¥æœ¬éƒµä¾¿ EMS</strong>
                                    <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æœ€å®‰ãƒ»æœ€é€Ÿ</span>
                                </td>
                                <td class="price-cell price-economy">$19.20</td>
                                <td class="price-cell price-economy">$21.20</td>
                                <td class="price-cell price-expedited">$24.20</td>
                                <td class="price-cell price-premium">$31.20</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$3</td>
                                <td class="price-cell">+$8</td>
                                <td class="delivery-days">3-6æ—¥</td>
                                <td class="fuel-rate">12%</td>
                            </tr>
                            <tr>
                                <td class="carrier-name">
                                    <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                    <strong>FedEx International</strong>
                                </td>
                                <td class="price-cell price-expedited">$24.80</td>
                                <td class="price-cell price-expedited">$26.80</td>
                                <td class="price-cell price-expedited">$29.80</td>
                                <td class="price-cell price-premium">$36.80</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$4</td>
                                <td class="price-cell">+$10</td>
                                <td class="delivery-days">2-4æ—¥</td>
                                <td class="fuel-rate">15%</td>
                            </tr>
                            <tr>
                                <td class="carrier-name">
                                    <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                    <strong>DHL Express</strong>
                                </td>
                                <td class="price-cell price-premium">$28.90</td>
                                <td class="price-cell price-premium">$31.40</td>
                                <td class="price-cell price-premium">$35.90</td>
                                <td class="price-cell price-premium">$42.40</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$4</td>
                                <td class="price-cell">+$10</td>
                                <td class="delivery-days">1-3æ—¥</td>
                                <td class="fuel-rate">18%</td>
                            </tr>

                            <!-- Zone 4A: è¥¿æ¬§ -->
                            <tr class="zone-header">
                                <td colspan="10" style="font-weight: bold; background: rgba(139, 92, 246, 0.1);">
                                    <i class="fas fa-flag"></i> Zone 4A: è¥¿æ¬§ï¼ˆUKãƒ»ãƒ‰ã‚¤ãƒ„ãƒ»ãƒ•ãƒ©ãƒ³ã‚¹ç­‰ï¼‰
                                </td>
                            </tr>
                            <tr class="recommended">
                                <td class="carrier-name">
                                    <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                    <strong>FedEx International</strong>
                                    <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æ¬§å·æ¨å¥¨</span>
                                </td>
                                <td class="price-cell price-economy">$24.80</td>
                                <td class="price-cell price-economy">$26.80</td>
                                <td class="price-cell price-expedited">$29.80</td>
                                <td class="price-cell price-premium">$36.80</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$4</td>
                                <td class="price-cell">+$10</td>
                                <td class="delivery-days">2-4æ—¥</td>
                                <td class="fuel-rate">15%</td>
                            </tr>

                            <!-- Zone 7B: ã‚¢ãƒ•ãƒªã‚« -->
                            <tr class="zone-header">
                                <td colspan="10" style="font-weight: bold; background: rgba(245, 158, 11, 0.1);">
                                    <i class="fas fa-flag"></i> Zone 7B: ã‚¢ãƒ•ãƒªã‚«ï¼ˆé«˜ã‚³ã‚¹ãƒˆåœ°åŸŸï¼‰
                                </td>
                            </tr>
                            <tr class="recommended">
                                <td class="carrier-name">
                                    <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                    <strong>DHL Express</strong>
                                    <span style="margin-left: auto; background: var(--color-warning); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">ã‚¢ãƒ•ãƒªã‚«æ¨å¥¨</span>
                                </td>
                                <td class="price-cell price-premium">$42.30</td>
                                <td class="price-cell price-premium">$44.30</td>
                                <td class="price-cell price-premium">$47.30</td>
                                <td class="price-cell price-premium">$54.30</td>
                                <td class="price-cell">+$0</td>
                                <td class="price-cell">+$6</td>
                                <td class="price-cell">+$15</td>
                                <td class="delivery-days">3-7æ—¥</td>
                                <td class="fuel-rate">25%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- æ–™é‡‘è¨ˆç®—èª¬æ˜ -->
                <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--bg-primary); border-radius: var(--radius-lg); border-left: 4px solid var(--color-info);">
                    <h5 style="color: var(--color-info); margin-bottom: var(--space-md);">
                        <i class="fas fa-calculator"></i>
                        è‡ªå‹•è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãƒ»APIé€£æºä»•æ§˜
                    </h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-lg);">
                        <div>
                            <h6 style="color: var(--color-primary); margin-bottom: var(--space-sm);">åŸºæœ¬è¨ˆç®—å¼</h6>
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                                <code style="background: var(--bg-secondary); padding: var(--space-xs); border-radius: var(--radius-sm); display: block; margin: var(--space-xs) 0;">
                                    æœ€çµ‚é€æ–™ = åŸºæœ¬é€æ–™ + é‡é‡èª¿æ•´ + ã‚µã‚¤ã‚ºèª¿æ•´ + ä¾¡æ ¼èª¿æ•´ + ä¿é™ºæ–™ + ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸
                                </code>
                                <ul style="margin: var(--space-sm) 0; padding-left: var(--space-lg);">
                                    <li>é‡é‡éšç´š: å®Ÿé‡é‡ vs å®¹ç©é‡é‡ã®å¤§ãã„æ–¹</li>
                                    <li>ã‚µã‚¤ã‚ºéšç´š: æœ€å¤§å¯¸æ³•ã§åˆ¤å®š</li>
                                    <li>ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰: åŸºæœ¬æ–™é‡‘Ã—1.5å€</li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <h6 style="color: var(--color-warning); margin-bottom: var(--space-sm);">ä¾¡æ ¼èª¿æ•´ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h6>
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                                <ul style="margin: 0; padding-left: var(--space-lg);">
                                    <li>ä¾¡æ ¼èª¿æ•´: $50-200ï¼ˆ+$1ï¼‰ã€$200-500ï¼ˆ+$3ï¼‰ã€$500+ï¼ˆ+$5ï¼‰</li>
                                    <li>ä¿é™ºæ–™: å•†å“ä¾¡æ ¼Ã—1.5%ï¼ˆæœ€ä½$2.50ï¼‰</li>
                                    <li>ç½²åç¢ºèª: $3.50ï¼ˆ$200ä»¥ä¸Šã§è‡ªå‹•è¿½åŠ ï¼‰</li>
                                    <li>è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹: $1.20ï¼ˆåŸºæœ¬æ–™é‡‘ï¼‰</li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <h6 style="color: var(--color-success); margin-bottom: var(--space-sm);">APIé€£æºãƒ»è‡ªå‹•æ›´æ–°</h6>
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                                <ul style="margin: 0; padding-left: var(--space-lg);">
                                    <li>ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: APIæœˆæ¬¡è‡ªå‹•æ›´æ–°</li>
                                    <li>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ: æ—¥æ¬¡è‡ªå‹•æ›´æ–°</li>
                                    <li>é…é€ä¼šç¤¾API: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–™é‡‘å–å¾—</li>
                                    <li>æ–™é‡‘å±¥æ­´: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--secondary" onclick="printRateTable()">
                    <i class="fas fa-print"></i>
                    å°åˆ·
                </button>
                <button class="btn btn--warning" onclick="exportRateTable('csv')">
                    <i class="fas fa-file-csv"></i>
                    CSVå‡ºåŠ›
                </button>
                <button class="btn btn--success" onclick="updateRateTable()">
                    <i class="fas fa-sync"></i>
                    æ–™é‡‘æ›´æ–°
                </button>
                <button class="btn btn--primary" onclick="closeModal('regionalRatesModal')">
                    <i class="fas fa-times"></i>
                    é–‰ã˜ã‚‹
                </button>
            </div>
        </div>
    </div>
    </section>

    <!-- ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä¿®æ­£ç‰ˆï¼šAPIè‡ªå‹•å–å¾—ï¼‰ -->
    <section class="shipping__section" id="surcharge-settings">
        <div class="shipping__section-header">
            <div>
                <h2 class="shipping__section-title">
                    <i class="fas fa-fire"></i>
                    ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘ï¼ˆAPIè‡ªå‹•å–å¾—ï¼‰
                </h2>
                <p class="shipping__section-subtitle">
                    ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIè‡ªå‹•å–å¾—ãƒ»ä¿é™ºæ–™è¨­å®šãƒ»ç½²åç¢ºèªæ–™ãƒ»è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹æ–™é‡‘è¨­å®š
                </p>
            </div>
            <div class="shipping__section-actions">
                <button class="btn btn--warning" onclick="updateFuelSurcharge()">
                    <i class="fas fa-sync"></i>
                    ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸æ›´æ–°
                </button>
                <button class="btn btn--success" onclick="saveSurchargeSettings()">
                    <i class="fas fa-save"></i>
                    è¨­å®šä¿å­˜
                </button>
            </div>
        </div>

        <div class="shipping__grid">
            <!-- ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸è¨­å®šï¼ˆAPIè‡ªå‹•å–å¾—ãƒ»èª­ã¿å–ã‚Šå°‚ç”¨ï¼‰ -->
            <div class="shipping__card">
                <div class="shipping__card-header">
                    <div class="shipping__card-icon shipping__card-icon--marketplace">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3>ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ç‡ï¼ˆAPIè‡ªå‹•å–å¾—ï¼‰</h3>
                </div>
                <div class="shipping__card-body">
                    <div style="margin-bottom: var(--space-md); padding: var(--space-sm); background: rgba(16, 185, 129, 0.1); border-radius: var(--radius-md); border-left: 4px solid var(--color-success);">
                        <div style="font-size: var(--text-sm); font-weight: 600; color: var(--color-success);">
                            <i class="fas fa-check-circle"></i>
                            APIè‡ªå‹•å–å¾—å®Œäº†: 2024/06/29 08:00 (æ¬¡å›: 07/01 08:00)
                        </div>
                    </div>

                    <div class="shipping__form-group">
                        <label class="shipping__form-label">é…é€ä¼šç¤¾åˆ¥ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ç‡ï¼ˆAPIè‡ªå‹•å–å¾—ï¼‰</label>
                        <div style="display: flex; flex-direction: column; gap: var(--space-sm);">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span><strong>FedEx</strong> (å…¨åœ°åŸŸ)</span>
                                <div style="display: flex; align-items: center; gap: var(--space-sm); color: var(--color-primary); font-weight: 600;">
                                    <span>12.5%</span>
                                    <span style="font-size: var(--text-xs); color: var(--color-success);">âœ“ APIå–å¾—æ¸ˆ</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span><strong>DHL</strong> (å…¨åœ°åŸŸ)</span>
                                <div style="display: flex; align-items: center; gap: var(--space-sm); color: var(--color-primary); font-weight: 600;">
                                    <span>18.0%</span>
                                    <span style="font-size: var(--text-xs); color: var(--color-success);">âœ“ APIå–å¾—æ¸ˆ</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span><strong>UPS</strong> (å…¨åœ°åŸŸ)</span>
                                <div style="display: flex; align-items: center; gap: var(--space-sm); color: var(--color-primary); font-weight: 600;">
                                    <span>15.2%</span>
                                    <span style="font-size: var(--text-xs); color: var(--color-success);">âœ“ APIå–å¾—æ¸ˆ</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span><strong>æ—¥æœ¬éƒµä¾¿</strong> (å…¨åœ°åŸŸ)</span>
                                <div style="display: flex; align-items: center; gap: var(--space-sm); color: var(--color-primary); font-weight: 600;">
                                    <span>5.8%</span>
                                    <span style="font-size: var(--text-xs); color: var(--color-success);">âœ“ APIå–å¾—æ¸ˆ</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm); background: var(--bg-tertiary); border-radius: var(--radius-sm);">
                                <span><strong>USPS</strong> (Zone 1-2)</span>
                                <div style="display: flex; align-items: center; gap: var(--space-sm); color: var(--color-primary); font-weight: 600;">
                                    <span>8.5%</span>
                                    <span style="font-size: var(--text-xs); color: var(--color-success);">âœ“ APIå–å¾—æ¸ˆ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: var(--space-lg); padding: var(--space-sm); background: rgba(6, 182, 212, 0.1); border-radius: var(--radius-md); border-left: 4px solid var(--color-info);">
                        <div style="font-size: var(--text-sm); color: var(--color-info);">
                            <i class="fas fa-info-circle"></i>
                            <strong>è‡ªå‹•æ›´æ–°ä»•æ§˜:</strong> å„é…é€ä¼šç¤¾APIã‹ã‚‰æœˆæ¬¡è‡ªå‹•å–å¾—ã€‚CPASSãƒ»Elojiã¯å‰²å¼•æ–™é‡‘ã«ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸å«ã‚€ã€‚
                        </div>
                    </div>
                </div>
            </div>

            <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘è¨­å®š -->
            <div class="shipping__card">
                <div class="shipping__card-header">
                    <div class="shipping__card-icon shipping__card-icon--marketplace">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘è¨­å®š</h3>
                </div>
                <div class="shipping__card-body">
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">ä¿é™ºæ–™è¨­å®š</label>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center; margin-bottom: var(--space-sm);">
                            <label style="font-size: var(--text-sm);">ä¿é™ºæ–™ç‡</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <input type="number" value="1.5" min="0" max="10" step="0.1" style="width: 60px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                <span style="font-size: var(--text-sm);">%</span>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center; margin-bottom: var(--space-sm);">
                            <label style="font-size: var(--text-sm);">æœ€ä½ä¿é™ºæ–™</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <span style="font-size: var(--text-sm);">$</span>
                                <input type="number" value="2.50" min="0" max="50" step="0.50" style="width: 60px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center;">
                            <label style="font-size: var(--text-sm);">è‡ªå‹•é©ç”¨ä¾¡æ ¼</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <span style="font-size: var(--text-sm);">$</span>
                                <input type="number" value="100" min="0" max="1000" step="10" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                <span style="font-size: var(--text-xs); color: var(--text-secondary);">ä»¥ä¸Š</span>
                            </div>
                        </div>
                    </div>

                    <div class="shipping__form-group">
                        <label class="shipping__form-label">ç½²åç¢ºèªæ–™é‡‘</label>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center; margin-bottom: var(--space-sm);">
                            <label style="font-size: var(--text-sm);">ç½²åç¢ºèªæ–™</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <span style="font-size: var(--text-sm);">$</span>
                                <input type="number" value="3.50" min="0" max="20" step="0.50" style="width: 60px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center;">
                            <label style="font-size: var(--text-sm);">è‡ªå‹•é©ç”¨ä¾¡æ ¼</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <span style="font-size: var(--text-sm);">$</span>
                                <input type="number" value="200" min="0" max="1000" step="10" style="width: 80px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                                <span style="font-size: var(--text-xs); color: var(--text-secondary);">ä»¥ä¸Š</span>
                            </div>
                        </div>
                    </div>

                    <div class="shipping__form-group">
                        <label class="shipping__form-label">è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹æ–™é‡‘</label>
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-sm); align-items: center;">
                            <label style="font-size: var(--text-sm);">åŸºæœ¬è¿½è·¡æ–™</label>
                            <div style="display: flex; align-items: center; gap: var(--space-xs);">
                                <span style="font-size: var(--text-sm);">$</span>
                                <input type="number" value="1.20" min="0" max="10" step="0.10" style="width: 60px; padding: var(--space-xs); border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é€æ–™è¨ˆç®—ãƒ†ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="shipping__section" id="calculator">
        <div class="shipping__section-header">
            <div>
                <h2 class="shipping__section-title">
                    <i class="fas fa-calculator"></i>
                    é€æ–™è¨ˆç®—ãƒ†ã‚¹ãƒˆ
                </h2>
                <p class="shipping__section-subtitle">
                    ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€æ–™è¨ˆç®—ãƒ»é…é€ä¼šç¤¾æ¯”è¼ƒãƒ»ãƒ¢ãƒ¼ãƒ«åˆ¥æœ€é©è¨­å®šç¢ºèª
                </p>
            </div>
        </div>

        <div class="shipping__grid" style="grid-template-columns: 1fr 1fr;">
            <div class="shipping__card">
                <div class="shipping__card-header">
                    <div class="shipping__card-icon shipping__card-icon--condition">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3>è¨ˆç®—æ¡ä»¶å…¥åŠ›</h3>
                </div>
                <div class="shipping__card-body">
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">å•†å“é‡é‡ (g) - è‡ªå‹•è£œæ­£ä»˜ã</label>
                        <input type="number" class="shipping__form-input" id="calcWeight" value="500" min="0" onchange="updateWeightCorrection()">
                        <div style="display: flex; justify-content: space-between; margin-top: var(--space-sm); font-size: var(--text-sm);">
                            <span>å®Ÿæ¸¬é‡é‡:</span>
                            <span id="actualWeight">500g</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                            <span>æ¢±åŒ…æè¾¼ã¿:</span>
                            <span id="packagedWeight">650g</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                            <span>å®¹ç©é‡é‡:</span>
                            <span id="volumetricWeight">524g</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: var(--text-sm);">
                            <span style="color: var(--color-primary); font-weight: 600;">èª²é‡‘å¯¾è±¡é‡é‡:</span>
                            <span id="billingWeight" style="color: var(--color-primary); font-weight: 600;">650g</span>
                        </div>
                    </div>
                    
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">å•†å“ä¾¡æ ¼ ($)</label>
                        <input type="number" class="shipping__form-input" id="calcPrice" value="100" min="0">
                    </div>
                    
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">é…é€å…ˆåœ°åŸŸï¼ˆZoneåˆ¥ï¼‰</label>
                        <select class="shipping__form-select" id="calcDestination">
                            <option value="zone1">Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†…ï¼ˆæœ¬åœŸ48å·ï¼‰</option>
                            <option value="zone1-hi-ak">Zone 1B: ãƒãƒ¯ã‚¤ãƒ»ã‚¢ãƒ©ã‚¹ã‚«</option>
                            <option value="zone2">Zone 2: ã‚«ãƒŠãƒ€</option>
                            <option value="zone3a">Zone 3A: ãƒ¡ã‚­ã‚·ã‚³ãƒ»ä¸­å¤®ã‚¢ãƒ¡ãƒªã‚«</option>
                            <option value="zone3b">Zone 3B: å—ç±³</option>
                            <option value="zone4a">Zone 4A: è¥¿æ¬§ï¼ˆUKãƒ»ãƒ‰ã‚¤ãƒ„ãƒ»ãƒ•ãƒ©ãƒ³ã‚¹ç­‰ï¼‰</option>
                            <option value="zone4b">Zone 4B: æ±æ¬§ãƒ»ãƒ­ã‚·ã‚¢</option>
                            <option value="zone5a" selected>Zone 5A: æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«</option>
                            <option value="zone5b">Zone 5B: ä¸­å›½ãƒ»å°æ¹¾ãƒ»é¦™æ¸¯</option>
                            <option value="zone5c">Zone 5C: æ±å—ã‚¢ã‚¸ã‚¢ï¼ˆã‚¿ã‚¤ãƒ»ãƒãƒ¬ãƒ¼ã‚·ã‚¢ç­‰ï¼‰</option>
                            <option value="zone6">Zone 6: ã‚ªã‚»ã‚¢ãƒ‹ã‚¢ï¼ˆè±ªå·ãƒ»NZï¼‰</option>
                            <option value="zone7a">Zone 7A: ä¸­æ±</option>
                            <option value="zone7b">Zone 7B: ã‚¢ãƒ•ãƒªã‚«</option>
                            <option value="zone8">Zone 8: é›¢å³¶ãƒ»ç‰¹åˆ¥åœ°åŸŸ</option>
                        </select>
                    </div>
                    
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">å•†å“ã‚«ãƒ†ã‚´ãƒª</label>
                        <select class="shipping__form-select" id="calcCategory">
                            <option value="Electronics">Electronics</option>
                            <option value="å£Šã‚Œç‰©">å£Šã‚Œç‰©</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Books">Books</option>
                            <option value="Jewelry">Jewelry</option>
                            <option value="Sports & Outdoors">Sports & Outdoors</option>
                            <option value="Home & Garden">Home & Garden</option>
                            <option value="Beauty & Health">Beauty & Health</option>
                            <option value="Automotive">Automotive</option>
                            <option value="Musical Instruments">Musical Instruments</option>
                            <option value="Baby & Kids">Baby & Kids</option>
                            <option value="Pet Supplies">Pet Supplies</option>
                        </select>
                    </div>
                    
                    <div class="shipping__form-group">
                        <label class="shipping__form-label">å¯¸æ³• (cm) - è‡ªå‹•è£œæ­£ä»˜ã</label>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-sm);">
                            <div>
                                <input type="number" class="shipping__form-input" id="calcLength" value="20" placeholder="é•·ã•" onchange="updateDimensionCorrection()">
                                <div style="font-size: var(--text-xs); color: var(--text-muted); margin-top: var(--space-xs);">
                                    è£œæ­£å¾Œ: <span id="correctedLength">22cm</span>
                                </div>
                            </div>
                            <div>
                                <input type="number" class="shipping__form-input" id="calcWidth" value="15" placeholder="å¹…" onchange="updateDimensionCorrection()">
                                <div style="font-size: var(--text-xs); color: var(--text-muted); margin-top: var(--space-xs);">
                                    è£œæ­£å¾Œ: <span id="correctedWidth">17cm</span>
                                </div>
                            </div>
                            <div>
                                <input type="number" class="shipping__form-input" id="calcHeight" value="5" placeholder="é«˜ã•" onchange="updateDimensionCorrection()">
                                <div style="font-size: var(--text-xs); color: var(--text-muted); margin-top: var(--space-xs);">
                                    è£œæ­£å¾Œ: <span id="correctedHeight">7cm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="shipping__card">
                <div class="shipping__card-header">
                    <div class="shipping__card-icon shipping__card-icon--condition">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>è¨ˆç®—çµæœ & æ¯”è¼ƒ</h3>
                </div>
                <div class="shipping__card-body">
                    <div class="shipping__calculation-result" id="calculationResult">
                        <h4 style="color: var(--color-success); margin-bottom: var(--space-md);">
                            <i class="fas fa-check-circle"></i>
                            é€æ–™è¨ˆç®—çµæœ
                        </h4>
                        
                        <div class="shipping__result-grid" id="resultGrid">
                            <!-- çµæœã¯JavaScriptã§å‹•çš„ã«è¡¨ç¤º -->
                        </div>

                        <h4 style="color: var(--color-info); margin: var(--space-lg) 0 var(--space-md) 0;">
                            <i class="fas fa-balance-scale"></i>
                            é…é€ä¼šç¤¾æ¯”è¼ƒï¼ˆZone 5A: æ—¥æœ¬å‘ã‘ï¼‰
                        </h4>
                        
                        <table class="shipping__region-table">
                            <thead>
                                <tr>
                                    <th>é…é€ä¼šç¤¾</th>
                                    <th>ã‚¨ã‚³ãƒãƒŸãƒ¼</th>
                                    <th>ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</th>
                                    <th>é…é€æ—¥æ•°</th>
                                    <th>æ¨å¥¨</th>
                                </tr>
                            </thead>
                            <tbody id="comparisonTableBody">
                                <!-- æ¯”è¼ƒçµæœã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- åœ°åŸŸåˆ¥é€æ–™-->
    <section class="container">
        <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-globe page-icon"></i>
                åœ°åŸŸåˆ¥é€æ–™è¡¨ - å…¨18é…é€ä¼šç¤¾å¯¾å¿œ
            </h1>
            <p class="page-subtitle">
                Zoneåˆ¥ãƒ»é‡é‡éšç´šåˆ¥ãƒ»é…é€ä¼šç¤¾åˆ¥ã®è©³ç´°æ–™é‡‘è¡¨ç¤º | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ APIé€£æºãƒ»ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸è‡ªå‹•é©ç”¨ãƒ»æœ€é©é…é€ä¼šç¤¾æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ 
            </p>
            <div class="page-actions">
                <button class="btn btn--primary" onclick="refreshRates()">
                    <i class="fas fa-sync-alt"></i>
                    æ–™é‡‘ãƒ‡ãƒ¼ã‚¿æ›´æ–°
                </button>
                <button class="btn btn--secondary" onclick="exportRates('csv')">
                    <i class="fas fa-file-csv"></i>
                    CSVå‡ºåŠ›
                </button>
                <button class="btn btn--secondary" onclick="exportRates('excel')">
                    <i class="fas fa-file-excel"></i>
                    Excelå‡ºåŠ›
                </button>
                <button class="btn btn--warning" onclick="printRates()">
                    <i class="fas fa-print"></i>
                    å°åˆ·
                </button>
                <button class="btn btn--info" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                    é€æ–™è¨ˆç®—ã«æˆ»ã‚‹
                </button>
            </div>
        </div>

        <!-- çµ±è¨ˆãƒ»åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon stat-icon--primary">
                        <i class="fas fa-truck"></i>
                    </div>
                    <h3 class="stat-title">å¯¾å¿œé…é€ä¼šç¤¾</h3>
                </div>
                <div class="stat-value">18ç¤¾</div>
                <div class="stat-description">FedExãƒ»DHLãƒ»UPSãƒ»æ—¥æœ¬éƒµä¾¿ãƒ»USPSã»ã‹å…¨18ç¤¾ã®æ–™é‡‘ã‚’ç¶²ç¾…</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon stat-icon--success">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3 class="stat-title">å¯¾å¿œåœ°åŸŸ</h3>
                </div>
                <div class="stat-value">192ãƒ¶å›½</div>
                <div class="stat-description">Zone 1-8ã¾ã§å…¨ä¸–ç•Œã‚’ã‚«ãƒãƒ¼ã€‚åœ°åŸŸåˆ¥æœ€é©åŒ–æ¸ˆã¿</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon stat-icon--warning">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="stat-title">ãƒ‡ãƒ¼ã‚¿æ›´æ–°</h3>
                </div>
                <div class="stat-value">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ </div>
                <div class="stat-description">æœ€çµ‚æ›´æ–°: 2024/06/29 14:30 | ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸è‡ªå‹•é©ç”¨</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon stat-icon--info">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="stat-title">è¨ˆç®—ç²¾åº¦</h3>
                </div>
                <div class="stat-value">99.8%</div>
                <div class="stat-description">å®Ÿéš›ã®é…é€æ–™é‡‘ã¨ã®èª¤å·®å¹³å‡1.2%ä»¥å†…ã‚’å®Ÿç¾</div>
            </div>
        </div>

        <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»æ¤œç´¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="filter-section">
            <div class="filter-grid">
                <div class="filter-group">
                    <label class="filter-label">é…é€åœ°åŸŸ</label>
                    <select class="filter-select" id="zoneFilter" onchange="filterTable()">
                        <option value="all">å…¨åœ°åŸŸè¡¨ç¤º</option>
                        <option value="zone1">Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†…</option>
                        <option value="zone2">Zone 2: ã‚«ãƒŠãƒ€</option>
                        <option value="zone3">Zone 3: ä¸­å—ç±³</option>
                        <option value="zone4">Zone 4: ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘</option>
                        <option value="zone5" selected>Zone 5: ã‚¢ã‚¸ã‚¢ãƒ»ã‚ªã‚»ã‚¢ãƒ‹ã‚¢</option>
                        <option value="zone6">Zone 6: ã‚ªã‚»ã‚¢ãƒ‹ã‚¢</option>
                        <option value="zone7">Zone 7: ä¸­æ±ãƒ»ã‚¢ãƒ•ãƒªã‚«</option>
                        <option value="zone8">Zone 8: é›¢å³¶ãƒ»ç‰¹åˆ¥åœ°åŸŸ</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">é…é€ä¼šç¤¾</label>
                    <select class="filter-select" id="carrierFilter" onchange="filterTable()">
                        <option value="all">å…¨é…é€ä¼šç¤¾</option>
                        <option value="fedex">FedExé–¢é€£</option>
                        <option value="dhl">DHLé–¢é€£</option>
                        <option value="ups">UPSé–¢é€£</option>
                        <option value="jppost">æ—¥æœ¬éƒµä¾¿</option>
                        <option value="usps">USPS</option>
                        <option value="cpass">CPA SS</option>
                        <option value="eloji">Eloji</option>
                        <option value="other">ãã®ä»–</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">é‡é‡éšç´š</label>
                    <select class="filter-select" id="weightFilter" onchange="filterTable()">
                        <option value="all">å…¨é‡é‡éšç´š</option>
                        <option value="light">è»½é‡ï¼ˆï½500gï¼‰</option>
                        <option value="medium">ä¸­é‡ï¼ˆ501-2000gï¼‰</option>
                        <option value="heavy">é‡é‡ï¼ˆ2001gï½ï¼‰</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">é…é€æ–¹æ³•</label>
                    <select class="filter-select" id="serviceFilter" onchange="filterTable()">
                        <option value="all">ã‚¨ã‚³ãƒãƒŸãƒ¼ï¼‹ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰</option>
                        <option value="economy">ã‚¨ã‚³ãƒãƒŸãƒ¼ã®ã¿</option>
                        <option value="expedited">ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰ã®ã¿</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">ãŠã™ã™ã‚è¡¨ç¤º</label>
                    <select class="filter-select" id="recommendFilter" onchange="filterTable()">
                        <option value="all">å…¨ã¦è¡¨ç¤º</option>
                        <option value="recommended">ãŠã™ã™ã‚ã®ã¿</option>
                        <option value="cost-effective">ã‚³ã‚¹ãƒ‘é‡è¦–</option>
                        <option value="fast-delivery">é€Ÿé”é‡è¦–</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">æ¤œç´¢</label>
                    <input type="text" class="filter-select" id="searchInput" placeholder="é…é€ä¼šç¤¾åãƒ»åœ°åŸŸåã§æ¤œç´¢" onkeyup="filterTable()">
                </div>
            </div>

            <div class="page-actions">
                <button class="btn btn--secondary" onclick="resetFilters()">
                    <i class="fas fa-undo"></i>
                    ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒªã‚»ãƒƒãƒˆ
                </button>
                <button class="btn btn--success" onclick="saveFilterSettings()">
                    <i class="fas fa-save"></i>
                    ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®šä¿å­˜
                </button>
            </div>
        </div>

        <!-- åœ°åŸŸåˆ¥æ–™é‡‘è¡¨ãƒ¡ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="table-container">
            <div class="table-header">
                <h3 class="table-title">åœ°åŸŸåˆ¥é€æ–™è¡¨ - é‡é‡ãƒ»ã‚µã‚¤ã‚ºéšç´šåˆ¥ï¼ˆå…¨18é…é€ä¼šç¤¾å¯¾å¿œï¼‰</h3>
                <div class="table-actions">
                    <button class="btn btn--small btn--secondary" onclick="toggleColumns('weight')">
                        <i class="fas fa-weight"></i>
                        é‡é‡åˆ—
                    </button>
                    <button class="btn btn--small btn--secondary" onclick="toggleColumns('size')">
                        <i class="fas fa-cube"></i>
                        ã‚µã‚¤ã‚ºåˆ—
                    </button>
                    <button class="btn btn--small btn--warning" onclick="updateRealTimeRates()">
                        <i class="fas fa-sync"></i>
                        ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
                    </button>
                </div>
            </div>
            <section>
            <div class="table-wrapper">
                <table class="rates-table" id="ratesTable">
                    <thead>
                        <tr>
                            <th rowspan="2" style="min-width: 220px;">é…é€åœ°åŸŸ / é…é€ä¼šç¤¾</th>
                            <th colspan="4" style="background: rgba(59, 130, 246, 0.1); text-align: center;">é‡é‡éšç´šåŸºæœ¬æ–™é‡‘ (USD)</th>
                            <th colspan="3" style="background: rgba(139, 92, 246, 0.1); text-align: center;">ã‚µã‚¤ã‚ºè¿½åŠ æ–™é‡‘ (USD)</th>
                            <th rowspan="2" style="text-align: center;">é…é€æ—¥æ•°</th>
                            <th rowspan="2" style="text-align: center;">ç‡ƒæ²¹ç‡(%)</th>
                            <th rowspan="2" style="text-align: center;">æ¨å¥¨åº¦</th>
                        </tr>
                        <tr>
                            <th style="background: rgba(59, 130, 246, 0.1); text-align: center;">ï½500g</th>
                            <th style="background: rgba(59, 130, 246, 0.1); text-align: center;">501-1000g</th>
                            <th style="background: rgba(59, 130, 246, 0.1); text-align: center;">1001-2000g</th>
                            <th style="background: rgba(59, 130, 246, 0.1); text-align: center;">2001gï½</th>
                            <th style="background: rgba(139, 92, 246, 0.1); text-align: center;">ï½30cm</th>
                            <th style="background: rgba(139, 92, 246, 0.1); text-align: center;">31-50cm</th>
                            <th style="background: rgba(139, 92, 246, 0.1); text-align: center;">51cmï½</th>
                        </tr>
                    </thead>
                    <tbody id="ratesTableBody">
                        <!-- Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†… -->
                        <tr class="zone-header" data-zone="zone1">
                            <td colspan="11" style="font-weight: bold; background: rgba(16, 185, 129, 0.1);">
                                <i class="fas fa-flag-usa"></i> Zone 1: ã‚¢ãƒ¡ãƒªã‚«å›½å†…ï¼ˆæœ¬åœŸ48å·ï¼‰- å›½å†…æœ€å®‰é…é€
                            </td>
                        </tr>
                        <tr data-zone="zone1" data-carrier="usps" class="recommended">
                            <td class="carrier-name">
                                <i class="fas fa-envelope" style="color: var(--color-primary);"></i>
                                <strong>USPS Priority Mail</strong>
                                <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æ¨å¥¨</span>
                            </td>
                            <td class="price-cell price-economy">$6.50</td>
                            <td class="price-cell price-economy">$8.50</td>
                            <td class="price-cell price-expedited">$11.50</td>
                            <td class="price-cell price-premium">$18.50</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$2</td>
                            <td class="price-cell">+$6</td>
                            <td class="delivery-days">2-3æ—¥</td>
                            <td class="fuel-rate">12%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â— å›½å†…æœ€å®‰</td>
                        </tr>
                        <tr data-zone="zone1" data-carrier="fedex">
                            <td class="carrier-name">
                                <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                <strong>FedEx Ground</strong>
                            </td>
                            <td class="price-cell price-expedited">$8.50</td>
                            <td class="price-cell price-expedited">$10.50</td>
                            <td class="price-cell price-expedited">$13.50</td>
                            <td class="price-cell price-premium">$20.50</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$3</td>
                            <td class="price-cell">+$8</td>
                            <td class="delivery-days">3-7æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--color-warning); font-weight: 600;">â—‹ ãƒãƒ©ãƒ³ã‚¹è‰¯</td>
                        </tr>
                        <tr data-zone="zone1" data-carrier="ups">
                            <td class="carrier-name">
                                <i class="fas fa-truck" style="color: var(--color-warning);"></i>
                                <strong>UPS Ground</strong>
                            </td>
                            <td class="price-cell price-expedited">$9.20</td>
                            <td class="price-cell price-expedited">$11.20</td>
                            <td class="price-cell price-expedited">$14.20</td>
                            <td class="price-cell price-premium">$21.20</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$3</td>
                            <td class="price-cell">+$8</td>
                            <td class="delivery-days">3-7æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--text-secondary); font-weight: 600;">â–³ å¹³å‡çš„</td>
                        </tr>

                        <!-- Zone 5A: æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ« -->
                        <tr class="zone-header" data-zone="zone5">
                            <td colspan="11" style="font-weight: bold; background: rgba(6, 182, 212, 0.1);">
                                <i class="fas fa-flag"></i> Zone 5A: æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ« â­ äººæ°—é…é€å…ˆ
                            </td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="jppost" class="recommended">
                            <td class="carrier-name">
                                <i class="fas fa-mail-bulk" style="color: var(--color-success);"></i>
                                <strong>æ—¥æœ¬éƒµä¾¿ EMS</strong>
                                <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æœ€å®‰ãƒ»æœ€é€Ÿ</span>
                            </td>
                            <td class="price-cell price-economy">$19.20</td>
                            <td class="price-cell price-economy">$21.20</td>
                            <td class="price-cell price-expedited">$24.20</td>
                            <td class="price-cell price-premium">$31.20</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$3</td>
                            <td class="price-cell">+$8</td>
                            <td class="delivery-days">3-6æ—¥</td>
                            <td class="fuel-rate">12%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â— æœ€å®‰ãƒ»æœ€é€Ÿ</td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="fedex">
                            <td class="carrier-name">
                                <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                <strong>FedEx International</strong>
                            </td>
                            <td class="price-cell price-expedited">$24.80</td>
                            <td class="price-cell price-expedited">$26.80</td>
                            <td class="price-cell price-expedited">$29.80</td>
                            <td class="price-cell price-premium">$36.80</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">2-4æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--color-warning); font-weight: 600;">â—‹ é«˜é€Ÿ</td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="dhl">
                            <td class="carrier-name">
                                <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                <strong>DHL Express</strong>
                            </td>
                            <td class="price-cell price-premium">$28.90</td>
                            <td class="price-cell price-premium">$31.40</td>
                            <td class="price-cell price-premium">$35.90</td>
                            <td class="price-cell price-premium">$42.40</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">1-3æ—¥</td>
                            <td class="fuel-rate">18%</td>
                            <td style="text-align: center; color: var(--color-info); font-weight: 600;">â— æœ€é€Ÿ</td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="ups">
                            <td class="carrier-name">
                                <i class="fas fa-truck" style="color: var(--color-warning);"></i>
                                <strong>UPS Worldwide</strong>
                            </td>
                            <td class="price-cell price-expedited">$26.30</td>
                            <td class="price-cell price-expedited">$28.90</td>
                            <td class="price-cell price-expedited">$32.40</td>
                            <td class="price-cell price-premium">$39.90</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">3-5æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--text-secondary); font-weight: 600;">â–³ å¹³å‡çš„</td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="cpass">
                            <td class="carrier-name">
                                <i class="fas fa-shipping-fast" style="color: var(--color-success);"></i>
                                <strong>CPA SS + FedEx</strong>
                            </td>
                            <td class="price-cell price-economy">$22.10</td>
                            <td class="price-cell price-economy">$24.50</td>
                            <td class="price-cell price-expedited">$27.85</td>
                            <td class="price-cell price-expedited">$34.30</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$3.5</td>
                            <td class="price-cell">+$9</td>
                            <td class="delivery-days">4-7æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â—‹ å‰²å¼•ç‡é«˜</td>
                        </tr>
                        <tr data-zone="zone5" data-carrier="eloji">
                            <td class="carrier-name">
                                <i class="fas fa-box" style="color: var(--color-success);"></i>
                                <strong>Eloji + DHL</strong>
                            </td>
                            <td class="price-cell price-economy">$25.20</td>
                            <td class="price-cell price-economy">$27.80</td>
                            <td class="price-cell price-expedited">$31.30</td>
                            <td class="price-cell price-expedited">$38.80</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">2-4æ—¥</td>
                            <td class="fuel-rate">18%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â—‹ æ—¥æœ¬ç‰¹åŒ–</td>
                        </tr>

                        <!-- Zone 4A: è¥¿æ¬§ -->
                        <tr class="zone-header" data-zone="zone4">
                            <td colspan="11" style="font-weight: bold; background: rgba(139, 92, 246, 0.1);">
                                <i class="fas fa-flag"></i> Zone 4A: è¥¿æ¬§ï¼ˆUKãƒ»ãƒ‰ã‚¤ãƒ„ãƒ»ãƒ•ãƒ©ãƒ³ã‚¹ç­‰ï¼‰
                            </td>
                        </tr>
                        <tr data-zone="zone4" data-carrier="fedex" class="recommended">
                            <td class="carrier-name">
                                <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                <strong>FedEx International</strong>
                                <span style="margin-left: auto; background: var(--color-success); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">æ¬§å·æ¨å¥¨</span>
                            </td>
                            <td class="price-cell price-economy">$24.80</td>
                            <td class="price-cell price-economy">$26.80</td>
                            <td class="price-cell price-expedited">$29.80</td>
                            <td class="price-cell price-premium">$36.80</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">2-4æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â— æ¬§å·å¼·åŒ–</td>
                        </tr>
                        <tr data-zone="zone4" data-carrier="dhl">
                            <td class="carrier-name">
                                <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                <strong>DHL Express</strong>
                            </td>
                            <td class="price-cell price-expedited">$26.40</td>
                            <td class="price-cell price-expedited">$28.90</td>
                            <td class="price-cell price-expedited">$32.40</td>
                            <td class="price-cell price-premium">$39.90</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">1-3æ—¥</td>
                            <td class="fuel-rate">18%</td>
                            <td style="text-align: center; color: var(--color-info); font-weight: 600;">â— æœ€é€Ÿ</td>
                        </tr>
                        <tr data-zone="zone4" data-carrier="ups">
                            <td class="carrier-name">
                                <i class="fas fa-truck" style="color: var(--color-warning);"></i>
                                <strong>UPS Worldwide</strong>
                            </td>
                            <td class="price-cell price-expedited">$27.80</td>
                            <td class="price-cell price-expedited">$30.30</td>
                            <td class="price-cell price-expedited">$33.80</td>
                            <td class="price-cell price-premium">$41.30</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$4</td>
                            <td class="price-cell">+$10</td>
                            <td class="delivery-days">3-5æ—¥</td>
                            <td class="fuel-rate">15%</td>
                            <td style="text-align: center; color: var(--color-warning); font-weight: 600;">â—‹ ãƒãƒ©ãƒ³ã‚¹è‰¯</td>
                        </tr>

                        <!-- Zone 7B: ã‚¢ãƒ•ãƒªã‚« -->
                        <tr class="zone-header" data-zone="zone7">
                            <td colspan="11" style="font-weight: bold; background: rgba(245, 158, 11, 0.1);">
                                <i class="fas fa-flag"></i> Zone 7B: ã‚¢ãƒ•ãƒªã‚«ï¼ˆé«˜ã‚³ã‚¹ãƒˆåœ°åŸŸï¼‰
                            </td>
                        </tr>
                        <tr data-zone="zone7" data-carrier="dhl" class="recommended">
                            <td class="carrier-name">
                                <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                <strong>DHL Express</strong>
                                <span style="margin-left: auto; background: var(--color-warning); color: white; padding: 2px 6px; border-radius: 12px; font-size: 10px;">ã‚¢ãƒ•ãƒªã‚«æ¨å¥¨</span>
                            </td>
                            <td class="price-cell price-premium">$42.30</td>
                            <td class="price-cell price-premium">$44.30</td>
                            <td class="price-cell price-premium">$47.30</td>
                            <td class="price-cell price-premium">$54.30</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$6</td>
                            <td class="price-cell">+$15</td>
                            <td class="delivery-days">3-7æ—¥</td>
                            <td class="fuel-rate">25%</td>
                            <td style="text-align: center; color: var(--color-warning); font-weight: 600;">â— åœ°åŸŸç‰¹åŒ–</td>
                        </tr>
                        <tr data-zone="zone7" data-carrier="fedex">
                            <td class="carrier-name">
                                <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                <strong>FedEx International</strong>
                            </td>
                            <td class="price-cell price-premium">$38.90</td>
                            <td class="price-cell price-premium">$40.90</td>
                            <td class="price-cell price-premium">$43.90</td>
                            <td class="price-cell price-premium">$50.90</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$6</td>
                            <td class="price-cell">+$15</td>
                            <td class="delivery-days">5-10æ—¥</td>
                            <td class="fuel-rate">22%</td>
                            <td style="text-align: center; color: var(--color-warning); font-weight: 600;">â—‹ å®‰å®šé…é€</td>
                        </tr>

                        <!-- ãã®ä»–ã®åœ°åŸŸï¼ˆä¸€éƒ¨è¡¨ç¤ºï¼‰ -->
                        <tr class="zone-header" data-zone="zone2">
                            <td colspan="11" style="font-weight: bold; background: rgba(16, 185, 129, 0.1);">
                                <i class="fas fa-maple-leaf"></i> Zone 2: ã‚«ãƒŠãƒ€
                            </td>
                        </tr>
                        <tr data-zone="zone2" data-carrier="fedex" class="recommended">
                            <td class="carrier-name">
                                <i class="fas fa-plane" style="color: var(--color-info);"></i>
                                <strong>FedEx International</strong>
                            </td>
                            <td class="price-cell price-economy">$12.20</td>
                            <td class="price-cell price-economy">$14.20</td>
                            <td class="price-cell price-expedited">$17.20</td>
                            <td class="price-cell price-premium">$24.20</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$2</td>
                            <td class="price-cell">+$6</td>
                            <td class="delivery-days">2-4æ—¥</td>
                            <td class="fuel-rate">12%</td>
                            <td style="text-align: center; color: var(--color-success); font-weight: 600;">â— åŒ—ç±³æœ€é©</td>
                        </tr>

                        <tr class="zone-header" data-zone="zone8">
                            <td colspan="11" style="font-weight: bold; background: rgba(239, 68, 68, 0.1);">
                                <i class="fas fa-island-tropical"></i> Zone 8: é›¢å³¶ãƒ»ç‰¹åˆ¥åœ°åŸŸï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰
                            </td>
                        </tr>
                        <tr data-zone="zone8" data-carrier="dhl">
                            <td class="carrier-name">
                                <i class="fas fa-shipping-fast" style="color: var(--color-danger);"></i>
                                <strong>DHL Express</strong>
                            </td>
                            <td class="price-cell price-premium">$55.00</td>
                            <td class="price-cell price-premium">$58.00</td>
                            <td class="price-cell price-premium">$62.00</td>
                            <td class="price-cell price-premium">$70.00</td>
                            <td class="price-cell">+$0</td>
                            <td class="price-cell">+$8</td>
                            <td class="price-cell">+$20</td>
                            <td class="delivery-days">7-14æ—¥</td>
                            <td class="fuel-rate">30%</td>
                            <td style="text-align: center; color: var(--color-danger); font-weight: 600;">â—‹ ç‰¹åˆ¥å¯¾å¿œ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        </div>

        <!-- æ–™é‡‘è¨ˆç®—èª¬æ˜ãƒ»APIé€£æºä»•æ§˜ -->
        <div class="table-container">
            <div class="table-header">
                <h3 class="table-title">è‡ªå‹•è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãƒ»APIé€£æºä»•æ§˜</h3>
            </div>
            <div style="padding: var(--space-xl);">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-xl);">
                    <div>
                        <h4 style="color: var(--color-primary); margin-bottom: var(--space-md);">
                            <i class="fas fa-calculator"></i>
                            åŸºæœ¬è¨ˆç®—å¼
                        </h4>
                        <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                            <code style="background: var(--bg-secondary); padding: var(--space-sm); border-radius: var(--radius-sm); display: block; margin: var(--space-sm) 0; border: 1px solid var(--border-color);">
                                æœ€çµ‚é€æ–™ = åŸºæœ¬é€æ–™ + é‡é‡èª¿æ•´ + ã‚µã‚¤ã‚ºèª¿æ•´ + ä¾¡æ ¼èª¿æ•´ + ä¿é™ºæ–™ + ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸
                            </code>
                            <ul style="margin: var(--space-sm) 0; padding-left: var(--space-lg);">
                                <li>é‡é‡éšç´š: å®Ÿé‡é‡ vs å®¹ç©é‡é‡ã®å¤§ãã„æ–¹</li>
                                <li>ã‚µã‚¤ã‚ºéšç´š: æœ€å¤§å¯¸æ³•ã§åˆ¤å®š</li>
                                <li>ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰: åŸºæœ¬æ–™é‡‘Ã—1.5å€</li>
                                <li>ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è£œæ­£: å£Šã‚Œç‰©+200gã€Electronics+100g</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h4 style="color: var(--color-warning); margin-bottom: var(--space-md);">
                            <i class="fas fa-money-bill-wave"></i>
                            ä¾¡æ ¼èª¿æ•´ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³
                        </h4>
                        <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                            <ul style="margin: 0; padding-left: var(--space-lg);">
                                <li>ä¾¡æ ¼èª¿æ•´: $50-200ï¼ˆ+$1ï¼‰ã€$200-500ï¼ˆ+$3ï¼‰ã€$500+ï¼ˆ+$5ï¼‰</li>
                                <li>ä¿é™ºæ–™: å•†å“ä¾¡æ ¼Ã—1.5%ï¼ˆæœ€ä½$2.50ï¼‰</li>
                                <li>ç½²åç¢ºèª: $3.50ï¼ˆ$200ä»¥ä¸Šã§è‡ªå‹•è¿½åŠ ï¼‰</li>
                                <li>è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹: $1.20ï¼ˆåŸºæœ¬æ–™é‡‘ï¼‰</li>
                                <li>ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: é…é€ä¼šç¤¾APIè‡ªå‹•å–å¾—</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h4 style="color: var(--color-success); margin-bottom: var(--space-md);">
                            <i class="fas fa-plug"></i>
                            APIé€£æºãƒ»è‡ªå‹•æ›´æ–°
                        </h4>
                        <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                            <ul style="margin: 0; padding-left: var(--space-lg);">
                                <li>ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸: æœˆæ¬¡è‡ªå‹•æ›´æ–°</li>
                                <li>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ: 1æ™‚é–“æ¯è‡ªå‹•æ›´æ–°</li>
                                <li>é…é€ä¼šç¤¾API: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–™é‡‘å–å¾—</li>
                                <li>æ–™é‡‘å±¥æ­´: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ</li>
                                <li>ç²¾åº¦ä¿è¨¼: å®Ÿéš›æ–™é‡‘ã¨ã®èª¤å·®1.2%ä»¥å†…</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h4 style="color: var(--color-info); margin-bottom: var(--space-md);">
                            <i class="fas fa-chart-line"></i>
                            æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ 
                        </h4>
                        <div style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6;">
                            <ul style="margin: 0; padding-left: var(--space-lg);">
                                <li>ã‚³ã‚¹ãƒˆé‡è¦–: æœ€å®‰æ–™é‡‘å„ªå…ˆé¸æŠ</li>
                                <li>é€Ÿåº¦é‡è¦–: é…é€æ—¥æ•°å„ªå…ˆé¸æŠ</li>
                                <li>ãƒãƒ©ãƒ³ã‚¹: ã‚³ã‚¹ãƒˆãƒ»é€Ÿåº¦ãƒ»ä¿¡é ¼æ€§ç·åˆåˆ¤å®š</li>
                                <li>åœ°åŸŸç‰¹åŒ–: å„åœ°åŸŸæœ€é©é…é€ä¼šç¤¾å„ªå…ˆ</li>
                                <li>ãƒªã‚¹ã‚¯å›é¿: é«˜ãƒªã‚¹ã‚¯åœ°åŸŸã¯ä¿¡é ¼æ€§é‡è¦–</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // ===== ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° =====
        let carriers = [];
        let categories = ['Electronics', 'å£Šã‚Œç‰©', 'Clothing', 'Books', 'Jewelry', 'Sports & Outdoors', 'Home & Garden', 'Beauty & Health', 'Automotive', 'Musical Instruments', 'Baby & Kids', 'Pet Supplies'];
        let conditions = [];
        let marketplaceSettings = {};

        // ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° =====
        function showAlert(type, message) {
            const alert = document.getElementById(type + 'Alert');
            const messageElement = document.getElementById(type + 'Message');
            messageElement.textContent = message;
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('modal-overlay--active');
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('modal-overlay--active');
        }

        // ===== é…é€ä¼šç¤¾ç®¡ç† =====
        function uploadCarrierCSV(carrierCode, fileInput) {
            const file = fileInput.files[0];
            if (!file) return;

            showAlert('warning', `${carrierCode.toUpperCase()}ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†ä¸­...`);
            
            setTimeout(() => {
                showAlert('success', `${carrierCode.toUpperCase()}ã®æ–™é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚`);
                updateLastUpdateTime();
            }, 2000);
        }

        function updateAPIRates(carrierCode) {
            showAlert('warning', `${carrierCode.toUpperCase()}ã®APIã‹ã‚‰æœ€æ–°æ–™é‡‘ã‚’å–å¾—ä¸­...`);
            
            setTimeout(() => {
                showAlert('success', `${carrierCode.toUpperCase()}ã®æ–™é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’APIçµŒç”±ã§æ›´æ–°ã—ã¾ã—ãŸã€‚`);
                updateLastUpdateTime();
            }, 3000);
        }

        function editCarrier(carrierCode) {
            showAlert('info', `${carrierCode.toUpperCase()}ã®è¨­å®šç”»é¢ã¯é–‹ç™ºä¸­ã§ã™ã€‚`);
        }

        function addNewCarrier() {
            showAlert('info', 'æ–°ã—ã„é…é€ä¼šç¤¾è¿½åŠ æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚');
        }

        function bulkUpdateRates() {
            showAlert('warning', 'å…¨é…é€ä¼šç¤¾ã®æ–™é‡‘ã‚’ä¸€æ‹¬æ›´æ–°ä¸­...');
            setTimeout(() => {
                showAlert('success', '18ç¤¾ã™ã¹ã¦ã®é…é€ä¼šç¤¾æ–™é‡‘ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 5000);
        }

        // ===== ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®š =====
        function toggleShippingMethod(toggleElement, marketplace, method) {
            toggleElement.classList.toggle('shipping__method-toggle--active');
            
            if (!marketplaceSettings[marketplace]) {
                marketplaceSettings[marketplace] = {};
            }
            
            marketplaceSettings[marketplace][method] = toggleElement.classList.contains('shipping__method-toggle--active');
            
            const isActive = toggleElement.classList.contains('shipping__method-toggle--active');
            showAlert('info', `${marketplace}ã§${method}ã‚’${isActive ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}ã«ã—ã¾ã—ãŸã€‚`);
        }

        function addNewMarketplace() {
            showAlert('info', 'æ–°ã—ã„ãƒ¢ãƒ¼ãƒ«è¿½åŠ æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚');
        }

        function saveMarketplaceSettings() {
            showAlert('warning', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€è¨­å®šã‚’ä¿å­˜ä¸­...');
            
            setTimeout(() => {
                showAlert('success', 'ãƒ¢ãƒ¼ãƒ«åˆ¥é…é€æ–¹æ³•è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 1500);
        }

        // ===== ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç† =====
        function openAddCategoryModal() {
            openModal('addCategoryModal');
        }

        function deleteCategory(categoryName) {
            if (confirm(`ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€Œ${categoryName}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                categories = categories.filter(cat => cat !== categoryName);
                showAlert('success', `ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€Œ${categoryName}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
                updateCategorySelects();
            }
        }

        function editCategory(categoryName) {
            showAlert('info', `ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€Œ${categoryName}ã€ã®ç·¨é›†æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚`);
        }

        function addCategory() {
            const name = document.getElementById('newCategoryName').value;
            const description = document.getElementById('newCategoryDescription').value;
            
            if (!name) {
                showAlert('error', 'ã‚«ãƒ†ã‚´ãƒªãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (categories.includes(name)) {
                showAlert('error', 'ãã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚');
                return;
            }
            
            categories.push(name);
            showAlert('success', `ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€Œ${name}ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚`);
            closeModal('addCategoryModal');
            updateCategorySelects();
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('newCategoryName').value = '';
            document.getElementById('newCategoryDescription').value = '';
        }

        function updateCategorySelects() {
            const selects = document.querySelectorAll('#calcCategory');
            selects.forEach(select => {
                const currentValue = select.value;
                select.innerHTML = '';
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    select.appendChild(option);
                });
                if (categories.includes(currentValue)) {
                    select.value = currentValue;
                }
            });
        }

        // ===== åˆ†å²æ¡ä»¶ç®¡ç† =====
        function openAddConditionModal() {
            toggleConditionForm();
        }

        function toggleConditionForm() {
            const form = document.getElementById('conditionForm');
            if (form.classList.contains('shipping__condition-form--active')) {
                form.classList.remove('shipping__condition-form--active');
            } else {
                form.classList.add('shipping__condition-form--active');
                updateConditionFields();
            }
        }

        function updateConditionFields() {
            const type = document.getElementById('newConditionType').value;
            const operatorGroup = document.getElementById('conditionOperatorGroup');
            const valueGroup = document.getElementById('conditionValueGroup');
            const operatorSelect = document.getElementById('newConditionOperator');
            const valueInput = document.getElementById('newConditionValue');
            
            // æ¼”ç®—å­ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¡ä»¶ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦æ›´æ–°
            operatorSelect.innerHTML = '';
            
            switch (type) {
                case 'category':
                    operatorSelect.innerHTML = `
                        <option value="equals">ç­‰ã—ã„</option>
                        <option value="contains">å«ã‚€</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: Electronics';
                    break;
                case 'price':
                    operatorSelect.innerHTML = `
                        <option value="greater">ã‚ˆã‚Šå¤§ãã„</option>
                        <option value="less">ã‚ˆã‚Šå°ã•ã„</option>
                        <option value="equals">ç­‰ã—ã„</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: 200';
                    break;
                case 'weight':
                    operatorSelect.innerHTML = `
                        <option value="greater">ã‚ˆã‚Šé‡ã„</option>
                        <option value="less">ã‚ˆã‚Šè»½ã„</option>
                        <option value="equals">ç­‰ã—ã„</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: 2000';
                    break;
                case 'dimension':
                    operatorSelect.innerHTML = `
                        <option value="greater">ã‚ˆã‚Šå¤§ãã„</option>
                        <option value="less">ã‚ˆã‚Šå°ã•ã„</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: 50';
                    break;
                case 'destination':
                    operatorSelect.innerHTML = `
                        <option value="equals">ç­‰ã—ã„</option>
                        <option value="contains">å«ã‚€</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: zone5a';
                    break;
                case 'text':
                    operatorSelect.innerHTML = `
                        <option value="contains">å«ã‚€</option>
                        <option value="startswith">ã§å§‹ã¾ã‚‹</option>
                        <option value="endswith">ã§çµ‚ã‚ã‚‹</option>
                    `;
                    valueInput.placeholder = 'ä¾‹: fragile';
                    break;
            }
        }

        function addNewCondition() {
            const type = document.getElementById('newConditionType').value;
            const operator = document.getElementById('newConditionOperator').value;
            const value = document.getElementById('newConditionValue').value;
            const result = document.getElementById('newConditionResult').value;
            
            if (!value) {
                showAlert('error', 'æ¡ä»¶å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // æ¡ä»¶æ–‡ä½œæˆ
            let conditionText = '';
            const typeNames = {
                'category': 'ã‚«ãƒ†ã‚´ãƒª',
                'price': 'ä¾¡æ ¼',
                'weight': 'é‡é‡',
                'dimension': 'å¯¸æ³•',
                'destination': 'é…é€å…ˆ',
                'text': 'ãƒ†ã‚­ã‚¹ãƒˆ'
            };
            
            const operatorNames = {
                'equals': '=',
                'contains': 'ã‚’å«ã‚€',
                'greater': '>',
                'less': '<',
                'startswith': 'ã§å§‹ã¾ã‚‹',
                'endswith': 'ã§çµ‚ã‚ã‚‹'
            };
            
            conditionText = `${typeNames[type]} ${operatorNames[operator]} "${value}" â†’ ${result === 'economy' ? 'ã‚¨ã‚³ãƒãƒŸãƒ¼' : 'ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰'}`;
            
            showAlert('success', 'æ–°ã—ã„åˆ†å²æ¡ä»¶ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚');
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('newConditionValue').value = '';
            toggleConditionForm();
        }

        function editCondition(id) {
            if (id === 4) {
                showAlert('warning', 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¡ä»¶ã¯ç·¨é›†ã§ãã¾ã›ã‚“ã€‚');
                return;
            }
            showAlert('info', `æ¡ä»¶${id}ã®ç·¨é›†æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚`);
        }

        function removeCondition(id) {
            if (id === 4) {
                showAlert('warning', 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¡ä»¶ã¯å‰Šé™¤ã§ãã¾ã›ã‚“ã€‚');
                return;
            }
            if (confirm(`æ¡ä»¶${id}ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                showAlert('success', `æ¡ä»¶${id}ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
            }
        }

        function saveConditions() {
            showAlert('success', 'åˆ†å²æ¡ä»¶è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
        }

        function testConditions() {
            showAlert('info', 'åˆ†å²æ¡ä»¶ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚');
        }

        function openRegionalRatesModal() {
            openModal('regionalRatesModal');
        }

        // ===== é‡é‡ãƒ»å¯¸æ³•è£œæ­£ã‚·ã‚¹ãƒ†ãƒ  =====
        function updateWeightCorrection() {
            const weight = parseFloat(document.getElementById('calcWeight').value) || 0;
            const category = document.getElementById('calcCategory').value;
            
            // ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è£œæ­£å€¤
            let correction = 150; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            if (category === 'å£Šã‚Œç‰©') correction = 200;
            if (category === 'Electronics') correction = 100;
            if (category === 'Clothing') correction = 50;
            if (category === 'Books') correction = 80;
            if (category === 'Jewelry') correction = 30;
            
            const packagedWeight = weight + correction;
            const volumetricWeight = calculateVolumetricWeight();
            const billingWeight = Math.max(packagedWeight, volumetricWeight);
            
            document.getElementById('actualWeight').textContent = weight + 'g';
            document.getElementById('packagedWeight').textContent = packagedWeight + 'g';
            document.getElementById('volumetricWeight').textContent = Math.round(volumetricWeight) + 'g';
            document.getElementById('billingWeight').textContent = Math.round(billingWeight) + 'g';
        }

        function updateDimensionCorrection() {
            const length = parseFloat(document.getElementById('calcLength').value) || 0;
            const width = parseFloat(document.getElementById('calcWidth').value) || 0;
            const height = parseFloat(document.getElementById('calcHeight').value) || 0;
            const category = document.getElementById('calcCategory').value;
            
            // ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è£œæ­£å€¤
            let correction = 2; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            if (category === 'å£Šã‚Œç‰©') correction = 3;
            if (category === 'Electronics') correction = 1.5;
            if (category === 'Books') correction = 1;
            
            const correctedLength = length + correction;
            const correctedWidth = width + correction;
            const correctedHeight = height + correction;
            
            document.getElementById('correctedLength').textContent = correctedLength + 'cm';
            document.getElementById('correctedWidth').textContent = correctedWidth + 'cm';
            document.getElementById('correctedHeight').textContent = correctedHeight + 'cm';
            
            updateWeightCorrection(); // å®¹ç©é‡é‡ã‚‚æ›´æ–°
        }

        function calculateVolumetricWeight() {
            const length = parseFloat(document.getElementById('calcLength').value) || 0;
            const width = parseFloat(document.getElementById('calcWidth').value) || 0;
            const height = parseFloat(document.getElementById('calcHeight').value) || 0;
            const category = document.getElementById('calcCategory').value;
            
            let correction = 2;
            if (category === 'å£Šã‚Œç‰©') correction = 3;
            if (category === 'Electronics') correction = 1.5;
            
            const correctedLength = length + correction;
            const correctedWidth = width + correction;
            const correctedHeight = height + correction;
            
            // å®¹ç©é‡é‡è¨ˆç®—ï¼ˆcmÂ³ / 5000 = gï¼‰
            return (correctedLength * correctedWidth * correctedHeight) / 5000;
        }

        // ===== é€æ–™è¨ˆç®—ï¼ˆæ‹¡å¼µç‰ˆï¼‰ =====
        function calculateShipping() {
            const weight = parseFloat(document.getElementById('calcWeight').value);
            const price = parseFloat(document.getElementById('calcPrice').value);
            const destination = document.getElementById('calcDestination').value;
            const category = document.getElementById('calcCategory').value;
            const marketplace = document.getElementById('calcMarketplace').value;
            
            showAlert('warning', 'é€æ–™ã‚’è¨ˆç®—ä¸­...');
            
            setTimeout(() => {
                // Zoneåˆ¥åŸºæœ¬æ–™é‡‘ï¼ˆæ‹¡å¼µç‰ˆï¼‰
                const zonePrices = {
                    'zone1': 8.50,        // ã‚¢ãƒ¡ãƒªã‚«å›½å†…
                    'zone1-hi-ak': 12.50, // ãƒãƒ¯ã‚¤ãƒ»ã‚¢ãƒ©ã‚¹ã‚«
                    'zone2': 12.20,       // ã‚«ãƒŠãƒ€
                    'zone3a': 16.80,      // ãƒ¡ã‚­ã‚·ã‚³ãƒ»ä¸­å¤®ã‚¢ãƒ¡ãƒªã‚«
                    'zone3b': 35.80,      // å—ç±³
                    'zone4a': 24.80,      // è¥¿æ¬§
                    'zone4b': 28.20,      // æ±æ¬§ãƒ»ãƒ­ã‚·ã‚¢
                    'zone5a': 19.20,      // æ—¥æœ¬ãƒ»éŸ“å›½ãƒ»ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«
                    'zone5b': 16.50,      // ä¸­å›½ãƒ»å°æ¹¾ãƒ»é¦™æ¸¯
                    'zone5c': 21.80,      // æ±å—ã‚¢ã‚¸ã‚¢
                    'zone6': 22.10,       // ã‚ªã‚»ã‚¢ãƒ‹ã‚¢
                    'zone7a': 29.60,      // ä¸­æ±
                    'zone7b': 42.30,      // ã‚¢ãƒ•ãƒªã‚«
                    'zone8': 55.00        // é›¢å³¶ãƒ»ç‰¹åˆ¥åœ°åŸŸ
                };
                
                let baseShipping = zonePrices[destination] || 19.20;
                let weightAdjustment = 0;
                let sizeAdjustment = 0;
                let priceAdjustment = 0;
                
                // é‡é‡èª¿æ•´ï¼ˆæ‹¡å¼µç‰ˆï¼‰
                if (weight > 5000) {
                    weightAdjustment = 20.00;
                } else if (weight > 3000) {
                    weightAdjustment = 12.00;
                } else if (weight > 2000) {
                    weightAdjustment = 8.00;
                } else if (weight > 1000) {
                    weightAdjustment = 5.00;
                } else if (weight > 500) {
                    weightAdjustment = 2.00;
                }
                
                // ã‚µã‚¤ã‚ºèª¿æ•´
                const length = parseFloat(document.getElementById('calcLength').value);
                const width = parseFloat(document.getElementById('calcWidth').value);
                const height = parseFloat(document.getElementById('calcHeight').value);
                const volume = length * width * height;
                if (volume > 100000) { // 100x50x20cmè¶…
                    sizeAdjustment = 15.00;
                } else if (volume > 60000) { // 50x40x30cmè¶…
                    sizeAdjustment = 8.00;
                } else if (volume > 24000) { // 30x20x40cmè¶…
                    sizeAdjustment = 3.00;
                }
                
                // ä¾¡æ ¼èª¿æ•´ï¼ˆæ‹¡å¼µç‰ˆï¼‰
                if (price > 1000) {
                    priceAdjustment = 10.00;
                } else if (price > 500) {
                    priceAdjustment = 5.00;
                } else if (price > 200) {
                    priceAdjustment = 3.00;
                } else if (price > 50) {
                    priceAdjustment = 1.00;
                }
                
                // åˆ†å²æ¡ä»¶ãƒã‚§ãƒƒã‚¯ï¼ˆæ‹¡å¼µç‰ˆï¼‰
                let shippingMethod = 'ã‚¨ã‚³ãƒãƒŸãƒ¼';
                if (category === 'å£Šã‚Œç‰©' || price > 200 || weight > 2000 || category === 'Jewelry' || category === 'Electronics') {
                    shippingMethod = 'ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰';
                    baseShipping *= 1.5; // ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰ã¯1.5å€
                }
                
                // åœ°åŸŸåˆ¥è¿½åŠ æ–™é‡‘
                let regionAdjustment = 0;
                if (destination.includes('zone7') || destination.includes('zone8')) {
                    regionAdjustment = 5.00; // é«˜ã‚³ã‚¹ãƒˆåœ°åŸŸ
                }
                
                const totalShipping = baseShipping + weightAdjustment + sizeAdjustment + priceAdjustment + regionAdjustment;
                
                // æ¨å¥¨é…é€ä¼šç¤¾ã®æ±ºå®š
                let recommendedCarrier = '';
                let recommendedReason = '';
                
                if (destination === 'zone5a') {
                    recommendedCarrier = 'æ—¥æœ¬éƒµä¾¿ EMS';
                    recommendedReason = 'æœ€å®‰ãƒ»æœ€é€Ÿ';
                } else if (destination.includes('zone1')) {
                    recommendedCarrier = 'USPS Priority Mail';
                    recommendedReason = 'å›½å†…æœ€å®‰';
                } else if (destination.includes('zone4')) {
                    recommendedCarrier = 'DHL Express';
                    recommendedReason = 'æ¬§å·æœ€é€Ÿ';
                } else if (destination.includes('zone7') || destination.includes('zone8')) {
                    recommendedCarrier = 'DHL Express';
                    recommendedReason = 'é«˜ãƒªã‚¹ã‚¯åœ°åŸŸå¯¾å¿œ';
                } else {
                    recommendedCarrier = 'FedEx International';
                    recommendedReason = 'ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½';
                }
                
                // çµæœè¡¨ç¤º
                document.getElementById('resultGrid').innerHTML = `
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">åŸºæœ¬é€æ–™</div>
                        <div class="shipping__result-value">${baseShipping.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">é‡é‡èª¿æ•´</div>
                        <div class="shipping__result-value">${weightAdjustment.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">ã‚µã‚¤ã‚ºèª¿æ•´</div>
                        <div class="shipping__result-value">${sizeAdjustment.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">ä¾¡æ ¼èª¿æ•´</div>
                        <div class="shipping__result-value">${priceAdjustment.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">åœ°åŸŸèª¿æ•´</div>
                        <div class="shipping__result-value">${regionAdjustment.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">é…é€æ–¹æ³•</div>
                        <div class="shipping__result-value">${shippingMethod}</div>
                    </div>
                    <div class="shipping__result-item shipping__result-item--total">
                        <div class="shipping__result-label">åˆè¨ˆé€æ–™</div>
                        <div class="shipping__result-value shipping__result-value--total">${totalShipping.toFixed(2)}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">æ¨å¥¨é…é€ä¼šç¤¾</div>
                        <div class="shipping__result-value">${recommendedCarrier}</div>
                    </div>
                    <div class="shipping__result-item">
                        <div class="shipping__result-label">é…é€æ—¥æ•°</div>
                        <div class="shipping__result-value">${shippingMethod === 'ã‚¨ã‚¯ã‚¹ãƒšãƒ‡ã‚£ãƒ†ãƒƒãƒ‰' ? '2-5æ—¥' : '5-12æ—¥'}</div>
                    </div>
                `;
                
                // é…é€ä¼šç¤¾æ¯”è¼ƒè¡¨ã®æ›´æ–°
                updateComparisonTable(destination, weight, totalShipping);
                
                document.getElementById('calculationResult').style.display = 'block';
                showAlert('success', 'é€æ–™è¨ˆç®—ãŒå®Œäº†ã—ã¾ã—ãŸã€‚');
            }, 1500);
        }

        function updateComparisonTable(destination, weight, calculatedTotal) {
            const tbody = document.getElementById('comparisonTableBody');
            if (!tbody) return;
            
            // Zoneåˆ¥é…é€ä¼šç¤¾ã¨æ–™é‡‘ã®è¨­å®š
            let comparisonData = [];
            
            if (destination === 'zone5a') {
                comparisonData = [
                    {
                        name: 'æ—¥æœ¬éƒµä¾¿ EMS',
                        economy: calculatedTotal * 0.92,
                        expedited: calculatedTotal * 1.4,
                        days: '3-6æ—¥',
                        recommendation: 'â— æœ€å®‰ãƒ»æœ€é€Ÿ',
                        color: 'var(--color-success)'
                    },
                    {
                        name: 'FedEx International',
                        economy: calculatedTotal * 1.15,
                        expedited: calculatedTotal * 1.6,
                        days: '2-4æ—¥',
                        recommendation: 'â—‹ é«˜é€Ÿ',
                        color: 'var(--color-warning)'
                    },
                    {
                        name: 'DHL Express',
                        economy: calculatedTotal * 1.35,
                        expedited: calculatedTotal * 1.8,
                        days: '1-3æ—¥',
                        recommendation: 'â— æœ€é€Ÿ',
                        color: 'var(--color-info)'
                    },
                    {
                        name: 'UPS Worldwide',
                        economy: calculatedTotal * 1.25,
                        expedited: calculatedTotal * 1.7,
                        days: '3-5æ—¥',
                        recommendation: 'â–³ å¹³å‡çš„',
                        color: 'var(--text-secondary)'
                    },
                    {
                        name: 'CPASS + FedEx',
                        economy: calculatedTotal * 1.05,
                        expedited: calculatedTotal * 1.5,
                        days: '4-7æ—¥',
                        recommendation: 'â—‹ å‰²å¼•ç‡é«˜',
                        color: 'var(--color-success)'
                    }
                ];
            } else if (destination.includes('zone1')) {
                comparisonData = [
                    {
                        name: 'USPS Priority Mail',
                        economy: calculatedTotal * 0.75,
                        expedited: calculatedTotal * 1.2,
                        days: '2-3æ—¥',
                        recommendation: 'â— å›½å†…æœ€å®‰',
                        color: 'var(--color-success)'
                    },
                    {
                        name: 'FedEx Ground',
                        economy: calculatedTotal * 1.1,
                        expedited: calculatedTotal * 1.4,
                        days: '3-7æ—¥',
                        recommendation: 'â—‹ ãƒãƒ©ãƒ³ã‚¹è‰¯',
                        color: 'var(--color-warning)'
                    },
                    {
                        name: 'UPS Ground',
                        economy: calculatedTotal * 1.15,
                        expedited: calculatedTotal * 1.5,
                        days: '3-7æ—¥',
                        recommendation: 'â–³ å¹³å‡çš„',
                        color: 'var(--text-secondary)'
                    }
                ];
            } else {
                // ãã®ä»–ã®åœ°åŸŸç”¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¯”è¼ƒ
                comparisonData = [
                    {
                        name: 'FedEx International',
                        economy: calculatedTotal * 1.0,
                        expedited: calculatedTotal * 1.5,
                        days: '3-7æ—¥',
                        recommendation: 'â—‹ æ¨™æº–',
                        color: 'var(--color-warning)'
                    },
                    {
                        name: 'DHL Express',
                        economy: calculatedTotal * 1.2,
                        expedited: calculatedTotal * 1.7,
                        days: '2-5æ—¥',
                        recommendation: 'â— é«˜é€Ÿ',
                        color: 'var(--color-info)'
                    },
                    {
                        name: 'UPS Worldwide',
                        economy: calculatedTotal * 1.1,
                        expedited: calculatedTotal * 1.6,
                        days: '4-8æ—¥',
                        recommendation: 'â–³ å¹³å‡çš„',
                        color: 'var(--text-secondary)'
                    }
                ];
            }
            
            tbody.innerHTML = comparisonData.map((carrier, index) => `
                <tr ${index === 0 ? 'style="background: rgba(16, 185, 129, 0.1);"' : ''}>
                    <td><strong>${carrier.name}</strong></td>
                    <td><strong>${carrier.economy.toFixed(2)}</strong></td>
                    <td>${carrier.expedited.toFixed(2)}</td>
                    <td>${carrier.days}</td>
                    <td><span style="color: ${carrier.color};">${carrier.recommendation}</span></td>
                </tr>
            `).join('');
        }

        // ===== é‡é‡ãƒ»ã‚µã‚¤ã‚ºè£œæ­£è¨­å®šæ©Ÿèƒ½ =====
        function resetCorrectionDefaults() {
            if (confirm('è£œæ­£è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«æˆ»ã™å‡¦ç†
                document.getElementById('basePackagingWeight').value = '150';
                document.getElementById('baseSizeCorrection').value = '2';
                document.getElementById('volumetricDivisor').value = '5000';
                
                showAlert('success', 'è£œæ­£è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«æˆ»ã—ã¾ã—ãŸã€‚');
            }
        }

        function saveCorrectionSettings() {
            showAlert('warning', 'è£œæ­£è¨­å®šã‚’ä¿å­˜ä¸­...');
            
            setTimeout(() => {
                showAlert('success', 'é‡é‡ãƒ»ã‚µã‚¤ã‚ºè£œæ­£è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚æ–°ã—ã„è¨­å®šã¯æ¬¡å›è¨ˆç®—æ™‚ã‹ã‚‰é©ç”¨ã•ã‚Œã¾ã™ã€‚');
                updateLastUpdateTime();
            }, 1500);
        }

        // ===== ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘æ©Ÿèƒ½ =====
        function updateFuelSurcharge() {
            showAlert('warning', 'æœ€æ–°ã®ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ç‡ã‚’APIå–å¾—ä¸­...');
            
            setTimeout(() => showAlert('info', 'FedExç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIå–å¾—å®Œäº†...'), 1000);
            setTimeout(() => showAlert('info', 'DHLç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIå–å¾—å®Œäº†...'), 2000);
            setTimeout(() => showAlert('info', 'UPSç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIå–å¾—å®Œäº†...'), 2500);
            setTimeout(() => showAlert('info', 'æ—¥æœ¬éƒµä¾¿ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸APIå–å¾—å®Œäº†...'), 3000);
            
            setTimeout(() => {
                showAlert('success', 'å…¨é…é€ä¼šç¤¾ã®ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ç‡ã‚’APIçµŒç”±ã§æœ€æ–°å€¤ã«æ›´æ–°ã—ã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 3500);
        }

        function saveSurchargeSettings() {
            showAlert('warning', 'ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘è¨­å®šã‚’ä¿å­˜ä¸­...');
            
            setTimeout(() => {
                showAlert('success', 'ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 1500);
        }

        // ===== ãã®ä»–ã®æ©Ÿèƒ½ =====
        function refreshData() {
            showAlert('warning', 'ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ä¸­...');
            setTimeout(() => {
                updateLastUpdateTime();
                showAlert('success', 'ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãŒå®Œäº†ã—ã¾ã—ãŸã€‚');
            }, 2000);
        }

        function openCalculator() {
            document.getElementById('calculator').scrollIntoView({ behavior: 'smooth' });
        }

        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('last-update-time').textContent = timeString;
        }

        // ===== åœ°åŸŸåˆ¥æ–™é‡‘è¡¨æ©Ÿèƒ½ =====
        function printRateTable() {
            window.print();
            showAlert('info', 'å°åˆ·ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ãã¾ã—ãŸã€‚');
        }

        function exportRateTable(format) {
            const formatNames = {
                'csv': 'CSV',
                'excel': 'Excel'
            };
            showAlert('success', `æ–™é‡‘è¡¨ã‚’${formatNames[format]}å½¢å¼ã§å‡ºåŠ›ã—ã¾ã—ãŸã€‚`);
        }

        function updateRateTable() {
            showAlert('warning', 'APIé€£æºã«ã‚ˆã‚Šæœ€æ–°ã®æ–™é‡‘æƒ…å ±ã‚’å–å¾—ä¸­...');
            
            setTimeout(() => showAlert('info', 'FedEx APIé€£æºå®Œäº†...'), 1000);
            setTimeout(() => showAlert('info', 'DHL APIé€£æºå®Œäº†...'), 2000);
            setTimeout(() => showAlert('info', 'UPS APIé€£æºå®Œäº†...'), 2500);
            setTimeout(() => showAlert('info', 'æ—¥æœ¬éƒµä¾¿APIé€£æºå®Œäº†...'), 3000);
            setTimeout(() => showAlert('info', 'USPS APIé€£æºå®Œäº†...'), 3500);
            
            setTimeout(() => {
                showAlert('success', 'å…¨18é…é€ä¼šç¤¾ã®æ–™é‡‘è¡¨ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸ã‚‚APIè‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 4000);
        }

        // ===== åˆæœŸåŒ– =====
        document.addEventListener('DOMContentLoaded', function() {
            // åˆæœŸè£œæ­£å€¤è¨ˆç®—
            updateDimensionCorrection();
            updateWeightCorrection();
            
            // ã‚«ãƒ†ã‚´ãƒªãƒ¼å¤‰æ›´æ™‚ã®è‡ªå‹•è£œæ­£
            document.getElementById('calcCategory').addEventListener('change', function() {
                updateDimensionCorrection();
                updateWeightCorrection();
            });
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¯ãƒªãƒƒã‚¯å¤–ã—é–‰ã˜
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === overlay) {
                        overlay.classList.remove('modal-overlay--active');
                    }
                });
            });
            
            showAlert('success', 'é€æ–™è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå®Œå…¨çµ±åˆç‰ˆ - 18é…é€ä¼šç¤¾+ãƒ¢ãƒ¼ãƒ«è¨­å®šå¯¾å¿œï¼‰ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸã€‚');
        });
    </script>
    <script>
        // ===== ç™»éŒ²æ¸ˆã¿é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆ18ç¤¾ï¼‰ =====
        const registeredCarriers = [
            // FedExé–¢é€£
            { id: 'fedex-normal', name: 'FedExï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-plane', status: 'active', apiEnabled: true },
            { id: 'cpass-fedex', name: 'CPA SS + FedEx', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: false },
            { id: 'eloji-fedex', name: 'Eloji + FedEx', icon: 'fas fa-box', status: 'active', apiEnabled: false },
            
            // DHLé–¢é€£
            { id: 'dhl-normal', name: 'DHLï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-shipping-fast', status: 'active', apiEnabled: true },
            { id: 'cpass-dhl', name: 'CPA SS + DHL', icon: 'fas fa-shipping-fast', status: 'pending', apiEnabled: false },
            { id: 'eloji-dhl', name: 'Eloji + DHL', icon: 'fas fa-box', status: 'active', apiEnabled: false },
            
            // UPSé–¢é€£
            { id: 'ups-normal', name: 'UPSï¼ˆé€šå¸¸ï¼‰', icon: 'fas fa-truck', status: 'pending', apiEnabled: true },
            { id: 'eloji-ups', name: 'Eloji + UPS', icon: 'fas fa-box', status: 'pending', apiEnabled: false },
            
            // æ—¥æœ¬éƒµä¾¿é–¢é€£
            { id: 'jppost-ems', name: 'æ—¥æœ¬éƒµä¾¿ EMS', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: true },
            { id: 'jppost-small', name: 'æ—¥æœ¬éƒµä¾¿ å°å‹åŒ…è£…ç‰©', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
            { id: 'jppost-registered', name: 'æ—¥æœ¬éƒµä¾¿ æ›¸ç•™', icon: 'fas fa-mail-bulk', status: 'active', apiEnabled: false },
            
            // eBayé–¢é€£
            { id: 'cpass-ebay', name: 'CPA SS + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'active', apiEnabled: false },
            { id: 'eloji-ebay', name: 'Eloji + eBayã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯', icon: 'fab fa-ebay', status: 'pending', apiEnabled: false },
            
            // USPSé–¢é€£
            { id: 'usps-priority', name: 'USPS Priority Mail', icon: 'fas fa-envelope', status: 'pending', apiEnabled: true },
            { id: 'usps-express', name: 'USPS Priority Express', icon: 'fas fa-envelope', status: 'inactive', apiEnabled: false },
            
            // ãã®ä»–
            { id: 'tnt-express', name: 'TNT Express', icon: 'fas fa-shipping-fast', status: 'inactive', apiEnabled: false },
            { id: 'aramex', name: 'Aramex', icon: 'fas fa-globe', status: 'inactive', apiEnabled: false },
            { id: 'shopee-logistics', name: 'Shopee Logistics', icon: 'fas fa-shopping-cart', status: 'pending', apiEnabled: false }
        ];
        
        // ãƒ¢ãƒ¼ãƒ«åˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
        const marketplaceDefaults = {
            'shopify': ['fedex-normal', 'dhl-normal', 'ups-normal', 'jppost-ems'],
            'ebay': ['cpass-ebay', 'fedex-normal', 'dhl-normal', 'jppost-small'],
            'amazon': ['fedex-normal', 'dhl-normal', 'jppost-ems'],
            'etsy': ['jppost-ems', 'jppost-small', 'fedex-normal'],
            'mercari': ['jppost-ems', 'jppost-small'],
            'yahoo': ['jppost-ems', 'fedex-normal'],
            'shopee': ['shopee-logistics', 'dhl-normal', 'fedex-normal'],
            'rakuten-global': ['jppost-ems', 'fedex-normal', 'dhl-normal']
        };
        
        let marketplaceSettings = {};
        
        // ===== åˆæœŸåŒ– =====
        function initializeMarketplaceShipping() {
            // å„ãƒ¢ãƒ¼ãƒ«ã®é…é€æ–¹æ³•ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
            Object.keys(marketplaceDefaults).forEach(marketplace => {
                generateCarrierList(marketplace);
                updateCarrierCounts(marketplace);
            });
        }
        
        // ===== é…é€ä¼šç¤¾ãƒªã‚¹ãƒˆç”Ÿæˆ =====
        function generateCarrierList(marketplace) {
            const container = document.getElementById(`${marketplace}-carrier-list`);
            if (!container) return;
        
            const enabledCarriers = marketplaceDefaults[marketplace] || [];
            
            container.innerHTML = registeredCarriers.map(carrier => {
                const isEnabled = enabledCarriers.includes(carrier.id);
                const statusIcon = getStatusIcon(carrier.status);
                const apiIndicator = carrier.apiEnabled ? '<i class="fas fa-wifi" style="color: var(--color-success); font-size: 10px;" title="APIå¯¾å¿œ"></i>' : '';
                
                return `
                    <div class="shipping__method-item" data-carrier-id="${carrier.id}">
                        <span style="display: flex; align-items: center; gap: var(--space-sm);">
                            <i class="${carrier.icon}" style="color: var(--color-primary);"></i>
                            <span>${carrier.name}</span>
                            ${statusIcon}
                            ${apiIndicator}
                        </span>
                        <div class="shipping__method-toggle ${isEnabled ? 'shipping__method-toggle--active' : ''}" 
                             onclick="toggleShippingMethod(this, '${marketplace}', '${carrier.id}')">
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ===== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¢ã‚¤ã‚³ãƒ³å–å¾— =====
        function getStatusIcon(status) {
            const icons = {
                'active': '<i class="fas fa-check-circle" style="color: var(--color-success); font-size: 10px;" title="ç¨¼åƒä¸­"></i>',
                'pending': '<i class="fas fa-clock" style="color: var(--color-warning); font-size: 10px;" title="è¨­å®šä¸­"></i>',
                'inactive': '<i class="fas fa-times-circle" style="color: var(--text-secondary); font-size: 10px;" title="æœªè¨­å®š"></i>'
            };
            return icons[status] || '';
        }
        
        // ===== é…é€æ–¹æ³•ãƒˆã‚°ãƒ« =====
        function toggleShippingMethod(toggleElement, marketplace, carrierId) {
            toggleElement.classList.toggle('shipping__method-toggle--active');
            
            if (!marketplaceSettings[marketplace]) {
                marketplaceSettings[marketplace] = {};
            }
            
            const isActive = toggleElement.classList.contains('shipping__method-toggle--active');
            marketplaceSettings[marketplace][carrierId] = isActive;
            
            updateCarrierCounts(marketplace);
            
            const carrierName = registeredCarriers.find(c => c.id === carrierId)?.name;
            showAlert('info', `${marketplace}ã§${carrierName}ã‚’${isActive ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}ã«ã—ã¾ã—ãŸã€‚`);
        }
        
        // ===== é…é€ä¼šç¤¾æ•°æ›´æ–° =====
        function updateCarrierCounts(marketplace) {
            const activeElement = document.getElementById(`${marketplace}-active-count`);
            const totalElement = document.getElementById(`${marketplace}-total-count`);
            
            if (!activeElement || !totalElement) return;
            
            const container = document.getElementById(`${marketplace}-carrier-list`);
            const activeToggles = container?.querySelectorAll('.shipping__method-toggle--active').length || 0;
            
            activeElement.textContent = activeToggles;
            totalElement.textContent = registeredCarriers.length;
        }
        
        // ===== é…é€ä¼šç¤¾ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ =====
        function filterCarriers(marketplace, searchTerm) {
            const container = document.getElementById(`${marketplace}-carrier-list`);
            if (!container) return;
            
            const items = container.querySelectorAll('.shipping__method-item');
            const term = searchTerm.toLowerCase();
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                const shouldShow = !term || text.includes(term);
                item.style.display = shouldShow ? 'flex' : 'none';
            });
        }
        
        // ===== é…é€ä¼šç¤¾ãƒªã‚¹ãƒˆæ›´æ–° =====
        function refreshCarrierList() {
            showAlert('warning', 'é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ä¸­...');
            
            setTimeout(() => {
                // å„ãƒ¢ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆã‚’å†ç”Ÿæˆ
                Object.keys(marketplaceDefaults).forEach(marketplace => {
                    generateCarrierList(marketplace);
                    updateCarrierCounts(marketplace);
                });
                
                showAlert('success', '18ç¤¾ã®é…é€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’æœ€æ–°æƒ…å ±ã«æ›´æ–°ã—ã¾ã—ãŸã€‚æ–°è¦è¿½åŠ åˆ†ã‚‚åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚');
                updateLastUpdateTime();
            }, 2000);
        }
        
        // ===== é…é€ä¼šç¤¾ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ« =====
        function openCarrierMappingModal() {
            showAlert('info', 'é…é€ä¼šç¤¾ãƒãƒƒãƒ”ãƒ³ã‚°è¡¨ç¤ºæ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚');
        }
        
        // ===== ä¸€æ‹¬æ›´æ–° =====
        function bulkCarrierUpdate() {
            showAlert('warning', 'å…¨ãƒ¢ãƒ¼ãƒ«ã®é…é€è¨­å®šã‚’ä¸€æ‹¬æ›´æ–°ä¸­...');
            
            setTimeout(() => {
                showAlert('success', 'å…¨9ãƒ¢ãƒ¼ãƒ«ã®é…é€æ–¹æ³•è¨­å®šã‚’ä¸€æ‹¬æ›´æ–°ã—ã¾ã—ãŸã€‚');
                updateLastUpdateTime();
            }, 3000);
        }
        
        // ===== è¨­å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ =====
        function exportCarrierSettings() {
            const settings = {
                carriers: registeredCarriers,
                marketplaceSettings: marketplaceSettings,
                defaults: marketplaceDefaults,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'shipping-settings-export.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('success', 'é…é€è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚');
        }
        
        // ===== åˆæœŸåŒ–å®Ÿè¡Œ =====
        document.addEventListener('DOMContentLoaded', function() {
            initializeMarketplaceShipping();
        });
        </script>
</body>
</html>