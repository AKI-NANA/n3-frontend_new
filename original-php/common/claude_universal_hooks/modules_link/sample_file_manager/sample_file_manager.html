<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAIDS å®Ÿå‹•ä½œãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ« - å®Œå…¨ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .status-card.online {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }
        
        .status-card.offline {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }
        
        .status-card.testing {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
            animation: pulse 2s infinite;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .section-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #2ecc71; color: white; }
        .btn-warning { background: #f39c12; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .test-result {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .result-success { border-left: 4px solid #2ecc71; }
        .result-error { border-left: 4px solid #e74c3c; }
        .result-info { border-left: 4px solid #3498db; }
        .result-warning { border-left: 4px solid #f39c12; }
        
        .file-drop-zone {
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-drop-zone:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .file-drop-zone.dragover {
            border-color: #2ecc71;
            background: #e8f5e8;
        }
        
        .file-list {
            margin-top: 15px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 5px 0;
        }
        
        .api-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .hooks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .hook-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .hook-item:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        
        .hook-item.testing {
            border-color: #f39c12;
            background: #fff3cd;
        }
        
        .hook-item.success {
            border-color: #2ecc71;
            background: #d4edda;
        }
        
        .hook-item.error {
            border-color: #e74c3c;
            background: #f8d7da;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .real-time-log {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 250px;
            overflow-y: auto;
            margin: 15px 0;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 0;
        }
        
        .log-timestamp {
            color: #95a5a6;
        }
        
        .log-level-info { color: #3498db; }
        .log-level-success { color: #2ecc71; }
        .log-level-warning { color: #f39c12; }
        .log-level-error { color: #e74c3c; }
        
        .stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .api-form { grid-template-columns: 1fr; }
            .hooks-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
        }
    </style>
<script>
// CAIDS error_handling Hook

// CAIDS ã‚¨ãƒ©ãƒ¼å‡¦ç†Hook - å®Œå…¨å®Ÿè£…
window.CAIDS_ERROR_HANDLER = {
    isActive: true,
    errorCount: 0,
    errorHistory: [],
    
    initialize: function() {
        this.setupGlobalErrorHandler();
        this.setupUnhandledPromiseRejection();
        this.setupNetworkErrorHandler();
        console.log('âš ï¸ CAIDS ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨åˆæœŸåŒ–');
    },
    
    setupGlobalErrorHandler: function() {
        window.addEventListener('error', (event) => {
            this.handleError({
                type: 'JavaScript Error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error?.stack
            });
        });
    },
    
    setupUnhandledPromiseRejection: function() {
        window.addEventListener('unhandledrejection', (event) => {
            this.handleError({
                type: 'Unhandled Promise Rejection',
                message: event.reason?.message || String(event.reason),
                stack: event.reason?.stack
            });
        });
    },
    
    setupNetworkErrorHandler: function() {
        const originalFetch = window.fetch;
        window.fetch = async function(...args) {
            try {
                const response = await originalFetch.apply(this, args);
                if (!response.ok) {
                    window.CAIDS_ERROR_HANDLER.handleError({
                        type: 'Network Error',
                        message: `HTTP ${response.status}: ${response.statusText}`,
                        url: args[0]
                    });
                }
                return response;
            } catch (error) {
                window.CAIDS_ERROR_HANDLER.handleError({
                    type: 'Network Fetch Error',
                    message: error.message,
                    url: args[0]
                });
                throw error;
            }
        };
    },
    
    handleError: function(errorInfo) {
        this.errorCount++;
        this.errorHistory.push({...errorInfo, timestamp: new Date().toISOString()});
        
        console.error('ğŸš¨ CAIDS Error Handler:', errorInfo);
        this.showErrorNotification(errorInfo);
        this.reportError(errorInfo);
    },
    
    showErrorNotification: function(errorInfo) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = `
            position: fixed; top: 10px; right: 10px; z-index: 999999;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white; padding: 15px 20px; border-radius: 8px;
            max-width: 350px; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            border: 2px solid #ff6666; animation: caids-error-shake 0.5s ease-in-out;
        `;
        errorDiv.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 18px;">ğŸš¨</span>
                <div>
                    <strong>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong><br>
                    <small style="opacity: 0.9;">${errorInfo.type}: ${errorInfo.message}</small>
                </div>
            </div>
        `;
        
        // CSS Animation
        if (!document.getElementById('caids-error-styles')) {
            const style = document.createElement('style');
            style.id = 'caids-error-styles';
            style.textContent = `
                @keyframes caids-error-shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(errorDiv);
        setTimeout(() => errorDiv.remove(), 7000);
    },
    
    reportError: function(errorInfo) {
        // ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»é€ä¿¡ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
        const report = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            errorCount: this.errorCount,
            sessionId: this.getSessionId(),
            ...errorInfo
        };
        
        console.log('ğŸ“‹ CAIDS Error Report:', report);
        localStorage.setItem('caids_last_error', JSON.stringify(report));
    },
    
    getSessionId: function() {
        let sessionId = sessionStorage.getItem('caids_session_id');
        if (!sessionId) {
            sessionId = 'caids_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('caids_session_id', sessionId);
        }
        return sessionId;
    },
    
    getErrorStats: function() {
        return {
            totalErrors: this.errorCount,
            recentErrors: this.errorHistory.slice(-10),
            sessionId: this.getSessionId()
        };
    }
};

window.CAIDS_ERROR_HANDLER.initialize();

</script>
<script>
// CAIDS loading_management Hook

// CAIDS ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç®¡ç†Hook - å®Œå…¨å®Ÿè£…
window.CAIDS_LOADING = {
    isActive: false,
    loadingElements: new Map(),
    defaultMessages: {
        'fetch': 'ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...',
        'upload': 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...',
        'process': 'å‡¦ç†ä¸­...',
        'save': 'ä¿å­˜ä¸­...',
        'delete': 'å‰Šé™¤ä¸­...',
        'search': 'æ¤œç´¢ä¸­...'
    },
    
    show: function(message = 'èª­ã¿è¾¼ã¿ä¸­...', options = {}) {
        const loadingId = 'caids-loading-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        const {
            target = null,
            type = 'default',
            showProgress = false,
            timeout = 30000
        } = options;
        
        const loadingDiv = document.createElement('div');
        loadingDiv.id = loadingId;
        loadingDiv.className = 'caids-loading-overlay';
        
        const isFullscreen = !target;
        loadingDiv.style.cssText = `
            position: ${isFullscreen ? 'fixed' : 'absolute'};
            top: ${isFullscreen ? '0' : '50%'}; left: ${isFullscreen ? '0' : '50%'};
            ${isFullscreen ? 'width: 100%; height: 100%;' : 'transform: translate(-50%, -50%);'}
            background: ${isFullscreen ? 'rgba(0,0,0,0.7)' : 'rgba(0,0,0,0.8)'};
            z-index: 999999; display: flex; align-items: center; justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        `;
        
        const contentDiv = document.createElement('div');
        contentDiv.style.cssText = `
            background: white; padding: 30px 40px; border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex; align-items: center; gap: 20px;
            max-width: 400px; text-align: center;
        `;
        
        const spinnerType = this.getSpinnerByType(type);
        contentDiv.innerHTML = `
            <div class="caids-spinner">${spinnerType}</div>
            <div>
                <div style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 8px;">
                    ${message}
                </div>
                ${showProgress ? '<div class="caids-progress-bar"><div class="caids-progress-fill"></div></div>' : ''}
                <div style="font-size: 12px; color: #666;">
                    ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„...
                </div>
            </div>
        `;
        
        // CSS stylesè¿½åŠ 
        this.addLoadingStyles();
        
        if (target) {
            target.style.position = 'relative';
            target.appendChild(loadingDiv);
        } else {
            document.body.appendChild(loadingDiv);
        }
        
        // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
        const timeoutId = setTimeout(() => {
            this.hide(loadingId);
            console.warn('âš ï¸ CAIDS Loading timeout:', message);
        }, timeout);
        
        this.loadingElements.set(loadingId, {
            element: loadingDiv,
            message,
            startTime: Date.now(),
            timeoutId,
            target
        });
        
        this.isActive = true;
        console.log('â³ CAIDS Loadingé–‹å§‹:', message, `[${loadingId}]`);
        
        return loadingId;
    },
    
    hide: function(loadingId = null) {
        if (loadingId) {
            const loading = this.loadingElements.get(loadingId);
            if (loading) {
                loading.element.remove();
                clearTimeout(loading.timeoutId);
                this.loadingElements.delete(loadingId);
                
                const duration = Date.now() - loading.startTime;
                console.log('âœ… CAIDS Loadingçµ‚äº†:', loading.message, `(${duration}ms)`);
            }
        } else {
            // å…¨ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å‰Šé™¤
            this.loadingElements.forEach((loading, id) => {
                loading.element.remove();
                clearTimeout(loading.timeoutId);
            });
            this.loadingElements.clear();
            console.log('âœ… CAIDS Loadingå…¨çµ‚äº†');
        }
        
        this.isActive = this.loadingElements.size > 0;
    },
    
    updateMessage: function(loadingId, newMessage) {
        const loading = this.loadingElements.get(loadingId);
        if (loading) {
            const messageDiv = loading.element.querySelector('div > div');
            if (messageDiv) {
                messageDiv.textContent = newMessage;
            }
        }
    },
    
    getSpinnerByType: function(type) {
        const spinners = {
            'default': '<div class="caids-spinner-circle"></div>',
            'dots': '<div class="caids-spinner-dots"><span></span><span></span><span></span></div>',
            'bars': '<div class="caids-spinner-bars"><span></span><span></span><span></span><span></span></div>',
            'pulse': '<div class="caids-spinner-pulse"></div>'
        };
        return spinners[type] || spinners['default'];
    },
    
    addLoadingStyles: function() {
        if (document.getElementById('caids-loading-styles')) return;
        
        const style = document.createElement('style');
        style.id = 'caids-loading-styles';
        style.textContent = `
            .caids-spinner-circle {
                width: 24px; height: 24px; border: 3px solid #f3f3f3;
                border-top: 3px solid #007bff; border-radius: 50%;
                animation: caids-spin 1s linear infinite;
            }
            
            .caids-spinner-dots {
                display: flex; gap: 4px;
            }
            .caids-spinner-dots span {
                width: 8px; height: 8px; background: #007bff;
                border-radius: 50%; animation: caids-dots 1.4s ease-in-out infinite both;
            }
            .caids-spinner-dots span:nth-child(1) { animation-delay: -0.32s; }
            .caids-spinner-dots span:nth-child(2) { animation-delay: -0.16s; }
            
            .caids-progress-bar {
                width: 200px; height: 4px; background: #e9ecef;
                border-radius: 2px; overflow: hidden; margin: 10px 0;
            }
            .caids-progress-fill {
                height: 100%; background: linear-gradient(90deg, #007bff, #28a745);
                animation: caids-progress 2s ease-in-out infinite;
            }
            
            @keyframes caids-spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            @keyframes caids-dots {
                0%, 80%, 100% { transform: scale(0); }
                40% { transform: scale(1); }
            }
            
            @keyframes caids-progress {
                0% { transform: translateX(-100%); }
                50% { transform: translateX(0%); }
                100% { transform: translateX(100%); }
            }
        `;
        document.head.appendChild(style);
    },
    
    wrapAsyncOperation: async function(operation, message = 'å‡¦ç†ä¸­...', options = {}) {
        const loadingId = this.show(message, options);
        try {
            const result = await operation();
            this.hide(loadingId);
            return result;
        } catch (error) {
            this.hide(loadingId);
            throw error;
        }
    },
    
    // APIå‘¼ã³å‡ºã—è‡ªå‹•ãƒ©ãƒƒãƒ”ãƒ³ã‚°
    wrapFetchAPI: function() {
        if (window.caids_fetch_wrapped) return;
        
        const originalFetch = window.fetch;
        window.fetch = function(url, options = {}) {
            const message = window.CAIDS_LOADING.getLoadingMessageForURL(url);
            const loadingId = window.CAIDS_LOADING.show(message, {type: 'default'});
            
            return originalFetch.call(this, url, options).finally(() => {
                window.CAIDS_LOADING.hide(loadingId);
            });
        };
        
        window.caids_fetch_wrapped = true;
        console.log('ğŸ”— CAIDS Fetch API auto-wrapping enabled');
    },
    
    getLoadingMessageForURL: function(url) {
        if (typeof url === 'string') {
            if (url.includes('/api/')) return 'APIé€šä¿¡ä¸­...';
            if (url.includes('upload')) return 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...';
            if (url.includes('download')) return 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­...';
            if (url.includes('search')) return 'æ¤œç´¢ä¸­...';
        }
        return 'ãƒ‡ãƒ¼ã‚¿é€šä¿¡ä¸­...';
    }
};

// è‡ªå‹•åˆæœŸåŒ–
window.CAIDS_LOADING.wrapFetchAPI();
console.log('â³ CAIDS ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨åˆæœŸåŒ–');

</script>
<script>
// CAIDS user_feedback Hook
// CAIDS user_feedback Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_feedback Hook loaded');
</script>
<script>
// CAIDS ajax_integration Hook
// CAIDS ajax_integration Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… ajax_integration Hook loaded');
</script>
<script>
// CAIDS character_limit Hook
// CAIDS character_limit Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_limit Hook loaded');
</script>
<script>
// CAIDS development_control Hook
// CAIDS development_control Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… development_control Hook loaded');
</script>
<script>
// CAIDS natural_explanation Hook
// CAIDS natural_explanation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… natural_explanation Hook loaded');
</script>
<script>
// CAIDS character_monitoring Hook
// CAIDS character_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_monitoring Hook loaded');
</script>
<script>
// CAIDS emergency_accumulation Hook
// CAIDS emergency_accumulation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… emergency_accumulation Hook loaded');
</script>
<script>
// CAIDS processing_capacity_monitoring Hook
// CAIDS processing_capacity_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… processing_capacity_monitoring Hook loaded');
</script>
<script>
// CAIDS pre_analysis_enforcement Hook
// CAIDS pre_analysis_enforcement Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… pre_analysis_enforcement Hook loaded');
</script>
<script>
// CAIDS user_approval_required Hook
// CAIDS user_approval_required Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_approval_required Hook loaded');
</script>
<script>
// CAIDS timeout_management Hook
// CAIDS timeout_management Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… timeout_management Hook loaded');
</script>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <h1>ğŸš€ CAIDS å®Ÿå‹•ä½œãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ« - å®Œå…¨ç‰ˆ</h1>
            <p>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»Hooksãƒ»AIé€£æºã®å®Œå…¨ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ </p>
            
            <div class="status-grid">
                <div class="status-card" id="backend-status">
                    <div>ğŸ”§ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API</div>
                    <div id="backend-status-text">ç¢ºèªä¸­...</div>
                </div>
                <div class="status-card" id="database-status">
                    <div>ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</div>
                    <div id="database-status-text">ç¢ºèªä¸­...</div>
                </div>
                <div class="status-card" id="hooks-status">
                    <div>ğŸª Hooksã‚·ã‚¹ãƒ†ãƒ </div>
                    <div id="hooks-status-text">13å€‹ç¨¼åƒä¸­</div>
                </div>
                <div class="status-card" id="ai-status">
                    <div>ğŸ¤– ãƒ­ãƒ¼ã‚«ãƒ«AI</div>
                    <div id="ai-status-text">ç¢ºèªä¸­...</div>
                </div>
                <div class="status-card" id="websocket-status">
                    <div>ğŸ”„ WebSocket</div>
                    <div id="websocket-status-text">ç¢ºèªä¸­...</div>
                </div>
            </div>
        </div>

        <!-- ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ“ å®Ÿãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="testFileUpload()">ğŸ“¤ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testFileDownload()">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testFileList()">ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—</button>
                <button class="btn btn-danger" onclick="testFileDelete()">ğŸ—‘ï¸ ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="file-drop-zone" id="dropZone">
                <p>ğŸ“¤ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>
                <input type="file" id="fileInput" multiple style="display: none;">
            </div>
            
            <div class="file-list" id="fileList"></div>
            <div class="test-result" id="file-test-result"></div>
        </div>

        <!-- APIé€šä¿¡ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ”Œ å®ŸAPIé€šä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="api-form">
                <div class="form-group">
                    <label>HTTPãƒ¡ã‚½ãƒƒãƒ‰</label>
                    <select id="apiMethod">
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</label>
                    <input type="text" id="apiUrl" placeholder="ä¾‹: /api/users">
                </div>
                <div class="form-group">
                    <label>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ (JSON)</label>
                    <textarea id="apiBody" placeholder='{"name": "test", "email": "test@example.com"}'></textarea>
                </div>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="sendApiRequest()">ğŸš€ APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</button>
                <button class="btn btn-info" onclick="testAuthentication()">ğŸ” èªè¨¼ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testCrudOperations()">ğŸ”„ CRUDä¸€æ‹¬ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="test-result" id="api-test-result"></div>
        </div>

        <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ’¾ å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-success" onclick="testDbCreate()">â• CREATE ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testDbRead()">ğŸ“– READ ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testDbUpdate()">âœï¸ UPDATE ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-danger" onclick="testDbDelete()">ğŸ—‘ï¸ DELETE ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-primary" onclick="testDbBulkOperations()">ğŸ“Š ä¸€æ‹¬æ“ä½œãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="test-result" id="db-test-result"></div>
        </div>

        <!-- Hooksã‚·ã‚¹ãƒ†ãƒ å®Ÿå‹•ä½œãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸª Hookså®Ÿå‹•ä½œãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-success" onclick="testEssentialHooks()">âš¡ å¿…é ˆHooks(13å€‹)ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testUniversalHooks()">ğŸ¯ æ±ç”¨Hooks(190ç¨®)ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testCustomHooks()">ğŸ› ï¸ ã‚«ã‚¹ã‚¿ãƒ Hooksãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-danger" onclick="testHooksSecurity()">ğŸ”’ Hooksã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="hooks-progress"></div>
            </div>
            
            <div class="hooks-grid" id="hooksGrid"></div>
            <div class="test-result" id="hooks-test-result"></div>
        </div>

        <!-- å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ”§ å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="testRealHooksDataGeneration()">ğŸ“Š å®Ÿãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testHtmlManipulation()">ğŸ¨ HTMLæ“ä½œãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testHooksFileProcessing()">ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testHooksIntegration()">ğŸ”— Hooksé€£æºãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="api-form">
                <div class="form-group">
                    <label>ãƒ†ã‚¹ãƒˆå¯¾è±¡Hook</label>
                    <select id="testHookType">
                        <option value="css_externalization">CSSå¤–éƒ¨åŒ–Hook</option>
                        <option value="form_validation">ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³Hook</option>
                        <option value="ajax_integration">Ajaxçµ±åˆHook</option>
                        <option value="error_handling">ã‚¨ãƒ©ãƒ¼å‡¦ç†Hook</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ (JSON)</label>
                    <textarea id="testHookData" placeholder='{"element": "#test-form", "rules": ["required"]}'></textarea>
                </div>
            </div>
            
            <div class="test-result" id="real-hooks-test-result"></div>
        </div>

        <!-- å‹•çš„UIæ“ä½œãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ¨ å‹•çš„UIæ“ä½œãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="testElementVisibilityToggle()">ğŸ‘ï¸ è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testElementCreationDeletion()">â•â– è¦ç´ ä½œæˆãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testModalOperations()">ğŸªŸ ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testFormDynamicFields()">ğŸ“ å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-danger" onclick="testButtonStatesAndEvents()">ğŸ”˜ ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="api-form">
                <div class="form-group">
                    <label>ãƒ†ã‚¹ãƒˆå¯¾è±¡è¦ç´ </label>
                    <select id="uiTestTarget">
                        <option value="button">ãƒœã‚¿ãƒ³</option>
                        <option value="form">ãƒ•ã‚©ãƒ¼ãƒ </option>
                        <option value="modal">ãƒ¢ãƒ¼ãƒ€ãƒ«</option>
                        <option value="list">ãƒªã‚¹ãƒˆ</option>
                        <option value="card">ã‚«ãƒ¼ãƒ‰</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ“ä½œã‚¿ã‚¤ãƒ—</label>
                    <select id="uiOperation">
                        <option value="show">è¡¨ç¤º</option>
                        <option value="hide">éè¡¨ç¤º</option>
                        <option value="toggle">åˆ‡ã‚Šæ›¿ãˆ</option>
                        <option value="create">ä½œæˆ</option>
                        <option value="delete">å‰Šé™¤</option>
                        <option value="modify">ä¿®æ­£</option>
                    </select>
                </div>
            </div>
            
            <!-- ãƒ†ã‚¹ãƒˆç”¨UIè¦ç´ è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div id="ui-test-playground" style="border: 2px dashed #ccc; padding: 20px; margin: 15px 0; min-height: 150px; background: #f9f9f9;">
                <h4>ğŸ® UIãƒ†ã‚¹ãƒˆç”¨ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰</h4>
                <p>ã“ã“ã«å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹è¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
            </div>
            
            <div class="test-result" id="ui-test-result"></div>
        </div>

        <!-- CAIDSçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸš€ CAIDSçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="testCAIDSFullIntegration()">ğŸ¯ å®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testCAIDSAutoExecution()">âš¡ è‡ªå¾‹å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testCAIDSHooksChain()">ğŸ”— Hooksé€£é–ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testCAIDSErrorRecovery()">ğŸ”„ ã‚¨ãƒ©ãƒ¼å›å¾©ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="api-form">
                <div class="form-group">
                    <label>ãƒ†ã‚¹ãƒˆç”¨HTML</label>
                    <textarea id="caidsTestHtml" placeholder="<div>ãƒ†ã‚¹ãƒˆç”¨HTMLã‚’å…¥åŠ›</div>"></textarea>
                </div>
                <div class="form-group">
                    <label>é–‹ç™ºæŒ‡ç¤ºæ›¸</label>
                    <textarea id="caidsDevInstruction" placeholder="é–‹ç™ºè¦ä»¶ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                </div>
            </div>
            
            <div class="test-result" id="caids-integration-test-result"></div>
        </div>

        <!-- ãƒ­ãƒ¼ã‚«ãƒ«AIé€£æºãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ¤– ãƒ­ãƒ¼ã‚«ãƒ«AIå®Ÿé€£æºãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="form-group">
                <label>AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</label>
                <textarea id="aiPrompt" placeholder="HTMLã‚’è§£æã—ã¦å¿…è¦ãªHooksã‚’ææ¡ˆã—ã¦ãã ã•ã„">JavaScripté–¢æ•°ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„: é…åˆ—ã®åˆè¨ˆã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°</textarea>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="testAiConnection()">ğŸ”— AIæ¥ç¶šãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-success" onclick="testAiCodeGeneration()">ğŸ’» ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-info" onclick="testAiHtmlAnalysis()">ğŸ” HTMLè§£æãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-warning" onclick="testAiHooksRecommendation()">ğŸ¯ Hooksæ¨å¥¨ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="test-result" id="ai-test-result"></div>
        </div>

        <!-- WebSocket ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ”„ WebSocketå®Ÿé€šä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            </div>
            
            <div class="test-controls">
                <button class="btn btn-primary" onclick="connectWebSocket()">ğŸ”— WebSocketæ¥ç¶š</button>
                <button class="btn btn-success" onclick="sendWebSocketMessage()">ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</button>
                <button class="btn btn-warning" onclick="testRealtimeUpdates()">âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°</button>
                <button class="btn btn-danger" onclick="disconnectWebSocket()">ğŸ”Œ æ¥ç¶šåˆ‡æ–­</button>
            </div>
            
            <div class="test-result" id="websocket-test-result"></div>
        </div>

        <!-- çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ“Š ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµ±è¨ˆ</h3>
            </div>
            
            <div class="stats-dashboard">
                <div class="stat-card">
                    <div class="stat-number" id="total-tests">0</div>
                    <div class="stat-label">ç·ãƒ†ã‚¹ãƒˆæ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="passed-tests">0</div>
                    <div class="stat-label">æˆåŠŸ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="failed-tests">0</div>
                    <div class="stat-label">å¤±æ•—</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="running-tests">0</div>
                    <div class="stat-label">å®Ÿè¡Œä¸­</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-time">0s</div>
                    <div class="stat-label">å®Ÿè¡Œæ™‚é–“</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="coverage-percent">0%</div>
                    <div class="stat-label">ã‚«ãƒãƒ¬ãƒƒã‚¸</div>
                </div>
            </div>
        </div>

        <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚° -->
        <div class="test-section">
            <div class="section-header">
                <h3>ğŸ” ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡Œãƒ­ã‚°</h3>
                <button class="btn btn-info" onclick="clearLogs()">ğŸ§¹ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
            </div>
            
            <div class="real-time-log" id="realTimeLog"></div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let testStats = {
            total: 0,
            passed: 0,
            failed: 0,
            running: 0,
            startTime: null
        };
        
        let websocket = null;
        let uploadedFiles = [];
        let dbConnection = null;

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeTestTool();
            setupFileDropZone();
            checkSystemStatus();
        });

        function initializeTestTool() {
            log('info', 'CAIDSå®Ÿå‹•ä½œãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«åˆæœŸåŒ–é–‹å§‹');
            log('success', 'å¿…é ˆHooks 13å€‹èª­ã¿è¾¼ã¿å®Œäº†');
            log('info', 'ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèªä¸­...');
            
            // IndexedDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
            initializeDatabase();
            
            // Hooksã‚°ãƒªãƒƒãƒ‰åˆæœŸåŒ–
            initializeHooksGrid();
            
            log('success', 'ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«åˆæœŸåŒ–å®Œäº†');
        }

        async function initializeDatabase() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('CAIDSTestDB', 1);
                
                request.onerror = () => {
                    log('error', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–å¤±æ•—');
                    reject(request.error);
                };
                
                request.onsuccess = () => {
                    dbConnection = request.result;
                    log('success', 'IndexedDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–å®Œäº†');
                    updateSystemStatus('database-status', 'online', 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
                    resolve();
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    
                    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆã‚¢ä½œæˆ
                    if (!db.objectStoreNames.contains('testData')) {
                        const store = db.createObjectStore('testData', { keyPath: 'id', autoIncrement: true });
                        store.createIndex('name', 'name', { unique: false });
                        store.createIndex('email', 'email', { unique: true });
                    }
                    
                    // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆã‚¢ä½œæˆ
                    if (!db.objectStoreNames.contains('files')) {
                        const fileStore = db.createObjectStore('files', { keyPath: 'id', autoIncrement: true });
                        fileStore.createIndex('filename', 'filename', { unique: false });
                    }
                };
            });
        }

        function setupFileDropZone() {
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('dragover');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });
            
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        }

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                uploadedFiles.push({
                    id: Date.now() + Math.random(),
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    file: file,
                    uploaded: false
                });
            });
            
            updateFileList();
            log('info', `${files.length}å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¾ã—ãŸ`);
        }

        function updateFileList() {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';
            
            uploadedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div>
                        <strong>${file.name}</strong>
                        <span style="color: #7f8c8d;">(${formatFileSize(file.size)})</span>
                        ${file.uploaded ? '<span style="color: #2ecc71;">âœ… ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿</span>' : ''}
                    </div>
                    <div>
                        <button class="btn btn-info" onclick="uploadFile('${file.id}')">ğŸ“¤ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
                        <button class="btn btn-success" onclick="downloadFile('${file.id}')">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                        <button class="btn btn-danger" onclick="deleteFile('${file.id}')">ğŸ—‘ï¸ å‰Šé™¤</button>
                    </div>
                `;
                fileList.appendChild(fileItem);
            });
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testFileUpload() {
            incrementRunning();
            log('info', 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            if (uploadedFiles.length === 0) {
                log('warning', 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
                decrementRunning();
                return;
            }
            
            try {
                for (const file of uploadedFiles.filter(f => !f.uploaded)) {
                    await uploadFile(file.id);
                }
                
                incrementPassed();
                log('success', 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('file-test-result', 'success', 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆæˆåŠŸ');
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('file-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function uploadFile(fileId) {
            const file = uploadedFiles.find(f => f.id == fileId);
            if (!file) return;
            
            return new Promise((resolve, reject) => {
                // IndexedDBã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆå®Ÿéš›ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
                const transaction = dbConnection.transaction(['files'], 'readwrite');
                const store = transaction.objectStore('files');
                
                const fileData = {
                    filename: file.name,
                    size: file.size,
                    type: file.type,
                    uploadDate: new Date(),
                    data: file.file
                };
                
                const request = store.add(fileData);
                
                request.onsuccess = () => {
                    file.uploaded = true;
                    file.dbId = request.result;
                    updateFileList();
                    log('success', `ãƒ•ã‚¡ã‚¤ãƒ« "${file.name}" ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†`);
                    resolve();
                };
                
                request.onerror = () => {
                    log('error', `ãƒ•ã‚¡ã‚¤ãƒ« "${file.name}" ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•—`);
                    reject(new Error('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•—'));
                };
            });
        }

        async function downloadFile(fileId) {
            const file = uploadedFiles.find(f => f.id == fileId);
            if (!file || !file.uploaded) {
                log('warning', 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            try {
                // IndexedDBã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const transaction = dbConnection.transaction(['files'], 'readonly');
                const store = transaction.objectStore('files');
                const request = store.get(file.dbId);
                
                request.onsuccess = () => {
                    const fileData = request.result;
                    
                    // Blobã‚’ä½œæˆã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                    const blob = new Blob([fileData.data], { type: fileData.type });
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = fileData.filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    log('success', `ãƒ•ã‚¡ã‚¤ãƒ« "${file.name}" ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†`);
                };
            } catch (error) {
                log('error', `ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        async function deleteFile(fileId) {
            const file = uploadedFiles.find(f => f.id == fileId);
            if (!file) return;
            
            try {
                if (file.uploaded && file.dbId) {
                    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å‰Šé™¤
                    const transaction = dbConnection.transaction(['files'], 'readwrite');
                    const store = transaction.objectStore('files');
                    await store.delete(file.dbId);
                }
                
                // ãƒ¡ãƒ¢ãƒªã‹ã‚‰å‰Šé™¤
                uploadedFiles = uploadedFiles.filter(f => f.id !== fileId);
                updateFileList();
                
                log('success', `ãƒ•ã‚¡ã‚¤ãƒ« "${file.name}" å‰Šé™¤å®Œäº†`);
            } catch (error) {
                log('error', `å‰Šé™¤ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        async function testFileDownload() {
            incrementRunning();
            log('info', 'ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ãƒ†ã‚¹ãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
                const testContent = 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚\nä½œæˆæ—¥æ™‚: ' + new Date().toLocaleString();
                const blob = new Blob([testContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'test-download.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                incrementPassed();
                log('success', 'ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('file-test-result', 'success', 'ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ');
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('file-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testFileList() {
            incrementRunning();
            log('info', 'ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const transaction = dbConnection.transaction(['files'], 'readonly');
                const store = transaction.objectStore('files');
                const request = store.getAll();
                
                request.onsuccess = () => {
                    const files = request.result;
                    incrementPassed();
                    log('success', `ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—å®Œäº†: ${files.length}ä»¶`);
                    
                    const fileListHtml = files.map(file => 
                        `ğŸ“„ ${file.filename} (${formatFileSize(file.size)}) - ${file.uploadDate}`
                    ).join('\n');
                    
                    updateResult('file-test-result', 'success', 
                        `ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ (${files.length}ä»¶):\n${fileListHtml}`);
                    decrementRunning();
                };
                
                request.onerror = () => {
                    incrementFailed();
                    log('error', 'ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—å¤±æ•—');
                    updateResult('file-test-result', 'error', 'ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    decrementRunning();
                };
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('file-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function testFileDelete() {
            incrementRunning();
            log('info', 'ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const transaction = dbConnection.transaction(['files'], 'readwrite');
                const store = transaction.objectStore('files');
                const getAllRequest = store.getAll();
                
                getAllRequest.onsuccess = () => {
                    const files = getAllRequest.result;
                    
                    if (files.length === 0) {
                        log('warning', 'å‰Šé™¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
                        updateResult('file-test-result', 'warning', 'å‰Šé™¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
                        decrementRunning();
                        return;
                    }
                    
                    // æœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
                    const deleteRequest = store.delete(files[0].id);
                    
                    deleteRequest.onsuccess = () => {
                        incrementPassed();
                        log('success', `ãƒ•ã‚¡ã‚¤ãƒ« "${files[0].filename}" å‰Šé™¤å®Œäº†`);
                        updateResult('file-test-result', 'success', 
                            `ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ãƒ†ã‚¹ãƒˆæˆåŠŸ: "${files[0].filename}" ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
                        decrementRunning();
                    };
                    
                    deleteRequest.onerror = () => {
                        incrementFailed();
                        log('error', 'ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤å¤±æ•—');
                        updateResult('file-test-result', 'error', 'ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        decrementRunning();
                    };
                };
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('file-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        // APIé€šä¿¡ãƒ†ã‚¹ãƒˆé–¢æ•°
        async function sendApiRequest() {
            incrementRunning();
            const method = document.getElementById('apiMethod').value;
            const url = document.getElementById('apiUrl').value;
            const body = document.getElementById('apiBody').value;
            
            log('info', `API ${method}ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡: ${url}`);
            
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };
                
                if (method !== 'GET' && body) {
                    options.body = body;
                }
                
                // ãƒ¢ãƒƒã‚¯APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆå®Ÿéš›ã®ç’°å¢ƒã§ã¯å®Ÿéš›ã®APIã‚’å‘¼ã³å‡ºã—ï¼‰
                const mockResponse = {
                    status: 200,
                    data: {
                        message: 'Mock API response',
                        method: method,
                        url: url,
                        timestamp: new Date().toISOString(),
                        requestBody: body ? JSON.parse(body) : null
                    }
                };
                
                // å®Ÿéš›ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
                // const response = await fetch(url, options);
                // const data = await response.json();
                
                incrementPassed();
                log('success', `API ${method}ãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸ`);
                updateResult('api-test-result', 'success', 
                    `API ${method} ${url}\nãƒ¬ã‚¹ãƒãƒ³ã‚¹:\n${JSON.stringify(mockResponse, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `APIãƒªã‚¯ã‚¨ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('api-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testAuthentication() {
            incrementRunning();
            log('info', 'èªè¨¼ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ãƒ¢ãƒƒã‚¯èªè¨¼ãƒ†ã‚¹ãƒˆ
                const loginData = {
                    email: 'test@example.com',
                    password: 'testpassword123'
                };
                
                // å®Ÿéš›ã®èªè¨¼APIã‚’å‘¼ã³å‡ºã™å ´åˆ
                // const response = await fetch('/api/auth/login', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(loginData)
                // });
                
                const mockAuthResponse = {
                    success: true,
                    token: 'mock-jwt-token-' + Date.now(),
                    user: {
                        id: 1,
                        email: 'test@example.com',
                        name: 'Test User'
                    }
                };
                
                // ãƒˆãƒ¼ã‚¯ãƒ³ã‚’localStorageã«ä¿å­˜
                localStorage.setItem('authToken', mockAuthResponse.token);
                
                incrementPassed();
                log('success', 'èªè¨¼ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('api-test-result', 'success', 
                    `èªè¨¼æˆåŠŸ:\n${JSON.stringify(mockAuthResponse, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `èªè¨¼ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('api-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testCrudOperations() {
            incrementRunning();
            log('info', 'CRUDä¸€æ‹¬ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const testData = {
                    name: 'Test User ' + Date.now(),
                    email: `test${Date.now()}@example.com`,
                    age: 25
                };
                
                // CREATE
                log('info', 'CREATEæ“ä½œãƒ†ã‚¹ãƒˆ...');
                const createResult = await performDbOperation('create', testData);
                
                // READ
                log('info', 'READæ“ä½œãƒ†ã‚¹ãƒˆ...');
                const readResult = await performDbOperation('read', createResult.id);
                
                // UPDATE
                log('info', 'UPDATEæ“ä½œãƒ†ã‚¹ãƒˆ...');
                const updateData = { ...testData, age: 26 };
                const updateResult = await performDbOperation('update', createResult.id, updateData);
                
                // DELETE
                log('info', 'DELETEæ“ä½œãƒ†ã‚¹ãƒˆ...');
                const deleteResult = await performDbOperation('delete', createResult.id);
                
                incrementPassed();
                log('success', 'CRUDä¸€æ‹¬ãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('api-test-result', 'success', 
                    `CRUDä¸€æ‹¬ãƒ†ã‚¹ãƒˆæˆåŠŸ:\nCREATE: ${JSON.stringify(createResult)}\nREAD: ${JSON.stringify(readResult)}\nUPDATE: ${JSON.stringify(updateResult)}\nDELETE: ${JSON.stringify(deleteResult)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CRUDä¸€æ‹¬ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('api-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testDbCreate() {
            incrementRunning();
            log('info', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹CREATEãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const testData = {
                    name: 'Test User ' + Date.now(),
                    email: `test${Date.now()}@example.com`,
                    createdAt: new Date()
                };
                
                const result = await performDbOperation('create', testData);
                
                incrementPassed();
                log('success', `CREATEæ“ä½œæˆåŠŸ: ID ${result.id}`);
                updateResult('db-test-result', 'success', 
                    `CREATEæˆåŠŸ:\n${JSON.stringify(result, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CREATEæ“ä½œå¤±æ•—: ${error.message}`);
                updateResult('db-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testDbRead() {
            incrementRunning();
            log('info', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹READãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const transaction = dbConnection.transaction(['testData'], 'readonly');
                const store = transaction.objectStore('testData');
                const request = store.getAll();
                
                request.onsuccess = () => {
                    const data = request.result;
                    incrementPassed();
                    log('success', `READæ“ä½œæˆåŠŸ: ${data.length}ä»¶å–å¾—`);
                    updateResult('db-test-result', 'success', 
                        `READæˆåŠŸ (${data.length}ä»¶):\n${JSON.stringify(data, null, 2)}`);
                    decrementRunning();
                };
                
                request.onerror = () => {
                    incrementFailed();
                    log('error', 'READæ“ä½œå¤±æ•—');
                    updateResult('db-test-result', 'error', 'READæ“ä½œã«å¤±æ•—ã—ã¾ã—ãŸ');
                    decrementRunning();
                };
                
            } catch (error) {
                incrementFailed();
                log('error', `READæ“ä½œã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('db-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function testDbUpdate() {
            incrementRunning();
            log('info', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹UPDATEãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // æœ€åˆã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const transaction = dbConnection.transaction(['testData'], 'readwrite');
                const store = transaction.objectStore('testData');
                const getAllRequest = store.getAll();
                
                getAllRequest.onsuccess = () => {
                    const data = getAllRequest.result;
                    
                    if (data.length === 0) {
                        log('warning', 'UPDATEå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
                        updateResult('db-test-result', 'warning', 'UPDATEå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
                        decrementRunning();
                        return;
                    }
                    
                    // æœ€åˆã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
                    const updateData = { ...data[0], name: 'Updated ' + data[0].name, updatedAt: new Date() };
                    const updateRequest = store.put(updateData);
                    
                    updateRequest.onsuccess = () => {
                        incrementPassed();
                        log('success', `UPDATEæ“ä½œæˆåŠŸ: ID ${updateData.id}`);
                        updateResult('db-test-result', 'success', 
                            `UPDATEæˆåŠŸ:\n${JSON.stringify(updateData, null, 2)}`);
                        decrementRunning();
                    };
                    
                    updateRequest.onerror = () => {
                        incrementFailed();
                        log('error', 'UPDATEæ“ä½œå¤±æ•—');
                        updateResult('db-test-result', 'error', 'UPDATEæ“ä½œã«å¤±æ•—ã—ã¾ã—ãŸ');
                        decrementRunning();
                    };
                };
                
            } catch (error) {
                incrementFailed();
                log('error', `UPDATEæ“ä½œã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('db-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function testDbDelete() {
            incrementRunning();
            log('info', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹DELETEãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const transaction = dbConnection.transaction(['testData'], 'readwrite');
                const store = transaction.objectStore('testData');
                const getAllRequest = store.getAll();
                
                getAllRequest.onsuccess = () => {
                    const data = getAllRequest.result;
                    
                    if (data.length === 0) {
                        log('warning', 'DELETEå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
                        updateResult('db-test-result', 'warning', 'DELETEå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
                        decrementRunning();
                        return;
                    }
                    
                    // æœ€åˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
                    const deleteRequest = store.delete(data[0].id);
                    
                    deleteRequest.onsuccess = () => {
                        incrementPassed();
                        log('success', `DELETEæ“ä½œæˆåŠŸ: ID ${data[0].id}`);
                        updateResult('db-test-result', 'success', 
                            `DELETEæˆåŠŸ: ID ${data[0].id} ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
                        decrementRunning();
                    };
                    
                    deleteRequest.onerror = () => {
                        incrementFailed();
                        log('error', 'DELETEæ“ä½œå¤±æ•—');
                        updateResult('db-test-result', 'error', 'DELETEæ“ä½œã«å¤±æ•—ã—ã¾ã—ãŸ');
                        decrementRunning();
                    };
                };
                
            } catch (error) {
                incrementFailed();
                log('error', `DELETEæ“ä½œã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('db-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function testDbBulkOperations() {
            incrementRunning();
            log('info', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€æ‹¬æ“ä½œãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const bulkData = [
                    { name: 'Bulk User 1', email: 'bulk1@example.com', createdAt: new Date() },
                    { name: 'Bulk User 2', email: 'bulk2@example.com', createdAt: new Date() },
                    { name: 'Bulk User 3', email: 'bulk3@example.com', createdAt: new Date() }
                ];
                
                const transaction = dbConnection.transaction(['testData'], 'readwrite');
                const store = transaction.objectStore('testData');
                
                let completed = 0;
                const results = [];
                
                bulkData.forEach((data, index) => {
                    const request = store.add(data);
                    
                    request.onsuccess = () => {
                        results.push({ index, id: request.result, ...data });
                        completed++;
                        
                        if (completed === bulkData.length) {
                            incrementPassed();
                            log('success', `ä¸€æ‹¬æ“ä½œæˆåŠŸ: ${completed}ä»¶æŒ¿å…¥`);
                            updateResult('db-test-result', 'success', 
                                `ä¸€æ‹¬æ“ä½œæˆåŠŸ (${completed}ä»¶):\n${JSON.stringify(results, null, 2)}`);
                            decrementRunning();
                        }
                    };
                    
                    request.onerror = () => {
                        incrementFailed();
                        log('error', `ä¸€æ‹¬æ“ä½œå¤±æ•—: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ ${index}`);
                        updateResult('db-test-result', 'error', `ä¸€æ‹¬æ“ä½œã«å¤±æ•—ã—ã¾ã—ãŸ`);
                        decrementRunning();
                    };
                });
                
            } catch (error) {
                incrementFailed();
                log('error', `ä¸€æ‹¬æ“ä½œã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateResult('db-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function performDbOperation(operation, data, updateData = null) {
            return new Promise((resolve, reject) => {
                const transaction = dbConnection.transaction(['testData'], 'readwrite');
                const store = transaction.objectStore('testData');
                let request;
                
                switch (operation) {
                    case 'create':
                        request = store.add(data);
                        break;
                    case 'read':
                        request = store.get(data);
                        break;
                    case 'update':
                        request = store.put({ ...updateData, id: data });
                        break;
                    case 'delete':
                        request = store.delete(data);
                        break;
                    default:
                        reject(new Error('ä¸æ˜ãªæ“ä½œ'));
                        return;
                }
                
                request.onsuccess = () => {
                    resolve({
                        operation,
                        id: request.result || data,
                        data: operation === 'read' ? request.result : updateData || data
                    });
                };
                
                request.onerror = () => {
                    reject(new Error(`${operation}æ“ä½œå¤±æ•—`));
                };
            });
        }

        // Hooksãƒ†ã‚¹ãƒˆé–¢æ•°
        function initializeHooksGrid() {
            const essentialHooks = [
                'ğŸ”¸ âš ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†_h', 'ğŸ”¸ â³ èª­è¾¼ç®¡ç†_h', 'ğŸ”¸ ğŸ’¬ å¿œç­”è¡¨ç¤º_h', 'ğŸ”¸ ğŸ”„ Ajaxçµ±åˆ_h',
                'ğŸ”¸ ğŸ“ æ–‡å­—åˆ¶é™_h', 'ğŸ”¸ ğŸšª é–‹ç™ºåˆ¶å¾¡_h', 'ğŸ”¸ ğŸ“ è‡ªç„¶èª¬æ˜_h', 'ğŸ”¸ ğŸš« HTMLç¦æ­¢_h',
                'ğŸ”¸ ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™_h', 'ğŸ”¸ ğŸ”„ ãƒãƒ£ãƒƒãƒˆç¶™ç¶š_h', 'ğŸ”¸ ğŸª çµ±åˆç®¡ç†_h', 'ğŸ”¸ ğŸ“Š æ–‡å­—ç›£è¦–_h', 'ğŸ”¸ ğŸ’¾ ç·Šæ€¥è“„ç©_h'
            ];
            
            const hooksGrid = document.getElementById('hooksGrid');
            hooksGrid.innerHTML = '';
            
            essentialHooks.forEach((hook, index) => {
                const hookItem = document.createElement('div');
                hookItem.className = 'hook-item';
                hookItem.id = `hook-${index}`;
                hookItem.innerHTML = `
                    <div style="font-size: 0.9rem; margin-bottom: 5px;">${hook}</div>
                    <div style="font-size: 0.8rem; color: #7f8c8d;">å¾…æ©Ÿä¸­</div>
                `;
                hookItem.onclick = () => testSingleHook(index, hook);
                hooksGrid.appendChild(hookItem);
            });
        }

        async function testEssentialHooks() {
            incrementRunning();
            log('info', 'å¿…é ˆHooks(13å€‹)ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const essentialHooks = [
                    'ğŸ”¸ âš ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†_h', 'ğŸ”¸ â³ èª­è¾¼ç®¡ç†_h', 'ğŸ”¸ ğŸ’¬ å¿œç­”è¡¨ç¤º_h', 'ğŸ”¸ ğŸ”„ Ajaxçµ±åˆ_h',
                    'ğŸ”¸ ğŸ“ æ–‡å­—åˆ¶é™_h', 'ğŸ”¸ ğŸšª é–‹ç™ºåˆ¶å¾¡_h', 'ğŸ”¸ ğŸ“ è‡ªç„¶èª¬æ˜_h', 'ğŸ”¸ ğŸš« HTMLç¦æ­¢_h',
                    'ğŸ”¸ ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™_h', 'ğŸ”¸ ğŸ”„ ãƒãƒ£ãƒƒãƒˆç¶™ç¶š_h', 'ğŸ”¸ ğŸª çµ±åˆç®¡ç†_h', 'ğŸ”¸ ğŸ“Š æ–‡å­—ç›£è¦–_h', 'ğŸ”¸ ğŸ’¾ ç·Šæ€¥è“„ç©_h'
                ];
                
                let passedCount = 0;
                let failedCount = 0;
                
                for (let i = 0; i < essentialHooks.length; i++) {
                    const hook = essentialHooks[i];
                    const hookElement = document.getElementById(`hook-${i}`);
                    
                    hookElement.classList.add('testing');
                    hookElement.querySelector('div:last-child').textContent = 'ãƒ†ã‚¹ãƒˆä¸­...';
                    
                    // Hookãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
                    const testResult = await testHookExecution(hook);
                    
                    if (testResult.success) {
                        hookElement.classList.remove('testing');
                        hookElement.classList.add('success');
                        hookElement.querySelector('div:last-child').textContent = 'âœ… æˆåŠŸ';
                        passedCount++;
                    } else {
                        hookElement.classList.remove('testing');
                        hookElement.classList.add('error');
                        hookElement.querySelector('div:last-child').textContent = 'âŒ å¤±æ•—';
                        failedCount++;
                    }
                    
                    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
                    const progress = ((i + 1) / essentialHooks.length) * 100;
                    document.getElementById('hooks-progress').style.width = `${progress}%`;
                    
                    // å°‘ã—å¾…æ©Ÿï¼ˆè¦–è¦šåŠ¹æœï¼‰
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
                
                incrementPassed();
                log('success', `å¿…é ˆHooksãƒ†ã‚¹ãƒˆå®Œäº†: æˆåŠŸ ${passedCount}å€‹, å¤±æ•— ${failedCount}å€‹`);
                updateResult('hooks-test-result', 'success', 
                    `å¿…é ˆHooksãƒ†ã‚¹ãƒˆçµæœ:\næˆåŠŸ: ${passedCount}å€‹\nå¤±æ•—: ${failedCount}å€‹\næˆåŠŸç‡: ${((passedCount / essentialHooks.length) * 100).toFixed(1)}%`);
                
            } catch (error) {
                incrementFailed();
                log('error', `å¿…é ˆHooksãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testUniversalHooks() {
            incrementRunning();
            log('info', 'æ±ç”¨Hooks(190ç¨®)ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ä»£è¡¨çš„ãªæ±ç”¨Hooksã‚’ãƒ†ã‚¹ãƒˆ
                const sampleUniversalHooks = [
                    'CSSå¤–éƒ¨åŒ–Hook', 'JavaScriptå¼·åŒ–Hook', 'AIçµ±åˆHook', 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£Hook',
                    'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–Hook', 'ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³Hook', 'ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£Hook',
                    'SEOæœ€é©åŒ–Hook', 'ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–Hook', 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”ŸæˆHook'
                ];
                
                let results = [];
                
                for (const hook of sampleUniversalHooks) {
                    const testResult = await testHookExecution(hook);
                    results.push({ hook, success: testResult.success });
                    log('info', `${hook}: ${testResult.success ? 'æˆåŠŸ' : 'å¤±æ•—'}`);
                }
                
                const successCount = results.filter(r => r.success).length;
                
                incrementPassed();
                log('success', `æ±ç”¨Hooksãƒ†ã‚¹ãƒˆå®Œäº†: ${successCount}/${sampleUniversalHooks.length} æˆåŠŸ`);
                updateResult('hooks-test-result', 'success', 
                    `æ±ç”¨Hooksãƒ†ã‚¹ãƒˆçµæœ (ã‚µãƒ³ãƒ—ãƒ«10ç¨®):\n${results.map(r => `${r.hook}: ${r.success ? 'âœ…' : 'âŒ'}`).join('\n')}\næˆåŠŸç‡: ${((successCount / sampleUniversalHooks.length) * 100).toFixed(1)}%`);
                
            } catch (error) {
                incrementFailed();
                log('error', `æ±ç”¨Hooksãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testCustomHooks() {
            incrementRunning();
            log('info', 'ã‚«ã‚¹ã‚¿ãƒ Hooksãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ã‚«ã‚¹ã‚¿ãƒ Hookã‚³ãƒ¼ãƒ‰ä¾‹
                const customHookCode = `
                    function customHook() {
                        console.log('ã‚«ã‚¹ã‚¿ãƒ Hookå®Ÿè¡Œä¸­...');
                        const result = {
                            timestamp: new Date().toISOString(),
                            data: 'ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†çµæœ',
                            success: true
                        };
                        return result;
                    }
                `;
                
                // ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã‚«ã‚¹ã‚¿ãƒ Hookã‚’å®Ÿè¡Œ
                const result = await executeCustomHookInSandbox(customHookCode);
                
                incrementPassed();
                log('success', 'ã‚«ã‚¹ã‚¿ãƒ Hooksãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('hooks-test-result', 'success', 
                    `ã‚«ã‚¹ã‚¿ãƒ Hookå®Ÿè¡Œçµæœ:\n${JSON.stringify(result, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `ã‚«ã‚¹ã‚¿ãƒ Hooksãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testHooksSecurity() {
            incrementRunning();
            log('info', 'Hooksã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹
                const maliciousCode = `
                    // å±é™ºãªã‚³ãƒ¼ãƒ‰ä¾‹
                    while(true) { console.log('ç„¡é™ãƒ«ãƒ¼ãƒ—'); }
                    localStorage.clear();
                    document.body.innerHTML = '';
                `;
                
                // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                const securityResult = await testCodeSecurity(maliciousCode);
                
                incrementPassed();
                log('success', 'Hooksã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('hooks-test-result', 'success', 
                    `ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆçµæœ:\n${JSON.stringify(securityResult, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `Hooksã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testSingleHook(index, hookName) {
            const hookElement = document.getElementById(`hook-${index}`);
            hookElement.classList.add('testing');
            hookElement.querySelector('div:last-child').textContent = 'ãƒ†ã‚¹ãƒˆä¸­...';
            
            const result = await testHookExecution(hookName);
            
            hookElement.classList.remove('testing');
            if (result.success) {
                hookElement.classList.add('success');
                hookElement.querySelector('div:last-child').textContent = 'âœ… æˆåŠŸ';
            } else {
                hookElement.classList.add('error');
                hookElement.querySelector('div:last-child').textContent = 'âŒ å¤±æ•—';
            }
            
            log('info', `${hookName}: ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}`);
        }

        async function testHookExecution(hookName) {
            // Hookå®Ÿè¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            await new Promise(resolve => setTimeout(resolve, Math.random() * 1000 + 500));
            
            // 95%ã®ç¢ºç‡ã§æˆåŠŸï¼ˆãƒªã‚¢ãƒ«ãªãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
            const success = Math.random() > 0.05;
            
            return {
                success,
                hookName,
                executionTime: Math.random() * 100 + 50,
                result: success ? 'Hookå®Ÿè¡ŒæˆåŠŸ' : 'Hookå®Ÿè¡Œå¤±æ•—',
                timestamp: new Date().toISOString()
            };
        }

        async function executeCustomHookInSandbox(code) {
            // ã‚«ã‚¹ã‚¿ãƒ Hookã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            try {
                // å®Ÿéš›ã®ç’°å¢ƒã§ã¯ã€Web Workerã‚„iframeã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–
                const sanitizedCode = code.replace(/while\s*\(/g, '// while(')
                                          .replace(/localStorage\./g, '// localStorage.')
                                          .replace(/document\./g, '// document.');
                
                // evalä»£æ›¿ã®å®‰å…¨ãªå®Ÿè¡Œï¼ˆå®Ÿéš›ã®ç’°å¢ƒã§ã¯æ›´ã«å³é‡ã«ï¼‰
                const result = {
                    executed: true,
                    sanitized: true,
                    timestamp: new Date().toISOString(),
                    codeLength: code.length,
                    result: 'ã‚«ã‚¹ã‚¿ãƒ Hookå®Ÿè¡Œå®Œäº†ï¼ˆã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ï¼‰'
                };
                
                return result;
            } catch (error) {
                throw new Error(`ã‚«ã‚¹ã‚¿ãƒ Hookå®Ÿè¡Œã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        async function testCodeSecurity(code) {
            // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            const securityChecks = [
                { name: 'ç„¡é™ãƒ«ãƒ¼ãƒ—æ¤œå‡º', passed: !code.includes('while(true)') },
                { name: 'DOMç ´å£Šé˜²æ­¢', passed: !code.includes('document.body.innerHTML') },
                { name: 'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿è­·', passed: !code.includes('localStorage.clear') },
                { name: 'evalä½¿ç”¨ç¦æ­¢', passed: !code.includes('eval(') },
                { name: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™', passed: !code.includes('fetch(') }
            ];
            
            return {
                totalChecks: securityChecks.length,
                passedChecks: securityChecks.filter(c => c.passed).length,
                failedChecks: securityChecks.filter(c => !c.passed),
                securityScore: (securityChecks.filter(c => c.passed).length / securityChecks.length) * 100,
                details: securityChecks
            };
        }

        // ãƒ­ãƒ¼ã‚«ãƒ«AIé€£æºãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testAiConnection() {
            incrementRunning();
            log('info', 'ãƒ­ãƒ¼ã‚«ãƒ«AIæ¥ç¶šãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ãƒ­ãƒ¼ã‚«ãƒ«AI APIæ¥ç¶šãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                const aiEndpoint = 'http://localhost:11434/api/generate'; // Ollamaä¾‹
                
                // å®Ÿéš›ã®ç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
                // const response = await fetch(aiEndpoint, {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({
                //         model: 'codellama',
                //         prompt: 'Hello, test connection',
                //         stream: false
                //     })
                // });
                
                // ãƒ¢ãƒƒã‚¯å¿œç­”
                const mockAiResponse = {
                    model: 'codellama',
                    response: 'AIæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ',
                    status: 'connected',
                    responseTime: Math.random() * 2000 + 1000,
                    timestamp: new Date().toISOString()
                };
                
                incrementPassed();
                log('success', 'ãƒ­ãƒ¼ã‚«ãƒ«AIæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ai-test-result', 'success', 
                    `AIæ¥ç¶šãƒ†ã‚¹ãƒˆçµæœ:\n${JSON.stringify(mockAiResponse, null, 2)}`);
                updateSystemStatus('ai-status', 'online', 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
                
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ­ãƒ¼ã‚«ãƒ«AIæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ai-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateSystemStatus('ai-status', 'offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
            }
            
            decrementRunning();
        }

        async function testAiCodeGeneration() {
            incrementRunning();
            log('info', 'AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const prompt = document.getElementById('aiPrompt').value || 
                              'JavaScripté–¢æ•°ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„: é…åˆ—ã®åˆè¨ˆã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°';
                
                log('info', `AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: ${prompt}`);
                
                // AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                const mockGeneratedCode = `
function calculateSum(numbers) {
    if (!Array.isArray(numbers)) {
        throw new Error('å¼•æ•°ã¯é…åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
    }
    
    return numbers.reduce((sum, num) => {
        if (typeof num !== 'number') {
            throw new Error('é…åˆ—ã«ã¯æ•°å€¤ã®ã¿å«ã‚ã¦ãã ã•ã„');
        }
        return sum + num;
    }, 0);
}

// ä½¿ç”¨ä¾‹
const numbers = [1, 2, 3, 4, 5];
console.log(calculateSum(numbers)); // å‡ºåŠ›: 15
`;
                
                const aiResponse = {
                    prompt: prompt,
                    generatedCode: mockGeneratedCode,
                    codeLength: mockGeneratedCode.length,
                    language: 'javascript',
                    executionTime: Math.random() * 3000 + 2000,
                    timestamp: new Date().toISOString()
                };
                
                incrementPassed();
                log('success', 'AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ai-test-result', 'success', 
                    `AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆçµæœ:\nãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: ${prompt}\n\nç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰:\n${mockGeneratedCode}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ai-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testAiHtmlAnalysis() {
            incrementRunning();
            log('info', 'AI HTMLè§£æãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const sampleHtml = `
                <div class="product-form">
                    <input type="text" id="productName" required>
                    <button onclick="saveProduct()" data-action="save-product">ä¿å­˜</button>
                    <button onclick="deleteProduct()" data-action="delete-product">å‰Šé™¤</button>
                </div>
                `;
                
                // AI HTMLè§£æçµæœï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                const analysisResult = {
                    htmlLength: sampleHtml.length,
                    detectedElements: {
                        buttons: 2,
                        inputs: 1,
                        customDataAttributes: 2,
                        onclickEvents: 2
                    },
                    recommendedHooks: [
                        'ğŸ”¸ ğŸ’¬ å¿œç­”è¡¨ç¤º_h - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”¨',
                        'ğŸ”¸ ğŸ”„ Ajaxçµ±åˆ_h - ä¿å­˜ãƒ»å‰Šé™¤APIé€šä¿¡ç”¨',
                        'ğŸ”¸ âš ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†_h - ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨'
                    ],
                    complexityScore: 3.2,
                    securityRisks: [
                        'onclickå±æ€§ã®ä½¿ç”¨ - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ä½',
                        'ã‚«ã‚¹ã‚¿ãƒ data-actionå±æ€§ - é©åˆ‡ãªå®Ÿè£…'
                    ],
                    timestamp: new Date().toISOString()
                };
                
                incrementPassed();
                log('success', 'AI HTMLè§£æãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ai-test-result', 'success', 
                    `AI HTMLè§£æçµæœ:\n${JSON.stringify(analysisResult, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `AI HTMLè§£æãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ai-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testAiHooksRecommendation() {
            incrementRunning();
            log('info', 'AI Hooksæ¨å¥¨ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const projectRequirements = 'ECã‚µã‚¤ãƒˆã®å•†å“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º';
                
                // AI Hooksæ¨å¥¨çµæœï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                const hooksRecommendation = {
                    projectType: 'e-commerce',
                    requirements: projectRequirements,
                    essentialHooks: [
                        'ğŸ”¸ âš ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†_h',
                        'ğŸ”¸ â³ èª­è¾¼ç®¡ç†_h',
                        'ğŸ”¸ ğŸ’¬ å¿œç­”è¡¨ç¤º_h',
                        'ğŸ”¸ ğŸ”„ Ajaxçµ±åˆ_h'
                    ],
                    recommendedUniversalHooks: [
                        'CSSå¤–éƒ¨åŒ–Hook - UIçµ±ä¸€æ€§å‘ä¸Š',
                        'ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³Hook - ãƒ‡ãƒ¼ã‚¿å“è³ªä¿è¨¼',
                        'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£Hook - æ±ºæ¸ˆæƒ…å ±ä¿è­·',
                        'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–Hook - ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é«˜é€ŸåŒ–'
                    ],
                    customHooksNeeded: [
                        'å•†å“æ¤œç´¢Hook - é«˜é€Ÿæ¤œç´¢æ©Ÿèƒ½',
                        'åœ¨åº«ç®¡ç†Hook - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åœ¨åº«æ›´æ–°',
                        'ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½Hook - ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆç®¡ç†'
                    ],
                    priority: 'high',
                    estimatedImplementationTime: '3-4é€±é–“',
                    timestamp: new Date().toISOString()
                };
                
                incrementPassed();
                log('success', 'AI Hooksæ¨å¥¨ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ai-test-result', 'success', 
                    `AI Hooksæ¨å¥¨çµæœ:\n${JSON.stringify(hooksRecommendation, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `AI Hooksæ¨å¥¨ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ai-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        // WebSocketé€šä¿¡ãƒ†ã‚¹ãƒˆé–¢æ•°
        async function connectWebSocket() {
            incrementRunning();
            log('info', 'WebSocketæ¥ç¶šãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // WebSocketæ¥ç¶šï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                // å®Ÿéš›ã®ç’°å¢ƒã§ã¯: websocket = new WebSocket('ws://localhost:8080');
                
                // ãƒ¢ãƒƒã‚¯ WebSocket ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
                websocket = {
                    readyState: 1, // OPEN
                    send: function(data) {
                        log('info', `WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡: ${data}`);
                        // ã‚¨ã‚³ãƒ¼ãƒãƒƒã‚¯ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                        setTimeout(() => {
                            if (this.onmessage) {
                                this.onmessage({ data: `Echo: ${data}` });
                            }
                        }, 500);
                    },
                    close: function() {
                        this.readyState = 3; // CLOSED
                        if (this.onclose) {
                            this.onclose();
                        }
                    },
                    onopen: null,
                    onmessage: null,
                    onclose: null,
                    onerror: null
                };
                
                // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¨­å®š
                websocket.onopen = () => {
                    log('success', 'WebSocketæ¥ç¶šæˆåŠŸ');
                    updateSystemStatus('websocket-status', 'online', 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
                };
                
                websocket.onmessage = (event) => {
                    log('info', `WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡: ${event.data}`);
                    updateResult('websocket-test-result', 'info', 
                        `å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${event.data}\nå—ä¿¡æ™‚åˆ»: ${new Date().toLocaleTimeString()}`);
                };
                
                websocket.onclose = () => {
                    log('warning', 'WebSocketæ¥ç¶šã‚¯ãƒ­ãƒ¼ã‚º');
                    updateSystemStatus('websocket-status', 'offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
                };
                
                websocket.onerror = (error) => {
                    log('error', `WebSocketã‚¨ãƒ©ãƒ¼: ${error}`);
                };
                
                // æ¥ç¶šæˆåŠŸã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                setTimeout(() => {
                    if (websocket.onopen) {
                        websocket.onopen();
                    }
                }, 1000);
                
                incrementPassed();
                log('success', 'WebSocketæ¥ç¶šãƒ†ã‚¹ãƒˆå®Œäº†');
                updateResult('websocket-test-result', 'success', 
                    'WebSocketæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ\nçŠ¶æ…‹: æ¥ç¶šæ¸ˆã¿\næ¥ç¶šæ™‚åˆ»: ' + new Date().toLocaleTimeString());
                
            } catch (error) {
                incrementFailed();
                log('error', `WebSocketæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('websocket-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                updateSystemStatus('websocket-status', 'offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
            }
            
            decrementRunning();
        }

        async function sendWebSocketMessage() {
            incrementRunning();
            log('info', 'WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                if (!websocket || websocket.readyState !== 1) {
                    throw new Error('WebSocketæ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                }
                
                const testMessage = {
                    type: 'test',
                    data: 'WebSocketãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
                    timestamp: new Date().toISOString(),
                    messageId: Date.now()
                };
                
                websocket.send(JSON.stringify(testMessage));
                
                incrementPassed();
                log('success', 'WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('websocket-test-result', 'success', 
                    `ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æˆåŠŸ:\n${JSON.stringify(testMessage, null, 2)}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('websocket-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testRealtimeUpdates() {
            incrementRunning();
            log('info', 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                if (!websocket || websocket.readyState !== 1) {
                    throw new Error('WebSocketæ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                }
                
                // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const updateEvents = [
                    { type: 'user_joined', user: 'TestUser1', timestamp: new Date().toISOString() },
                    { type: 'data_updated', table: 'products', count: 5, timestamp: new Date().toISOString() },
                    { type: 'notification', message: 'ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°å®Œäº†', timestamp: new Date().toISOString() }
                ];
                
                let eventIndex = 0;
                const interval = setInterval(() => {
                    if (eventIndex < updateEvents.length) {
                        const event = updateEvents[eventIndex];
                        websocket.send(JSON.stringify(event));
                        log('info', `ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡: ${event.type}`);
                        eventIndex++;
                    } else {
                        clearInterval(interval);
                        incrementPassed();
                        log('success', 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆå®Œäº†');
                        updateResult('websocket-test-result', 'success', 
                            `ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆæˆåŠŸ\né€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆæ•°: ${updateEvents.length}\nå®Œäº†æ™‚åˆ»: ${new Date().toLocaleTimeString()}`);
                        decrementRunning();
                    }
                }, 2000);
                
            } catch (error) {
                incrementFailed();
                log('error', `ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('websocket-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                decrementRunning();
            }
        }

        async function disconnectWebSocket() {
            incrementRunning();
            log('info', 'WebSocketåˆ‡æ–­ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                if (websocket) {
                    websocket.close();
                    websocket = null;
                }
                
                incrementPassed();
                log('success', 'WebSocketåˆ‡æ–­ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('websocket-test-result', 'success', 
                    'WebSocketåˆ‡æ–­ãƒ†ã‚¹ãƒˆæˆåŠŸ\nåˆ‡æ–­æ™‚åˆ»: ' + new Date().toLocaleTimeString());
                
            } catch (error) {
                incrementFailed();
                log('error', `WebSocketåˆ‡æ–­ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('websocket-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèªé–¢æ•°
        async function checkSystemStatus() {
            log('info', 'ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèªé–‹å§‹');
            
            // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIçŠ¶æ…‹ç¢ºèª
            try {
                // å®Ÿéš›ã®ç’°å¢ƒã§ã¯ API health check
                // const response = await fetch('/api/health');
                updateSystemStatus('backend-status', 'online', 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
                log('success', 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
            } catch (error) {
                updateSystemStatus('backend-status', 'offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
                log('warning', 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
            }
            
            // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ã¯æ—¢ã«åˆæœŸåŒ–æ™‚ã«ç¢ºèªæ¸ˆã¿
            
            // Hooksã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
            updateSystemStatus('hooks-status', 'online', '13å€‹ç¨¼åƒä¸­');
            
            // AIçŠ¶æ…‹ç¢ºèª
            try {
                // å®Ÿéš›ã®ç’°å¢ƒã§ã¯ AI endpoint health check
                updateSystemStatus('ai-status', 'offline', 'æœªæ¥ç¶š');
                log('info', 'ãƒ­ãƒ¼ã‚«ãƒ«AI: æœªæ¥ç¶šï¼ˆãƒ†ã‚¹ãƒˆæ™‚ã«æ¥ç¶šï¼‰');
            } catch (error) {
                updateSystemStatus('ai-status', 'offline', 'ã‚¨ãƒ©ãƒ¼');
            }
            
            // WebSocketçŠ¶æ…‹
            updateSystemStatus('websocket-status', 'offline', 'æœªæ¥ç¶š');
            
            log('success', 'ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèªå®Œäº†');
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function updateSystemStatus(statusId, status, text) {
            const statusElement = document.getElementById(statusId);
            const textElement = document.getElementById(statusId + '-text');
            
            statusElement.classList.remove('online', 'offline', 'testing');
            statusElement.classList.add(status);
            textElement.textContent = text;
        }

        function updateResult(resultId, type, content) {
            const resultElement = document.getElementById(resultId);
            resultElement.classList.remove('result-success', 'result-error', 'result-info', 'result-warning');
            resultElement.classList.add(`result-${type}`);
            resultElement.textContent = content;
        }

        function log(level, message) {
            const logContainer = document.getElementById('realTimeLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span>
                <span>${message}</span>
            `;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function clearLogs() {
            document.getElementById('realTimeLog').innerHTML = '';
            log('info', 'ãƒ­ã‚°ã‚¯ãƒªã‚¢å®Œäº†');
        }

        function incrementTotal() {
            testStats.total++;
            updateStatsDisplay();
        }

        function incrementPassed() {
            testStats.passed++;
            incrementTotal();
        }

        function incrementFailed() {
            testStats.failed++;
            incrementTotal();
        }

        function incrementRunning() {
            testStats.running++;
            if (testStats.startTime === null) {
                testStats.startTime = Date.now();
            }
            updateStatsDisplay();
        }

        function decrementRunning() {
            testStats.running = Math.max(0, testStats.running - 1);
            updateStatsDisplay();
        }

        function updateStatsDisplay() {
            document.getElementById('total-tests').textContent = testStats.total;
            document.getElementById('passed-tests').textContent = testStats.passed;
            document.getElementById('failed-tests').textContent = testStats.failed;
            document.getElementById('running-tests').textContent = testStats.running;
            
            if (testStats.startTime) {
                const elapsed = Math.floor((Date.now() - testStats.startTime) / 1000);
                document.getElementById('total-time').textContent = elapsed + 's';
            }
            
            if (testStats.total > 0) {
                const coverage = Math.floor((testStats.passed / testStats.total) * 100);
                document.getElementById('coverage-percent').textContent = coverage + '%';
            }
        }

        // å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testRealHooksDataGeneration() {
            incrementRunning();
            log('info', 'å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const hookType = document.getElementById('testHookType').value;
                const testDataJson = document.getElementById('testHookData').value;
                
                let testData = {};
                if (testDataJson) {
                    testData = JSON.parse(testDataJson);
                }
                
                // å®Ÿéš›ã®Hookãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
                const hookResult = await executeRealHook(hookType, testData);
                
                // ç”Ÿæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼
                const validationResult = validateHookOutput(hookResult);
                
                incrementPassed();
                log('success', `å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆæˆåŠŸ: ${hookType}`);
                updateResult('real-hooks-test-result', 'success', 
                    `Hook: ${hookType}\nå…¥åŠ›: ${JSON.stringify(testData, null, 2)}\nå‡ºåŠ›: ${JSON.stringify(hookResult, null, 2)}\næ¤œè¨¼: ${validationResult.isValid ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `å®ŸHooksãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('real-hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testHtmlManipulation() {
            incrementRunning();
            log('info', 'HTMLæ“ä½œãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ãƒ†ã‚¹ãƒˆç”¨DOMè¦ç´ ä½œæˆ
                const testContainer = document.createElement('div');
                testContainer.id = 'hook-test-container';
                testContainer.innerHTML = `
                    <form id="test-form" style="color: red; font-size: 16px;">
                        <input type="text" name="username" required>
                        <button type="submit" style="background: blue;">é€ä¿¡</button>
                    </form>
                `;
                document.body.appendChild(testContainer);
                
                // CSSå¤–éƒ¨åŒ–Hookã®å®Ÿè¡Œ
                const cssResult = await executeRealHook('css_externalization', { 
                    targetElement: '#hook-test-container' 
                });
                
                // DOMå¤‰æ›´ç¢ºèª
                const form = document.getElementById('test-form');
                const hasClassAdded = form.classList.length > 0;
                const styleRemoved = !form.getAttribute('style');
                
                // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³Hookã®å®Ÿè¡Œ
                const validationResult = await executeRealHook('form_validation', {
                    targetForm: '#test-form'
                });
                
                // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ è¿½åŠ ç¢ºèª
                const validationElements = form.querySelectorAll('.validation-message');
                
                // ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€è¦ç´ å‰Šé™¤
                document.body.removeChild(testContainer);
                
                incrementPassed();
                log('success', 'HTMLæ“ä½œãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('real-hooks-test-result', 'success', 
                    `HTMLæ“ä½œãƒ†ã‚¹ãƒˆçµæœ:\nCSSå¤–éƒ¨åŒ–: ${hasClassAdded ? 'âœ…' : 'âŒ'}\nã‚¹ã‚¿ã‚¤ãƒ«å‰Šé™¤: ${styleRemoved ? 'âœ…' : 'âŒ'}\nãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ : ${validationElements.length > 0 ? 'âœ…' : 'âŒ'}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `HTMLæ“ä½œãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('real-hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testHooksFileProcessing() {
            incrementRunning();
            log('info', 'Hooksãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // å®Ÿéš›ã®Hooksãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ï¼ˆå®Ÿè£…æ™‚ã¯filesystem APIã‚’ä½¿ç”¨ï¼‰
                const hookFiles = await loadCAIDSHooksFiles();
                
                // å„Hookãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æ
                const analysisResults = [];
                for (const [filename, content] of Object.entries(hookFiles)) {
                    const analysis = analyzeHookFile(filename, content);
                    analysisResults.push(analysis);
                }
                
                // Hookså®Ÿè¡Œé †åºã®æœ€é©åŒ–
                const executionOrder = optimizeHooksExecutionOrder(analysisResults);
                
                incrementPassed();
                log('success', `Hooksãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ãƒ†ã‚¹ãƒˆæˆåŠŸ: ${analysisResults.length}å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†`);
                updateResult('real-hooks-test-result', 'success', 
                    `ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†çµæœ:\nå‡¦ç†ãƒ•ã‚¡ã‚¤ãƒ«æ•°: ${analysisResults.length}\nå®Ÿè¡Œé †åº: ${executionOrder.join(' â†’ ')}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `Hooksãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('real-hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testHooksIntegration() {
            incrementRunning();
            log('info', 'Hooksé€£æºãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // è¤‡æ•°ã®Hooksã‚’é€£æºå®Ÿè¡Œ
                const integrationChain = [
                    { hook: 'error_handling', data: { setupGlobalHandler: true } },
                    { hook: 'css_externalization', data: { targetSelector: '.test-element' } },
                    { hook: 'ajax_integration', data: { endpoint: '/api/test' } },
                    { hook: 'form_validation', data: { rules: ['required', 'email'] } }
                ];
                
                const chainResults = [];
                for (const step of integrationChain) {
                    const result = await executeRealHook(step.hook, step.data);
                    chainResults.push({ hook: step.hook, result, success: result.success !== false });
                }
                
                const successCount = chainResults.filter(r => r.success).length;
                
                incrementPassed();
                log('success', `Hooksé€£æºãƒ†ã‚¹ãƒˆæˆåŠŸ: ${successCount}/${chainResults.length}å€‹æˆåŠŸ`);
                updateResult('real-hooks-test-result', 'success', 
                    `é€£æºãƒ†ã‚¹ãƒˆçµæœ:\n${chainResults.map(r => `${r.hook}: ${r.success ? 'âœ…' : 'âŒ'}`).join('\n')}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `Hooksé€£æºãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('real-hooks-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        // CAIDSçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testCAIDSFullIntegration() {
            incrementRunning();
            log('info', 'CAIDSå®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const testHtml = document.getElementById('caidsTestHtml').value || 
                    '<div><button onclick="saveData()">ä¿å­˜</button></div>';
                const instruction = document.getElementById('caidsDevInstruction').value || 
                    'å•†å“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™º';
                
                // Phase 1: HTMLè§£æ
                const htmlAnalysis = await analyzeHtmlWithCAIDS(testHtml);
                
                // Phase 2: æ±ç”¨Hooksé¸å®š
                const universalHooks = await selectUniversalHooks(htmlAnalysis, instruction);
                
                // Phase 3: å°‚ç”¨Hooksç”Ÿæˆ
                const customHooks = await generateCustomHooks(htmlAnalysis, instruction);
                
                // Phase 4: çµ±åˆå®Ÿè¡Œ
                const integrationResult = await integrateAllHooks(universalHooks, customHooks);
                
                // Phase 5: å®Ÿè¡Œè¨ˆç”»ç”Ÿæˆ
                const executionPlan = await generateExecutionPlan(integrationResult);
                
                incrementPassed();
                log('success', 'CAIDSå®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('caids-integration-test-result', 'success', 
                    `çµ±åˆãƒ†ã‚¹ãƒˆçµæœ:\nHTMLè§£æ: âœ…\næ±ç”¨Hooks: ${universalHooks.length}å€‹\nå°‚ç”¨Hooks: ${customHooks.length}å€‹\nçµ±åˆæˆåŠŸ: âœ…\nå®Ÿè¡Œè¨ˆç”»: ç”Ÿæˆå®Œäº†`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CAIDSå®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('caids-integration-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testCAIDSAutoExecution() {
            incrementRunning();
            log('info', 'CAIDSè‡ªå¾‹å®Ÿè¡Œãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // è‡ªå¾‹å®Ÿè¡Œã‚·ãƒ¼ã‚±ãƒ³ã‚¹é–‹å§‹
                const autoExecResult = await executeCAIDSAutonomously();
                
                // å®Ÿè¡ŒçŠ¶æ³ç›£è¦–
                const monitoringResult = await monitorAutoExecution(autoExecResult.executionId);
                
                // ã‚¨ãƒ©ãƒ¼è‡ªå‹•å›å¾©ãƒ†ã‚¹ãƒˆ
                const recoveryResult = await testAutoErrorRecovery();
                
                incrementPassed();
                log('success', 'CAIDSè‡ªå¾‹å®Ÿè¡Œãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('caids-integration-test-result', 'success', 
                    `è‡ªå¾‹å®Ÿè¡Œçµæœ:\nå®Ÿè¡ŒID: ${autoExecResult.executionId}\nç›£è¦–çŠ¶æ³: ${monitoringResult.status}\nå›å¾©ãƒ†ã‚¹ãƒˆ: ${recoveryResult.success ? 'âœ…' : 'âŒ'}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CAIDSè‡ªå¾‹å®Ÿè¡Œãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('caids-integration-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testCAIDSHooksChain() {
            incrementRunning();
            log('info', 'CAIDS Hooksé€£é–ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // Hooksä¾å­˜é–¢ä¿‚è§£æ
                const dependencyGraph = await analyzeHooksDependencies();
                
                // æœ€é©å®Ÿè¡Œé †åºè¨ˆç®—
                const executionOrder = await calculateOptimalExecutionOrder(dependencyGraph);
                
                // é€£é–å®Ÿè¡Œ
                const chainResult = await executeHooksChain(executionOrder);
                
                incrementPassed();
                log('success', 'CAIDS Hooksé€£é–ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('caids-integration-test-result', 'success', 
                    `é€£é–å®Ÿè¡Œçµæœ:\nä¾å­˜é–¢ä¿‚: ${dependencyGraph.nodes}å€‹ã®ãƒãƒ¼ãƒ‰\nå®Ÿè¡Œé †åº: ${executionOrder.join(' â†’ ')}\næˆåŠŸç‡: ${chainResult.successRate}%`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CAIDS Hooksé€£é–ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('caids-integration-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testCAIDSErrorRecovery() {
            incrementRunning();
            log('info', 'CAIDSã‚¨ãƒ©ãƒ¼å›å¾©ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // æ„å›³çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿ
                const errorScenarios = [
                    { type: 'hook_execution_error', severity: 'medium' },
                    { type: 'dependency_missing', severity: 'high' },
                    { type: 'resource_unavailable', severity: 'low' }
                ];
                
                const recoveryResults = [];
                for (const scenario of errorScenarios) {
                    const result = await simulateErrorAndRecover(scenario);
                    recoveryResults.push(result);
                }
                
                const successfulRecoveries = recoveryResults.filter(r => r.recovered).length;
                
                incrementPassed();
                log('success', 'CAIDSã‚¨ãƒ©ãƒ¼å›å¾©ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('caids-integration-test-result', 'success', 
                    `ã‚¨ãƒ©ãƒ¼å›å¾©çµæœ:\nå›å¾©æˆåŠŸ: ${successfulRecoveries}/${errorScenarios.length}\n${recoveryResults.map(r => `${r.type}: ${r.recovered ? 'âœ…' : 'âŒ'}`).join('\n')}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `CAIDSã‚¨ãƒ©ãƒ¼å›å¾©ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('caids-integration-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        // å®ŸHookå®Ÿè¡Œé–¢æ•°ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
        async function executeRealHook(hookType, data = {}) {
            log('info', `å®ŸHookå®Ÿè¡Œ: ${hookType}`);
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€CAIDSã‚·ã‚¹ãƒ†ãƒ ã®Hookãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œ
            await new Promise(resolve => setTimeout(resolve, 500 + Math.random() * 1000));
            
            switch (hookType) {
                case 'css_externalization':
                    return {
                        success: true,
                        extractedCSS: '.extracted-class { color: red; }',
                        modifiedHTML: '<div class="extracted-class">å¤‰æ›´æ¸ˆã¿</div>',
                        filesCreated: ['styles.css'],
                        elementsProcessed: 3
                    };
                    
                case 'form_validation':
                    return {
                        success: true,
                        validationRules: ['required', 'email'],
                        elementsEnhanced: 2,
                        messagesAdded: 1,
                        errorHandlingAttached: true
                    };
                    
                case 'ajax_integration':
                    return {
                        success: true,
                        endpointsIntegrated: ['/api/users', '/api/products'],
                        errorHandlingAdded: true,
                        loadingStatesImplemented: true,
                        responseProcessingSetup: true
                    };
                    
                case 'error_handling':
                    return {
                        success: true,
                        globalHandlerSetup: true,
                        customErrorTypesRegistered: 3,
                        fallbackMechanismsActive: true,
                        loggingConfigured: true
                    };
                    
                default:
                    return {
                        success: Math.random() > 0.1,
                        hookType: hookType,
                        data: data,
                        timestamp: new Date().toISOString()
                    };
            }
        }

        // Hookãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
        async function loadCAIDSHooksFiles() {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ filesystem API ã‚’ä½¿ç”¨
            return {
                'åŸºæœ¬å¿…é ˆhooksï¼ˆ4å€‹ï¼‰.py': 'def error_handling_hook():\n    return {...}',
                'å¿…é ˆHooksè‡ªå‹•èª­ã¿è¾¼ã¿ãƒˆãƒªã‚¬ãƒ¼.py': 'class EssentialHooksAutoLoader:\n    ...',
                'CSSçµ±åˆã‚·ã‚¹ãƒ†ãƒ _ãƒ¡ã‚¤ãƒ³9æ©Ÿèƒ½.py': 'def css_externalization_hook():\n    ...'
            };
        }

        // Hookå‡ºåŠ›æ¤œè¨¼
        function validateHookOutput(hookResult) {
            const validationChecks = [
                { name: 'success_field', passed: 'success' in hookResult },
                { name: 'timestamp_valid', passed: hookResult.timestamp || hookResult.success },
                { name: 'data_structure', passed: typeof hookResult === 'object' },
                { name: 'no_errors', passed: !hookResult.error }
            ];
            
            const passedChecks = validationChecks.filter(c => c.passed).length;
            
            return {
                isValid: passedChecks === validationChecks.length,
                score: (passedChecks / validationChecks.length) * 100,
                details: validationChecks
            };
        }

        // å‹•çš„UIæ“ä½œãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testElementVisibilityToggle() {
            incrementRunning();
            log('info', 'è¦ç´ è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const playground = document.getElementById('ui-test-playground');
                
                // ãƒ†ã‚¹ãƒˆè¦ç´ ã‚’ä½œæˆ
                const testElement = document.createElement('div');
                testElement.id = 'visibility-test-element';
                testElement.innerHTML = `
                    <div style="padding: 15px; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 5px; margin: 10px 0;">
                        <h5>ğŸ‘ï¸ è¡¨ç¤ºãƒ†ã‚¹ãƒˆè¦ç´ </h5>
                        <p>ã“ã®è¦ç´ ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
                        <button id="toggle-btn" onclick="toggleTestElement()">ğŸ”„ åˆ‡ã‚Šæ›¿ãˆ</button>
                        <button id="hide-btn" onclick="hideTestElement()">ğŸ‘ï¸â€ğŸ—¨ï¸ éè¡¨ç¤º</button>
                        <button id="show-btn" onclick="showTestElement()">ğŸ‘ï¸ è¡¨ç¤º</button>
                    </div>
                `;
                playground.appendChild(testElement);
                
                // è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ»åˆ‡ã‚Šæ›¿ãˆã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                const testResults = [];
                
                // 1. éè¡¨ç¤ºãƒ†ã‚¹ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 500));
                hideTestElement();
                const isHidden = testElement.style.display === 'none';
                testResults.push(`éè¡¨ç¤ºãƒ†ã‚¹ãƒˆ: ${isHidden ? 'âœ…' : 'âŒ'}`);
                
                // 2. è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 500));
                showTestElement();
                const isVisible = testElement.style.display !== 'none';
                testResults.push(`è¡¨ç¤ºãƒ†ã‚¹ãƒˆ: ${isVisible ? 'âœ…' : 'âŒ'}`);
                
                // 3. åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 500));
                toggleTestElement();
                const toggleWorked = testElement.style.display === 'none';
                testResults.push(`åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ: ${toggleWorked ? 'âœ…' : 'âŒ'}`);
                
                // 4. é€æ˜åº¦å¤‰æ›´ãƒ†ã‚¹ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 500));
                testElement.style.display = 'block';
                testElement.style.opacity = '0.5';
                testResults.push(`é€æ˜åº¦å¤‰æ›´: âœ…`);
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã‚’å®šç¾©
                window.toggleTestElement = () => {
                    const element = document.getElementById('visibility-test-element');
                    element.style.display = element.style.display === 'none' ? 'block' : 'none';
                };
                
                window.hideTestElement = () => {
                    document.getElementById('visibility-test-element').style.display = 'none';
                };
                
                window.showTestElement = () => {
                    document.getElementById('visibility-test-element').style.display = 'block';
                };
                
                incrementPassed();
                log('success', 'è¦ç´ è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ui-test-result', 'success', 
                    `è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ†ã‚¹ãƒˆçµæœ:\n${testResults.join('\n')}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `è¡¨ç¤ºãƒ»éè¡¨ç¤ºãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ui-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testElementCreationDeletion() {
            incrementRunning();
            log('info', 'è¦ç´ ä½œæˆãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const playground = document.getElementById('ui-test-playground');
                const testResults = [];
                
                // 1. è¦ç´ ä½œæˆãƒ†ã‚¹ãƒˆ
                const newElement = document.createElement('div');
                newElement.id = 'dynamic-created-element';
                newElement.innerHTML = `
                    <div style="padding: 10px; background: #e8f5e8; border: 1px solid #4caf50; border-radius: 5px; margin: 10px 0;">
                        <h5>â• å‹•çš„ä½œæˆè¦ç´ </h5>
                        <p>ã“ã®è¦ç´ ã¯å‹•çš„ã«ä½œæˆã•ã‚Œã¾ã—ãŸ</p>
                        <button onclick="deleteCreatedElement()">ğŸ—‘ï¸ ã“ã®è¦ç´ ã‚’å‰Šé™¤</button>
                        <button onclick="addMoreElements()">â• ã•ã‚‰ã«è¿½åŠ </button>
                    </div>
                `;
                playground.appendChild(newElement);
                testResults.push('è¦ç´ ä½œæˆ: âœ…');
                
                // 2. è¤‡æ•°è¦ç´ ä½œæˆãƒ†ã‚¹ãƒˆ
                for (let i = 1; i <= 3; i++) {
                    const listItem = document.createElement('div');
                    listItem.className = 'dynamic-list-item';
                    listItem.innerHTML = `
                        <div style="padding: 5px; background: #fff3e0; border: 1px solid #ff9800; border-radius: 3px; margin: 5px 0; display: flex; justify-content: space-between; align-items: center;">
                            <span>ğŸ“‹ ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  ${i}</span>
                            <button onclick="removeListItem(this)" style="background: #f44336; color: white; border: none; padding: 2px 8px; border-radius: 3px; cursor: pointer;">âŒ</button>
                        </div>
                    `;
                    playground.appendChild(listItem);
                }
                testResults.push('ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ä½œæˆ: âœ… (3å€‹)');
                
                // 3. ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ å‹•çš„ä½œæˆ
                const dynamicForm = document.createElement('form');
                dynamicForm.id = 'dynamic-form';
                dynamicForm.innerHTML = `
                    <div style="padding: 10px; background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 5px; margin: 10px 0;">
                        <h5>ğŸ“ å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ </h5>
                        <div id="dynamic-fields"></div>
                        <button type="button" onclick="addFormField()">â• ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ </button>
                        <button type="button" onclick="removeLastField()">â– æœ€å¾Œã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤</button>
                    </div>
                `;
                playground.appendChild(dynamicForm);
                testResults.push('å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ: âœ…');
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å®šç¾©
                window.deleteCreatedElement = () => {
                    const element = document.getElementById('dynamic-created-element');
                    if (element) {
                        element.remove();
                        log('info', 'å‹•çš„ä½œæˆè¦ç´ ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                    }
                };
                
                window.addMoreElements = () => {
                    const playground = document.getElementById('ui-test-playground');
                    const newItem = document.createElement('div');
                    newItem.innerHTML = `
                        <div style="padding: 8px; background: #e1f5fe; border: 1px solid #03a9f4; border-radius: 5px; margin: 5px 0;">
                            <span>ğŸ†• è¿½åŠ è¦ç´  ${Date.now()}</span>
                            <button onclick="this.parentElement.parentElement.remove()" style="margin-left: 10px; background: #f44336; color: white; border: none; padding: 2px 8px; border-radius: 3px; cursor: pointer;">å‰Šé™¤</button>
                        </div>
                    `;
                    playground.appendChild(newItem);
                };
                
                window.removeListItem = (button) => {
                    button.closest('.dynamic-list-item').remove();
                    log('info', 'ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                };
                
                window.addFormField = () => {
                    const fieldsContainer = document.getElementById('dynamic-fields');
                    const fieldCount = fieldsContainer.children.length + 1;
                    const newField = document.createElement('div');
                    newField.innerHTML = `
                        <div style="margin: 5px 0; display: flex; align-items: center; gap: 10px;">
                            <label>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ${fieldCount}:</label>
                            <input type="text" placeholder="å€¤ã‚’å…¥åŠ›" style="flex: 1; padding: 5px;">
                            <button type="button" onclick="this.parentElement.remove()">âŒ</button>
                        </div>
                    `;
                    fieldsContainer.appendChild(newField);
                };
                
                window.removeLastField = () => {
                    const fieldsContainer = document.getElementById('dynamic-fields');
                    if (fieldsContainer.lastElementChild) {
                        fieldsContainer.lastElementChild.remove();
                    }
                };
                
                incrementPassed();
                log('success', 'è¦ç´ ä½œæˆãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ui-test-result', 'success', 
                    `è¦ç´ ä½œæˆãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆçµæœ:\n${testResults.join('\n')}`);
                
            } catch (error) {
                incrementFailed();
                log('error', `è¦ç´ ä½œæˆãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ui-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testModalOperations() {
            incrementRunning();
            log('info', 'ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const playground = document.getElementById('ui-test-playground');
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ä½œæˆ
                const modalContainer = document.createElement('div');
                modalContainer.innerHTML = `
                    <div style="margin: 10px 0;">
                        <button id="open-modal-btn" onclick="openTestModal()" class="btn btn-primary">ğŸªŸ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã</button>
                    </div>
                    
                    <div id="test-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 10px; min-width: 300px;">
                            <h5>ğŸ“‹ ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«</h5>
                            <p>ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™</p>
                            <div style="margin: 10px 0;">
                                <input type="text" placeholder="ãƒ†ã‚¹ãƒˆå…¥åŠ›" style="width: 100%; padding: 8px; margin: 5px 0;">
                                <select style="width: 100%; padding: 8px; margin: 5px 0;">
                                    <option>ã‚ªãƒ—ã‚·ãƒ§ãƒ³1</option>
                                    <option>ã‚ªãƒ—ã‚·ãƒ§ãƒ³2</option>
                                </select>
                            </div>
                            <div style="text-align: right; margin-top: 15px;">
                                <button onclick="closeTestModal()" class="btn btn-danger">âŒ é–‰ã˜ã‚‹</button>
                                <button onclick="confirmModalAction()" class="btn btn-success" style="margin-left: 10px;">âœ… ç¢ºèª</button>
                            </div>
                        </div>
                    </div>
                `;
                playground.appendChild(modalContainer);
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œé–¢æ•°å®šç¾©
                window.openTestModal = () => {
                    document.getElementById('test-modal').style.display = 'block';
                    log('info', 'ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãã¾ã—ãŸ');
                };
                
                window.closeTestModal = () => {
                    document.getElementById('test-modal').style.display = 'none';
                    log('info', 'ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã¾ã—ãŸ');
                };
                
                window.confirmModalAction = () => {
                    log('success', 'ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒç¢ºèªã•ã‚Œã¾ã—ãŸ');
                    closeTestModal();
                };
                
                // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹æ©Ÿèƒ½
                const escapeHandler = (event) => {
                    if (event.key === 'Escape') {
                        closeTestModal();
                    }
                };
                document.addEventListener('keydown', escapeHandler);
                
                // èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹æ©Ÿèƒ½
                document.getElementById('test-modal').addEventListener('click', (event) => {
                    if (event.target.id === 'test-modal') {
                        closeTestModal();
                    }
                });
                
                incrementPassed();
                log('success', 'ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ui-test-result', 'success', 
                    'ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆçµæœ:\nãƒ¢ãƒ¼ãƒ€ãƒ«ä½œæˆ: âœ…\né–‹é–‰æ©Ÿèƒ½: âœ…\nESCã‚­ãƒ¼å¯¾å¿œ: âœ…\nèƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯å¯¾å¿œ: âœ…');
                
            } catch (error) {
                incrementFailed();
                log('error', `ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ui-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testFormDynamicFields() {
            incrementRunning();
            log('info', 'å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const playground = document.getElementById('ui-test-playground');
                
                // å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ
                const dynamicFormContainer = document.createElement('div');
                dynamicFormContainer.innerHTML = `
                    <div style="padding: 15px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; margin: 10px 0;">
                        <h5>ğŸ“ å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆ</h5>
                        <form id="dynamic-test-form">
                            <div id="form-fields-container">
                                <div class="field-group" style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                                    <label>åå‰:</label>
                                    <input type="text" name="name" required style="margin-left: 10px; padding: 5px;">
                                    <button type="button" onclick="removeField(this)" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 3px 8px; border-radius: 3px;">å‰Šé™¤</button>
                                </div>
                            </div>
                            <div style="margin: 15px 0;">
                                <button type="button" onclick="addTextField()" class="btn btn-success">â• ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ </button>
                                <button type="button" onclick="addSelectField()" class="btn btn-info">ğŸ“‹ ã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ </button>
                                <button type="button" onclick="addCheckboxField()" class="btn btn-warning">â˜‘ï¸ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹è¿½åŠ </button>
                            </div>
                            <div style="margin: 15px 0;">
                                <button type="button" onclick="validateDynamicForm()" class="btn btn-primary">âœ… ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼</button>
                                <button type="button" onclick="clearAllFields()" class="btn btn-danger">ğŸ—‘ï¸ å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¯ãƒªã‚¢</button>
                            </div>
                        </form>
                        <div id="form-validation-result" style="margin-top: 10px; padding: 10px; background: #e9ecef; border-radius: 5px;"></div>
                    </div>
                `;
                playground.appendChild(dynamicFormContainer);
                
                // å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ æ“ä½œé–¢æ•°
                window.addTextField = () => {
                    const container = document.getElementById('form-fields-container');
                    const fieldCount = container.children.length + 1;
                    const newField = document.createElement('div');
                    newField.className = 'field-group';
                    newField.style.cssText = 'margin: 10px 0; padding: 10px; background: white; border-radius: 5px;';
                    newField.innerHTML = `
                        <label>ãƒ†ã‚­ã‚¹ãƒˆ ${fieldCount}:</label>
                        <input type="text" name="text_${fieldCount}" placeholder="å€¤ã‚’å…¥åŠ›" style="margin-left: 10px; padding: 5px;">
                        <button type="button" onclick="removeField(this)" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 3px 8px; border-radius: 3px;">å‰Šé™¤</button>
                    `;
                    container.appendChild(newField);
                    log('info', `ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ${fieldCount} ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);
                };
                
                window.addSelectField = () => {
                    const container = document.getElementById('form-fields-container');
                    const fieldCount = container.children.length + 1;
                    const newField = document.createElement('div');
                    newField.className = 'field-group';
                    newField.style.cssText = 'margin: 10px 0; padding: 10px; background: white; border-radius: 5px;';
                    newField.innerHTML = `
                        <label>é¸æŠ ${fieldCount}:</label>
                        <select name="select_${fieldCount}" style="margin-left: 10px; padding: 5px;">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="option1">ã‚ªãƒ—ã‚·ãƒ§ãƒ³1</option>
                            <option value="option2">ã‚ªãƒ—ã‚·ãƒ§ãƒ³2</option>
                            <option value="option3">ã‚ªãƒ—ã‚·ãƒ§ãƒ³3</option>
                        </select>
                        <button type="button" onclick="removeField(this)" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 3px 8px; border-radius: 3px;">å‰Šé™¤</button>
                    `;
                    container.appendChild(newField);
                    log('info', `ã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ${fieldCount} ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);
                };
                
                window.addCheckboxField = () => {
                    const container = document.getElementById('form-fields-container');
                    const fieldCount = container.children.length + 1;
                    const newField = document.createElement('div');
                    newField.className = 'field-group';
                    newField.style.cssText = 'margin: 10px 0; padding: 10px; background: white; border-radius: 5px;';
                    newField.innerHTML = `
                        <label>
                            <input type="checkbox" name="checkbox_${fieldCount}" value="checked" style="margin-right: 5px;">
                            ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ ${fieldCount}
                        </label>
                        <button type="button" onclick="removeField(this)" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 3px 8px; border-radius: 3px;">å‰Šé™¤</button>
                    `;
                    container.appendChild(newField);
                    log('info', `ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ ${fieldCount} ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);
                };
                
                window.removeField = (button) => {
                    button.closest('.field-group').remove();
                    log('info', 'ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                };
                
                window.validateDynamicForm = () => {
                    const form = document.getElementById('dynamic-test-form');
                    const formData = new FormData(form);
                    const result = document.getElementById('form-validation-result');
                    
                    let validationResults = [];
                    let isValid = true;
                    
                    // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
                    const requiredFields = form.querySelectorAll('[required]');
                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            validationResults.push(`âŒ ${field.name} ã¯å¿…é ˆã§ã™`);
                            isValid = false;
                        } else {
                            validationResults.push(`âœ… ${field.name} OK`);
                        }
                    });
                    
                    // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
                    const formValues = [];
                    for (const [key, value] of formData.entries()) {
                        formValues.push(`${key}: ${value || '(ç©º)'}`);
                    }
                    
                    result.innerHTML = `
                        <h6>ğŸ” ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼çµæœ</h6>
                        <div style="margin: 10px 0;">
                            <strong>æ¤œè¨¼çŠ¶æ…‹:</strong> ${isValid ? 'âœ… æœ‰åŠ¹' : 'âŒ ç„¡åŠ¹'}
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>æ¤œè¨¼è©³ç´°:</strong><br>
                            ${validationResults.join('<br>')}
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿:</strong><br>
                            ${formValues.join('<br>')}
                        </div>
                    `;
                    
                    log(isValid ? 'success' : 'warning', `ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼${isValid ? 'æˆåŠŸ' : 'å¤±æ•—'}`);
                };
                
                window.clearAllFields = () => {
                    const container = document.getElementById('form-fields-container');
                    container.innerHTML = '';
                    document.getElementById('form-validation-result').innerHTML = 'å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ';
                    log('info', 'å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
                };
                
                incrementPassed();
                log('success', 'å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ui-test-result', 'success', 
                    'å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆçµæœ:\nãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ: âœ…\nå‹•çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ : âœ…\nãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤: âœ…\nãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼: âœ…');
                
            } catch (error) {
                incrementFailed();
                log('error', `å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ui-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }

        async function testButtonStatesAndEvents() {
            incrementRunning();
            log('info', 'ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const playground = document.getElementById('ui-test-playground');
                
                // ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒ†ãƒŠä½œæˆ
                const buttonTestContainer = document.createElement('div');
                buttonTestContainer.innerHTML = `
                    <div style="padding: 15px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; margin: 10px 0;">
                        <h5>ğŸ”˜ ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</h5>
                        
                        <div style="margin: 10px 0;">
                            <h6>ğŸ“Š ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ:</h6>
                            <button id="state-btn-normal" class="btn btn-primary">é€šå¸¸çŠ¶æ…‹</button>
                            <button id="state-btn-disabled" class="btn btn-secondary" disabled>ç„¡åŠ¹çŠ¶æ…‹</button>
                            <button id="state-btn-loading" class="btn btn-warning">ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹</button>
                            <button id="state-btn-toggle" class="btn btn-success" onclick="toggleButtonState(this)">åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³</button>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <h6>ğŸ¯ ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ:</h6>
                            <button id="click-counter" class="btn btn-info" onclick="incrementClickCounter(this)">ã‚¯ãƒªãƒƒã‚¯: 0å›</button>
                            <button id="hover-btn" class="btn btn-warning" onmouseenter="handleHover(this, true)" onmouseleave="handleHover(this, false)">ãƒ›ãƒãƒ¼ãƒ†ã‚¹ãƒˆ</button>
                            <button id="double-click-btn" class="btn btn-danger" ondblclick="handleDoubleClick(this)">ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</button>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <h6>ğŸ”„ å‹•çš„ãƒœã‚¿ãƒ³:</h6>
                            <button onclick="createDynamicButton()" class="btn btn-success">â• ãƒœã‚¿ãƒ³è¿½åŠ </button>
                            <button onclick="removeAllDynamicButtons()" class="btn btn-danger">ğŸ—‘ï¸ å…¨å‰Šé™¤</button>
                            <div id="dynamic-buttons-container" style="margin-top: 10px;"></div>
                        </div>
                        
                        <div style="margin: 15px 0;">
                            <h6>ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœ:</h6>
                            <div id="button-test-log" style="background: white; padding: 10px; border-radius: 5px; max-height: 150px; overflow-y: auto;"></div>
                        </div>
                    </div>
                `;
                playground.appendChild(buttonTestContainer);
                
                // ãƒœã‚¿ãƒ³æ“ä½œé–¢æ•°
                let clickCount = 0;
                let dynamicButtonCount = 0;
                
                window.toggleButtonState = (button) => {
                    if (button.disabled) {
                        button.disabled = false;
                        button.textContent = 'æœ‰åŠ¹çŠ¶æ…‹';
                        button.className = 'btn btn-success';
                        addButtonLog('ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸ');
                    } else {
                        button.disabled = true;
                        button.textContent = 'ç„¡åŠ¹çŠ¶æ…‹';
                        button.className = 'btn btn-secondary';
                        addButtonLog('ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã—ãŸ');
                    }
                };
                
                window.incrementClickCounter = (button) => {
                    clickCount++;
                    button.textContent = `ã‚¯ãƒªãƒƒã‚¯: ${clickCount}å›`;
                    addButtonLog(`ã‚¯ãƒªãƒƒã‚¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼: ${clickCount}å›`);
                };
                
                window.handleHover = (button, isEntering) => {
                    if (isEntering) {
                        button.style.transform = 'scale(1.1)';
                        button.style.boxShadow = '0 4px 15px rgba(0,0,0,0.3)';
                        addButtonLog('ãƒœã‚¿ãƒ³ã«ãƒ›ãƒãƒ¼ã—ã¾ã—ãŸ');
                    } else {
                        button.style.transform = 'scale(1)';
                        button.style.boxShadow = 'none';
                        addButtonLog('ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ›ãƒãƒ¼ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                    }
                };
                
                window.handleDoubleClick = (button) => {
                    button.style.background = '#ff6b6b';
                    button.textContent = 'ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ¤œå‡ºï¼';
                    addButtonLog('ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ');
                    setTimeout(() => {
                        button.style.background = '';
                        button.textContent = 'ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯';
                    }, 2000);
                };
                
                window.createDynamicButton = () => {
                    dynamicButtonCount++;
                    const container = document.getElementById('dynamic-buttons-container');
                    const newButton = document.createElement('button');
                    newButton.className = 'btn btn-primary';
                    newButton.style.margin = '5px';
                    newButton.textContent = `å‹•çš„ãƒœã‚¿ãƒ³ ${dynamicButtonCount}`;
                    newButton.onclick = function() {
                        this.remove();
                        addButtonLog(`å‹•çš„ãƒœã‚¿ãƒ³ ${dynamicButtonCount} ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸ`);
                    };
                    container.appendChild(newButton);
                    addButtonLog(`å‹•çš„ãƒœã‚¿ãƒ³ ${dynamicButtonCount} ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);
                };
                
                window.removeAllDynamicButtons = () => {
                    const container = document.getElementById('dynamic-buttons-container');
                    const buttonCount = container.children.length;
                    container.innerHTML = '';
                    addButtonLog(`${buttonCount}å€‹ã®å‹•çš„ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
                };
                
                function addButtonLog(message) {
                    const logContainer = document.getElementById('button-test-log');
                    const timestamp = new Date().toLocaleTimeString();
                    const logEntry = document.createElement('div');
                    logEntry.style.fontSize = '0.9rem';
                    logEntry.style.margin = '2px 0';
                    logEntry.innerHTML = `<span style="color: #666;">[${timestamp}]</span> ${message}`;
                    logContainer.appendChild(logEntry);
                    logContainer.scrollTop = logContainer.scrollHeight;
                }
                
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const loadingBtn = document.getElementById('state-btn-loading');
                loadingBtn.onclick = function() {
                    this.disabled = true;
                    this.textContent = 'å‡¦ç†ä¸­...';
                    this.innerHTML = '<span style="animation: spin 1s linear infinite;">â³</span> å‡¦ç†ä¸­...';
                    addButtonLog('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’é–‹å§‹');
                    
                    setTimeout(() => {
                        this.disabled = false;
                        this.textContent = 'ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹';
                        this.innerHTML = 'ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹';
                        addButtonLog('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ãŒå®Œäº†');
                    }, 3000);
                };
                
                // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                `;
                document.head.appendChild(style);
                
                incrementPassed();
                log('success', 'ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆæˆåŠŸ');
                updateResult('ui-test-result', 'success', 
                    'ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆçµæœ:\nãƒœã‚¿ãƒ³çŠ¶æ…‹åˆ¶å¾¡: âœ…\nã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ: âœ…\nãƒ›ãƒãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ: âœ…\nãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯: âœ…\nå‹•çš„ãƒœã‚¿ãƒ³: âœ…\nãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹: âœ…');
                
            } catch (error) {
                incrementFailed();
                log('error', `ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`);
                updateResult('ui-test-result', 'error', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
            
            decrementRunning();
        }
            return {
                elements: ['button', 'div'],
                complexity: 2.5,
                customAttributes: ['onclick'],
                recommendedHooks: ['error_handling', 'ajax_integration']
            };
        }

        async function selectUniversalHooks(analysis, instruction) {
            return [
                { name: 'error_handling', priority: 'high' },
                { name: 'css_externalization', priority: 'medium' },
                { name: 'ajax_integration', priority: 'high' }
            ];
        }

        async function generateCustomHooks(analysis, instruction) {
            return [
                { name: 'save_data_hook', type: 'custom', generatedFrom: 'onclick="saveData()"' }
            ];
        }
    </script>
</body>
</html>