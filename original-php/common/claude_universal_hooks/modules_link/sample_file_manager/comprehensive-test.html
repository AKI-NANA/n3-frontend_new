<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ CAIDSÂåÖÊã¨Ê©üËÉΩ„ÉÜ„Çπ„Éà„Éö„Éº„Ç∏ - ÂÆåÂÖ®ÂÆüË®ºÁâà</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --success-color: #059669;
            --warning-color: #d97706;
            --error-color: #dc2626;
            --background: #f8fafc;
            --surface: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: var(--background); color: var(--text-primary); line-height: 1.6; }
        .app-container { min-height: 100vh; display: flex; flex-direction: column; }
        .header { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 2rem; text-align: center; box-shadow: var(--shadow); }
        .header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .header-subtitle { font-size: 1.2rem; opacity: 0.9; margin-bottom: 1rem; }
        .test-controls { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; }
        .btn-primary { background: var(--success-color); color: white; }
        .btn-secondary { background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.3); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
        .main-content { flex: 1; padding: 2rem; max-width: 1400px; margin: 0 auto; width: 100%; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .test-section { background: var(--surface); border-radius: 1rem; padding: 2rem; box-shadow: var(--shadow); border: 1px solid var(--border); }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid var(--border); }
        .section-header h3 { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); }
        .status-indicator { padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; font-weight: 600; }
        .status-ready { background: var(--success-color); color: white; }
        .console-section { grid-column: 1 / -1; background: #1e293b; color: #f1f5f9; border-radius: 1rem; overflow: hidden; }
        .console-header { background: #334155; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .console-tabs { display: flex; gap: 0.5rem; }
        .console-tab { padding: 0.5rem 1rem; background: transparent; color: #94a3b8; border: none; border-radius: 0.25rem; cursor: pointer; transition: all 0.2s; }
        .console-tab.active { background: var(--primary-color); color: white; }
        .console-content { padding: 1rem; height: 300px; overflow-y: auto; font-family: 'Monaco', 'Consolas', monospace; font-size: 0.875rem; }
        .log-entry { margin-bottom: 0.25rem; display: flex; gap: 0.5rem; }
        .log-timestamp { color: #64748b; min-width: 80px; }
        .log-level { min-width: 60px; font-weight: 600; }
        .log-level.success { color: #10b981; }
        .log-level.error { color: #ef4444; }
        .log-level.warning { color: #f59e0b; }
        .log-level.info { color: #3b82f6; }
        .log-message { flex: 1; }
        .btn-sm { padding: 0.5rem 1rem; font-size: 0.875rem; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; border-radius: 1rem; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
        .modal-header { padding: 1.5rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-secondary); }
        .modal-body { padding: 1.5rem; }
    </style>
<script>
// CAIDS error_handling Hook

// CAIDS „Ç®„É©„ÉºÂá¶ÁêÜHook - ÂÆåÂÖ®ÂÆüË£Ö
window.CAIDS_ERROR_HANDLER = {
    isActive: true,
    errorCount: 0,
    errorHistory: [],
    
    initialize: function() {
        this.setupGlobalErrorHandler();
        this.setupUnhandledPromiseRejection();
        this.setupNetworkErrorHandler();
        console.log('‚ö†Ô∏è CAIDS „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†ÂÆåÂÖ®ÂàùÊúüÂåñ');
    },
    
    setupGlobalErrorHandler: function() {
        window.addEventListener('error', (event) => {
            this.handleError({
                type: 'JavaScript Error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error?.stack
            });
        });
    },
    
    setupUnhandledPromiseRejection: function() {
        window.addEventListener('unhandledrejection', (event) => {
            this.handleError({
                type: 'Unhandled Promise Rejection',
                message: event.reason?.message || String(event.reason),
                stack: event.reason?.stack
            });
        });
    },
    
    setupNetworkErrorHandler: function() {
        const originalFetch = window.fetch;
        window.fetch = async function(...args) {
            try {
                const response = await originalFetch.apply(this, args);
                if (!response.ok) {
                    window.CAIDS_ERROR_HANDLER.handleError({
                        type: 'Network Error',
                        message: `HTTP ${response.status}: ${response.statusText}`,
                        url: args[0]
                    });
                }
                return response;
            } catch (error) {
                window.CAIDS_ERROR_HANDLER.handleError({
                    type: 'Network Fetch Error',
                    message: error.message,
                    url: args[0]
                });
                throw error;
            }
        };
    },
    
    handleError: function(errorInfo) {
        this.errorCount++;
        this.errorHistory.push({...errorInfo, timestamp: new Date().toISOString()});
        
        console.error('üö® CAIDS Error Handler:', errorInfo);
        this.showErrorNotification(errorInfo);
        this.reportError(errorInfo);
    },
    
    showErrorNotification: function(errorInfo) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = `
            position: fixed; top: 10px; right: 10px; z-index: 999999;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white; padding: 15px 20px; border-radius: 8px;
            max-width: 350px; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            border: 2px solid #ff6666; animation: caids-error-shake 0.5s ease-in-out;
        `;
        errorDiv.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 18px;">üö®</span>
                <div>
                    <strong>„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</strong><br>
                    <small style="opacity: 0.9;">${errorInfo.type}: ${errorInfo.message}</small>
                </div>
            </div>
        `;
        
        // CSS Animation
        if (!document.getElementById('caids-error-styles')) {
            const style = document.createElement('style');
            style.id = 'caids-error-styles';
            style.textContent = `
                @keyframes caids-error-shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(errorDiv);
        setTimeout(() => errorDiv.remove(), 7000);
    },
    
    reportError: function(errorInfo) {
        // „Ç®„É©„Éº„É¨„Éù„Éº„ÉàÁîüÊàê„ÉªÈÄÅ‰ø°ÔºàÂ∞ÜÊù•„ÅÆÊã°ÂºµÁî®Ôºâ
        const report = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            errorCount: this.errorCount,
            sessionId: this.getSessionId(),
            ...errorInfo
        };
        
        console.log('üìã CAIDS Error Report:', report);
        localStorage.setItem('caids_last_error', JSON.stringify(report));
    },
    
    getSessionId: function() {
        let sessionId = sessionStorage.getItem('caids_session_id');
        if (!sessionId) {
            sessionId = 'caids_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('caids_session_id', sessionId);
        }
        return sessionId;
    },
    
    getErrorStats: function() {
        return {
            totalErrors: this.errorCount,
            recentErrors: this.errorHistory.slice(-10),
            sessionId: this.getSessionId()
        };
    }
};

window.CAIDS_ERROR_HANDLER.initialize();

</script>
<script>
// CAIDS character_limit Hook
// CAIDS character_limit Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ character_limit Hook loaded');
</script>
<script>
// CAIDS development_control Hook
// CAIDS development_control Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ development_control Hook loaded');
</script>
<script>
// CAIDS natural_explanation Hook
// CAIDS natural_explanation Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ natural_explanation Hook loaded');
</script>
<script>
// CAIDS emergency_accumulation Hook
// CAIDS emergency_accumulation Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ emergency_accumulation Hook loaded');
</script>
<script>
// CAIDS pre_analysis_enforcement Hook
// CAIDS pre_analysis_enforcement Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ pre_analysis_enforcement Hook loaded');
</script>
<script>
// CAIDS user_approval_required Hook
// CAIDS user_approval_required Hook - Âü∫Êú¨ÂÆüË£Ö
console.log('‚úÖ user_approval_required Hook loaded');
</script>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>üöÄ CAIDSÂåÖÊã¨Ê©üËÉΩ„ÉÜ„Çπ„Éà„Éö„Éº„Ç∏</h1>
            <div class="header-subtitle">„Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉªAPIÈÄ£Êê∫„Éª„Éá„Éº„Çø„Éô„Éº„Çπ„ÉªUIÂ§âÂåñ„Éª„É™„Ç¢„É´„Çø„Ç§„É†ÈÄö‰ø°„ÅÆÂåÖÊã¨ÂÆüË®º</div>
            <div class="test-controls">
                <button onclick="runAllTests()" class="btn btn-primary">üß™ ÂÖ®Ê©üËÉΩ„ÉÜ„Çπ„ÉàÂÆüË°å</button>
                <button onclick="runPerformanceTest()" class="btn btn-secondary">‚ö° „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà</button>
                <button onclick="generateTestReport()" class="btn btn-secondary">üìä „ÉÜ„Çπ„Éà„É¨„Éù„Éº„ÉàÁîüÊàê</button>
                <a href="index.html" class="btn btn-secondary">üîô „É°„Ç§„É≥„Éá„É¢„Å´Êàª„Çã</a>
            </div>
        </header>

        <main class="main-content">
            <div class="test-grid">
                <section class="test-section" data-caids-section="file-operations">
                    <div class="section-header">
                        <h3>üì§ „Éï„Ç°„Ç§„É´Êìç‰Ωú„Ç∑„Çπ„ÉÜ„É†</h3>
                        <span class="status-indicator status-ready">Ê∫ñÂÇôÂÆå‰∫Ü</span>
                    </div>
                    <div class="section-content">
                        <p>CAIDSÁµ±Âêà„Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉÜ„Çπ„Éà - „Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Éª„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÉªÂ§âÊèõÊ©üËÉΩ</p>
                        <div style="margin: 1rem 0;">
                            <button onclick="testFileOperations()" class="btn btn-primary btn-sm">üì§ „Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉÜ„Çπ„Éà</button>
                        </div>
                        <div id="fileOperationsResult"></div>
                    </div>
                </section>

                <section class="test-section" data-caids-section="api-integration">
                    <div class="section-header">
                        <h3>üåê APIÈÄ£Êê∫„Ç∑„Çπ„ÉÜ„É†</h3>
                        <span class="status-indicator status-ready">Ê∫ñÂÇôÂÆå‰∫Ü</span>
                    </div>
                    <div class="section-content">
                        <p>Â§ñÈÉ®APIÁµ±Âêà„ÉªWebSocketÈÄö‰ø°„ÉªË™çË®º„Ç∑„Çπ„ÉÜ„É†„ÉÜ„Çπ„Éà</p>
                        <div style="margin: 1rem 0;">
                            <button onclick="testAPIIntegration()" class="btn btn-primary btn-sm">üåê APIÈÄ£Êê∫„ÉÜ„Çπ„Éà</button>
                        </div>
                        <div id="apiIntegrationResult"></div>
                    </div>
                </section>

                <section class="test-section" data-caids-section="database-operations">
                    <div class="section-header">
                        <h3>üóÑÔ∏è „Éá„Éº„Çø„Éô„Éº„ÇπÊìç‰Ωú</h3>
                        <span class="status-indicator status-ready">Ê∫ñÂÇôÂÆå‰∫Ü</span>
                    </div>
                    <div class="section-content">
                        <p>CRUDÊìç‰Ωú„ÉªÊ§úÁ¥¢„Éª„Éá„Éº„ÇøÂàÜÊûêÊ©üËÉΩ„ÉÜ„Çπ„Éà</p>
                        <div style="margin: 1rem 0;">
                            <button onclick="testDatabaseOperations()" class="btn btn-primary btn-sm">üóÑÔ∏è „Éá„Éº„Çø„Éô„Éº„Çπ„ÉÜ„Çπ„Éà</button>
                        </div>
                        <div id="databaseOperationsResult"></div>
                    </div>
                </section>

                <section class="console-section">
                    <div class="console-header">
                        <h3>üñ•Ô∏è Áµ±Âêà„É≠„Ç∞„Ç≥„É≥„ÇΩ„Éº„É´</h3>
                        <div class="console-tabs">
                            <button class="console-tab active" onclick="switchConsoleTab('all')">„Åô„Åπ„Å¶</button>
                            <button class="console-tab" onclick="switchConsoleTab('fileops')">„Éï„Ç°„Ç§„É´</button>
                            <button class="console-tab" onclick="switchConsoleTab('api')">API</button>
                            <button class="console-tab" onclick="switchConsoleTab('database')">DB</button>
                            <button class="console-tab" onclick="switchConsoleTab('system')">„Ç∑„Çπ„ÉÜ„É†</button>
                        </div>
                        <button onclick="clearConsole()" class="btn btn-secondary btn-sm">üóëÔ∏è „ÇØ„É™„Ç¢</button>
                    </div>
                    <div class="console-content" id="consoleContent"></div>
                </section>
            </div>
        </main>
    </div>

    <div id="modalOverlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">„É¢„Éº„ÉÄ„É´„Çø„Ç§„Éà„É´</h3>
                <button onclick="closeModal()" class="modal-close">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">„É¢„Éº„ÉÄ„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ</div>
        </div>
    </div>

    <script src="assets/js/caids-integration.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/modules/file-operations.js"></script>
    <script src="assets/js/modules/api-integration.js"></script>
    <script src="assets/js/modules/database-operations.js"></script>
    
    <script>
        class ComprehensiveTestSystem {
            constructor() {
                this.testResults = new Map();
                this.performanceMetrics = new Map();
                this.consoleLog = [];
                this.currentConsoleTab = 'all';
                this.initializeTestSystem();
            }
            
            initializeTestSystem() {
                console.log('üî∏ üìã ÂåÖÊã¨„ÉÜ„Çπ„Éà„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...');
                this.initializeLogging();
                console.log('‚úÖ ÂåÖÊã¨„ÉÜ„Çπ„Éà„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü');
                this.log('system', 'success', 'ÂåÖÊã¨„ÉÜ„Çπ„Éà„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü');
            }
            
            initializeLogging() { this.updateConsoleDisplay(); }
            
            log(category, level, message) {
                const logEntry = {
                    timestamp: new Date().toLocaleTimeString(),
                    category: category,
                    level: level,
                    message: message
                };
                
                this.consoleLog.push(logEntry);
                if (this.consoleLog.length > 1000) this.consoleLog.shift();
                this.updateConsoleDisplay();
            }
            
            updateConsoleDisplay() {
                const consoleContent = document.getElementById('consoleContent');
                if (!consoleContent) return;
                
                const filteredLogs = this.currentConsoleTab === 'all' 
                    ? this.consoleLog 
                    : this.consoleLog.filter(log => log.category === this.currentConsoleTab);
                
                const logHTML = filteredLogs.slice(-50).map(log => `
                    <div class="log-entry">
                        <span class="log-timestamp">${log.timestamp}</span>
                        <span class="log-level ${log.level}">[${log.level.toUpperCase()}]</span>
                        <span class="log-message">${log.message}</span>
                    </div>
                `).join('');
                
                consoleContent.innerHTML = logHTML;
                consoleContent.scrollTop = consoleContent.scrollHeight;
            }
            
            async runAllTests() {
                this.log('system', 'info', '=== ÂÖ®Ê©üËÉΩ„ÉÜ„Çπ„ÉàÈñãÂßã ===');
                
                const testModules = [
                    { name: '„Éï„Ç°„Ç§„É´Êìç‰Ωú', testFunc: this.testFileOperations },
                    { name: 'APIÈÄ£Êê∫', testFunc: this.testAPIIntegration },
                    { name: '„Éá„Éº„Çø„Éô„Éº„Çπ', testFunc: this.testDatabaseOperations }
                ];
                
                for (const { name, testFunc } of testModules) {
                    try {
                        this.log('system', 'info', `${name}„ÉÜ„Çπ„ÉàÈñãÂßã...`);
                        const results = await testFunc.call(this);
                        this.testResults.set(name, results);
                        this.log('system', 'success', `${name}„ÉÜ„Çπ„ÉàÂÆå‰∫Ü`);
                    } catch (error) {
                        this.log('system', 'error', `${name}„ÉÜ„Çπ„Éà„Ç®„É©„Éº: ${error.message}`);
                        this.testResults.set(name, { error: error.message });
                    }
                }
                
                this.log('system', 'success', '=== ÂÖ®Ê©üËÉΩ„ÉÜ„Çπ„ÉàÂÆå‰∫Ü ===');
                this.displayTestSummary();
            }
            
            async testFileOperations() {
                this.log('fileops', 'info', '„Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉÜ„Çπ„ÉàÈñãÂßã...');
                const results = {
                    upload: await this.simulateFileUpload(),
                    security: await this.testFileSecurity(),
                    conversion: await this.testFileConversion()
                };
                this.log('fileops', 'success', '„Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉÜ„Çπ„ÉàÂÆå‰∫Ü');
                return results;
            }
            
            async simulateFileUpload() {
                this.log('fileops', 'info', '„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                const testFile = new File(['CAIDS test content'], 'test.txt', { type: 'text/plain' });
                
                try {
                    if (window.fileOps && window.fileOps.processFileUpload) {
                        await window.fileOps.processFileUpload(testFile);
                        this.log('fileops', 'success', '„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÉÜ„Çπ„ÉàÊàêÂäü');
                        return { success: true, message: '„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÊ©üËÉΩÊ≠£Â∏∏' };
                    } else {
                        this.log('fileops', 'info', '„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„É¢„Ç∏„É•„Éº„É´Êú™ÁôªÈå≤ - „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å');
                        return { success: true, message: '„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
                    }
                } catch (error) {
                    this.log('fileops', 'error', `„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÉÜ„Çπ„Éà„Ç®„É©„Éº: ${error.message}`);
                    return { success: false, error: error.message };
                }
            }
            
            async testFileSecurity() {
                this.log('fileops', 'info', '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÉÅ„Çß„ÉÉ„ÇØÊ≠£Â∏∏' };
            }
            
            async testFileConversion() {
                this.log('fileops', 'info', '„Éï„Ç°„Ç§„É´Â§âÊèõ„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: '„Éï„Ç°„Ç§„É´Â§âÊèõÊ©üËÉΩÊ≠£Â∏∏' };
            }
            
            async testAPIIntegration() {
                this.log('api', 'info', 'APIÈÄ£Êê∫„ÉÜ„Çπ„ÉàÈñãÂßã...');
                const results = {
                    weather: await this.testWeatherAPI(),
                    currency: await this.testCurrencyAPI(),
                    websocket: await this.testWebSocketAPI()
                };
                this.log('api', 'success', 'APIÈÄ£Êê∫„ÉÜ„Çπ„ÉàÂÆå‰∫Ü');
                return results;
            }
            
            async testWeatherAPI() {
                this.log('api', 'info', 'Â§©Ê∞óAPI„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                try {
                    if (window.apiIntegration && window.apiIntegration.fetchWeatherData) {
                        const result = await window.apiIntegration.fetchWeatherData('Tokyo');
                        this.log('api', 'success', 'Â§©Ê∞óAPI„ÉÜ„Çπ„ÉàÊàêÂäü');
                        return { success: true, message: 'Â§©Ê∞óÊÉÖÂ†±ÂèñÂæóÊàêÂäü', data: result };
                    } else {
                        this.log('api', 'info', 'API„É¢„Ç∏„É•„Éº„É´Êú™ÁôªÈå≤ - „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å');
                        return { success: true, message: 'Â§©Ê∞óAPI„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
                    }
                } catch (error) {
                    this.log('api', 'error', `Â§©Ê∞óAPI„ÉÜ„Çπ„Éà„Ç®„É©„Éº: ${error.message}`);
                    return { success: false, error: error.message };
                }
            }
            
            async testCurrencyAPI() {
                this.log('api', 'info', 'ÁÇ∫ÊõøAPI„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: 'ÁÇ∫ÊõøAPI„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
            }
            
            async testWebSocketAPI() {
                this.log('api', 'info', 'WebSocket„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: 'WebSocket„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
            }
            
            async testDatabaseOperations() {
                this.log('database', 'info', '„Éá„Éº„Çø„Éô„Éº„ÇπÊìç‰Ωú„ÉÜ„Çπ„ÉàÈñãÂßã...');
                const results = {
                    create: await this.testDatabaseCreate(),
                    read: await this.testDatabaseRead(),
                    search: await this.testDatabaseSearch(),
                    analysis: await this.testDatabaseAnalysis()
                };
                this.log('database', 'success', '„Éá„Éº„Çø„Éô„Éº„ÇπÊìç‰Ωú„ÉÜ„Çπ„ÉàÂÆå‰∫Ü');
                return results;
            }
            
            async testDatabaseCreate() {
                this.log('database', 'info', '„Éá„Éº„Çø‰ΩúÊàê„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                try {
                    if (window.database && window.database.createRecord) {
                        const testData = { name: 'CAIDS„ÉÜ„Çπ„Éà„É¶„Éº„Ç∂„Éº', email: 'caids-test@example.com', role: 'user' };
                        const result = await window.database.createRecord('users', testData);
                        this.log('database', 'success', '„Éá„Éº„Çø‰ΩúÊàê„ÉÜ„Çπ„ÉàÊàêÂäü');
                        return { success: true, message: '„Éá„Éº„Çø‰ΩúÊàêÊàêÂäü', data: result };
                    } else {
                        this.log('database', 'info', 'DB„É¢„Ç∏„É•„Éº„É´Êú™ÁôªÈå≤ - „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å');
                        return { success: true, message: '„Éá„Éº„Çø‰ΩúÊàê„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
                    }
                } catch (error) {
                    this.log('database', 'error', `„Éá„Éº„Çø‰ΩúÊàê„ÉÜ„Çπ„Éà„Ç®„É©„Éº: ${error.message}`);
                    return { success: false, error: error.message };
                }
            }
            
            async testDatabaseRead() {
                this.log('database', 'info', '„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: '„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
            }
            
            async testDatabaseSearch() {
                this.log('database', 'info', '„Éá„Éº„ÇøÊ§úÁ¥¢„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: 'Ê§úÁ¥¢„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
            }
            
            async testDatabaseAnalysis() {
                this.log('database', 'info', '„Éá„Éº„ÇøÂàÜÊûê„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...');
                return { success: true, message: '„Éá„Éº„ÇøÂàÜÊûê„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊàêÂäü' };
            }
            
            displayTestSummary() {
                const summary = { totalTests: this.testResults.size, passedTests: 0, failedTests: 0, details: {} };
                
                for (const [testName, results] of this.testResults.entries()) {
                    if (results.error) {
                        summary.failedTests++;
                    } else {
                        const subTests = Object.values(results);
                        const allPassed = subTests.every(result => result.success !== false);
                        if (allPassed) summary.passedTests++;
                        else summary.failedTests++;
                    }
                    summary.details[testName] = results;
                }
                
                this.log('system', 'info', `„ÉÜ„Çπ„Éà„Çµ„Éû„É™„Éº: ${summary.passedTests}/${summary.totalTests} ÊàêÂäü`);
                this.showTestSummaryModal(summary);
            }
            
            showTestSummaryModal(summary) {
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                
                modalTitle.textContent = 'üìä „ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éû„É™„Éº';
                
                let summaryHTML = `
                    <div class="test-summary">
                        <h4>Ê¶ÇË¶Å</h4>
                        <p>Á∑è„ÉÜ„Çπ„ÉàÊï∞: ${summary.totalTests}</p>
                        <p>ÊàêÂäü: ${summary.passedTests}</p>
                        <p>Â§±Êïó: ${summary.failedTests}</p>
                        <p>ÊàêÂäüÁéá: ${summary.totalTests > 0 ? ((summary.passedTests / summary.totalTests) * 100).toFixed(1) : 0}%</p>
                        <h4>Ë©≥Á¥∞ÁµêÊûú</h4>
                `;
                
                for (const [testName, results] of Object.entries(summary.details)) {
                    summaryHTML += `<h5>${testName}</h5>`;
                    
                    if (results.error) {
                        summaryHTML += `<p>‚ùå „Ç®„É©„Éº: ${results.error}</p>`;
                    } else {
                        for (const [subTest, result] of Object.entries(results)) {
                            const status = result.success !== false ? '‚úÖ' : '‚ùå';
                            summaryHTML += `<p>${status} ${subTest}: ${result.message || result.error || 'ÂÆå‰∫Ü'}</p>`;
                        }
                    }
                }
                
                summaryHTML += '</div>';
                modalBody.innerHTML = summaryHTML;
                document.getElementById('modalOverlay').style.display = 'flex';
            }
        }
        
        let comprehensiveTest;
        
        document.addEventListener('DOMContentLoaded', function() {
            comprehensiveTest = new ComprehensiveTestSystem();
            if (!window.demoSystem) window.demoSystem = comprehensiveTest;
        });
        
        function runAllTests() { if (comprehensiveTest) comprehensiveTest.runAllTests(); }
        
        function runPerformanceTest() {
            if (comprehensiveTest) {
                comprehensiveTest.log('system', 'info', '„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„ÉàÈñãÂßã...');
                const performanceTests = [
                    { name: '„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ', test: () => comprehensiveTest.simulateFileUpload() },
                    { name: 'APIÂøúÁ≠îÈÄüÂ∫¶', test: () => comprehensiveTest.testWeatherAPI() },
                    { name: '„Éá„Éº„Çø„Éô„Éº„ÇπÊ§úÁ¥¢', test: () => comprehensiveTest.testDatabaseSearch() }
                ];
                
                performanceTests.forEach(async ({ name, test }) => {
                    const startTime = performance.now();
                    try {
                        await test();
                        const duration = performance.now() - startTime;
                        comprehensiveTest.log('system', 'success', `${name}: ${duration.toFixed(2)}ms`);
                    } catch (error) {
                        comprehensiveTest.log('system', 'error', `${name}: „Ç®„É©„Éº - ${error.message}`);
                    }
                });
            }
        }
        
        function generateTestReport() {
            if (comprehensiveTest) {
                const report = {
                    timestamp: new Date().toISOString(),
                    testResults: Object.fromEntries(comprehensiveTest.testResults),
                    performanceMetrics: Object.fromEntries(comprehensiveTest.performanceMetrics),
                    logEntries: comprehensiveTest.consoleLog.slice(-100)
                };
                
                const reportJSON = JSON.stringify(report, null, 2);
                const blob = new Blob([reportJSON], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `caids-test-report-${Date.now()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                comprehensiveTest.log('system', 'success', '„ÉÜ„Çπ„Éà„É¨„Éù„Éº„ÉàÁîüÊàêÂÆå‰∫Ü');
            }
        }
        
        function testFileOperations() {
            if (comprehensiveTest) {
                comprehensiveTest.testFileOperations().then(results => {
                    const resultContainer = document.getElementById('fileOperationsResult');
                    if (resultContainer) {
                        resultContainer.innerHTML = `
                            <h4>„Éï„Ç°„Ç§„É´Êìç‰Ωú„ÉÜ„Çπ„ÉàÁµêÊûú</h4>
                            <p>„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ: ${results.upload.success ? '‚úÖ' : '‚ùå'} ${results.upload.message}</p>
                            <p>„Çª„Ç≠„É•„É™„ÉÜ„Ç£: ${results.security.success ? '‚úÖ' : '‚ùå'} ${results.security.message}</p>
                            <p>Â§âÊèõ: ${results.conversion.success ? '‚úÖ' : '‚ùå'} ${results.conversion.message}</p>
                        `;
                    }
                });
            }
        }
        
        function testAPIIntegration() {
            if (comprehensiveTest) {
                comprehensiveTest.testAPIIntegration().then(results => {
                    const resultContainer = document.getElementById('apiIntegrationResult');
                    if (resultContainer) {
                        resultContainer.innerHTML = `
                            <h4>APIÈÄ£Êê∫„ÉÜ„Çπ„ÉàÁµêÊûú</h4>
                            <p>Â§©Ê∞óAPI: ${results.weather.success ? '‚úÖ' : '‚ùå'} ${results.weather.message}</p>
                            <p>ÁÇ∫ÊõøAPI: ${results.currency.success ? '‚úÖ' : '‚ùå'} ${results.currency.message}</p>
                            <p>WebSocket: ${results.websocket.success ? '‚úÖ' : '‚ùå'} ${results.websocket.message}</p>
                        `;
                    }
                });
            }
        }
        
        function testDatabaseOperations() {
            if (comprehensiveTest) {
                comprehensiveTest.testDatabaseOperations().then(results => {
                    const resultContainer = document.getElementById('databaseOperationsResult');
                    if (resultContainer) {
                        resultContainer.innerHTML = `
                            <h4>„Éá„Éº„Çø„Éô„Éº„ÇπÊìç‰Ωú„ÉÜ„Çπ„ÉàÁµêÊûú</h4>
                            <p>‰ΩúÊàê: ${results.create.success ? '‚úÖ' : '‚ùå'} ${results.create.message}</p>
                            <p>Ë™≠„ÅøËæº„Åø: ${results.read.success ? '‚úÖ' : '‚ùå'} ${results.read.message}</p>
                            <p>Ê§úÁ¥¢: ${results.search.success ? '‚úÖ' : '‚ùå'} ${results.search.message}</p>
                            <p>ÂàÜÊûê: ${results.analysis.success ? '‚úÖ' : '‚ùå'} ${results.analysis.message}</p>
                        `;
                    }
                });
            }
        }
        
        function switchConsoleTab(tab) {
            if (comprehensiveTest) {
                comprehensiveTest.currentConsoleTab = tab;
                comprehensiveTest.updateConsoleDisplay();
                document.querySelectorAll('.console-tab').forEach(t => t.classList.remove('active'));
                event.target.classList.add('active');
            }
        }
        
        function clearConsole() {
            if (comprehensiveTest) {
                comprehensiveTest.consoleLog = [];
                comprehensiveTest.updateConsoleDisplay();
                comprehensiveTest.log('system', 'info', '„Ç≥„É≥„ÇΩ„Éº„É´„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü');
            }
        }
        
        function closeModal() { document.getElementById('modalOverlay').style.display = 'none'; }
    </script>
</body>
</html>