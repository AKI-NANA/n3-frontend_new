<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07_editing 完全統合モーダル - UIサンプル</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #28a745;
            --warning: #ffc107;
            --error: #dc3545;
            --info: #17a2b8;
            --background: #f8f9fa;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --border-radius: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            
            /* データ状態色 */
            --data-complete: #28a745;
            --data-partial: #ffc107;
            --data-missing: #dc3545;
            --data-processing: #17a2b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            min-height: 100vh;
            padding: 20px;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            color: white;
        }

        .demo-button {
            background: white;
            color: var(--primary);
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        /* モーダルスタイル */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            z-index: 10000;
        }

        .modal-content {
            position: relative;
            width: 98%;
            height: 98%;
            max-width: 1800px;
            margin: 1% auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 70px;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin: 0;
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .product-thumbnail {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* タブナビゲーション */
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
            flex-shrink: 0;
        }

        .tab-link {
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            font-size: 0.85rem;
            min-width: 120px;
            text-align: center;
        }

        .tab-link:hover {
            color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }

        .tab-link.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: white;
        }

        .tab-content-container {
            flex: 1;
            overflow: hidden;
        }

        .tab-pane {
            display: none;
            height: 100%;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .tab-pane.active {
            display: block;
        }

        /* ステータスカードシステム */
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .status-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-2px);
        }

        .status-card.complete { border-left-color: var(--data-complete); }
        .status-card.partial { border-left-color: var(--data-partial); }
        .status-card.missing { border-left-color: var(--data-missing); }
        .status-card.processing { border-left-color: var(--data-processing); }

        .status-card h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-value {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .status-indicator {
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .indicator-complete { background: #d4edda; color: #155724; }
        .indicator-partial { background: #fff3cd; color: #856404; }
        .indicator-missing { background: #f8d7da; color: #721c24; }
        .indicator-processing { background: #d1ecf1; color: #0c5460; }

        /* データ表示システム */
        .data-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .section-header {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            border-bottom: 1px solid #e9ecef;
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .data-label {
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .data-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        /* フォーム要素 */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-row {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.4rem;
            font-size: 0.85rem;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.6rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.85rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .char-counter {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
            margin-top: 0.25rem;
        }

        /* 画像管理 */
        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
        }

        .image-item {
            position: relative;
            background: white;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .image-item:hover {
            transform: scale(1.05);
        }

        .image-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
        }

        .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            padding: 0.25rem;
            font-size: 0.7rem;
            text-align: center;
        }

        /* Item Specifics編集 */
        .item-specifics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .specific-group {
            background: white;
            border-radius: 6px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .specific-group h5 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* 利益計算表示 */
        .profit-breakdown {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .profit-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            font-size: 0.85rem;
        }

        .profit-row.total {
            font-weight: 600;
            border-top: 2px solid var(--border-color);
            margin-top: 0.5rem;
            padding-top: 0.75rem;
        }

        /* フッター */
        .modal-footer {
            background: #f8f9fa;
            padding: 1rem 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            flex-shrink: 0;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.85rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--text-primary);
        }

        .btn-secondary {
            background: var(--text-secondary);
            color: white;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* レスポンシブ対応 */
        @media (max-width: 1400px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .status-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .modal-content {
                width: 99%;
                height: 99%;
                margin: 0.5% auto;
            }
            
            .tabs {
                font-size: 0.75rem;
            }
            
            .tab-link {
                min-width: 80px;
                padding: 0.5rem;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1><i class="fas fa-cogs"></i> 07_editing 完全統合モーダル</h1>
        <p style="margin: 1rem 0;">全ツール統合型編集システム - UIサンプル</p>
        <button class="demo-button" onclick="openCompleteModal()">
            <i class="fas fa-rocket"></i> 統合モーダルを開く
        </button>
    </div>

    <!-- 完全統合モーダル -->
    <div id="complete-modal" class="modal-overlay">
        <div class="modal-content">
            <header class="modal-header">
                <div class="product-info">
                    <img src="https://placehold.co/50x50/667eea/ffffff?text=商品" alt="商品" class="product-thumbnail">
                    <div>
                        <h2 class="modal-title">
                            <i class="fas fa-edit"></i> ポケモンカード ピカチュウ プロモ 限定版
                        </h2>
                        <small>ID: yahoo_123456 | 取得日: 2025-01-15</small>
                    </div>
                </div>
                <button class="modal-close" onclick="closeCompleteModal()">&times;</button>
            </header>

            <div class="modal-body">
                <nav class="tabs">
                    <div class="tab-link active" onclick="switchTab(event, 'tab-overview')">
                        <i class="fas fa-chart-pie"></i><br>統合概要
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-basic')">
                        <i class="fas fa-edit"></i><br>基本情報
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-images')">
                        <i class="fas fa-images"></i><br>画像管理
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-category')">
                        <i class="fas fa-tags"></i><br>カテゴリー
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-profit')">
                        <i class="fas fa-yen-sign"></i><br>利益設定
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-shipping')">
                        <i class="fas fa-shipping-fast"></i><br>送料設定
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-html')">
                        <i class="fas fa-code"></i><br>HTML編集
                    </div>
                    <div class="tab-link" onclick="switchTab(event, 'tab-final')">
                        <i class="fas fa-check-circle"></i><br>最終確認
                    </div>
                </nav>

                <div class="tab-content-container">
                    <!-- 統合概要タブ -->
                    <section id="tab-overview" class="tab-pane active">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-dashboard"></i> 全ツール統合状況
                        </h3>
                        
                        <div class="status-grid">
                            <div class="status-card complete">
                                <h4><i class="fas fa-database"></i> スクレイピング</h4>
                                <div class="status-value" style="color: var(--data-complete);">完了</div>
                                <div class="status-indicator indicator-complete">データ取得済み</div>
                            </div>
                            
                            <div class="status-card complete">
                                <h4><i class="fas fa-images"></i> 画像取得</h4>
                                <div class="status-value" style="color: var(--data-complete);">8枚</div>
                                <div class="status-indicator indicator-complete">高品質画像</div>
                            </div>
                            
                            <div class="status-card partial">
                                <h4><i class="fas fa-tags"></i> カテゴリー</h4>
                                <div class="status-value" style="color: var(--data-partial);">87%</div>
                                <div class="status-indicator indicator-partial">要確認</div>
                            </div>
                            
                            <div class="status-card complete">
                                <h4><i class="fas fa-yen-sign"></i> 利益計算</h4>
                                <div class="status-value" style="color: var(--data-complete);">¥1,250</div>
                                <div class="status-indicator indicator-complete">高利益</div>
                            </div>
                            
                            <div class="status-card complete">
                                <h4><i class="fas fa-shipping-fast"></i> 送料計算</h4>
                                <div class="status-value" style="color: var(--data-complete);">$12.99</div>
                                <div class="status-indicator indicator-complete">最適化済み</div>
                            </div>
                            
                            <div class="status-card missing">
                                <h4><i class="fas fa-search"></i> SellerMirror</h4>
                                <div class="status-value" style="color: var(--data-missing);">未取得</div>
                                <div class="status-indicator indicator-missing">要実行</div>
                            </div>
                            
                            <div class="status-card processing">
                                <h4><i class="fas fa-filter"></i> フィルター</h4>
                                <div class="status-value" style="color: var(--data-processing);">処理中</div>
                                <div class="status-indicator indicator-processing">判定中</div>
                            </div>
                            
                            <div class="status-card partial">
                                <h4><i class="fas fa-code"></i> HTML生成</h4>
                                <div class="status-value" style="color: var(--data-partial);">下書き</div>
                                <div class="status-indicator indicator-partial">要編集</div>
                            </div>
                        </div>

                        <!-- データサマリー -->
                        <div class="data-section">
                            <div class="section-header">
                                <i class="fas fa-info-circle"></i> 商品データサマリー
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <div>
                                    <div class="data-row">
                                        <span class="data-label">Yahoo価格</span>
                                        <span class="data-value">¥3,500</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">推奨eBay価格</span>
                                        <span class="data-value">$32.99</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">予想利益</span>
                                        <span class="data-value">¥1,250 (35.7%)</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">送料コスト</span>
                                        <span class="data-value">$12.99</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="data-row">
                                        <span class="data-label">商品状態</span>
                                        <span class="data-value">Near Mint</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">推奨カテゴリー</span>
                                        <span class="data-value">Trading Cards > Pokemon</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">競合価格帯</span>
                                        <span class="data-value">$28.99 - $39.99</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">最終更新</span>
                                        <span class="data-value">2025-01-15 14:30</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 基本情報編集タブ -->
                    <section id="tab-basic" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-edit"></i> 基本情報編集
                        </h3>
                        
                        <div class="form-grid">
                            <div>
                                <div class="form-row">
                                    <label class="form-label">eBayタイトル (80文字以内)</label>
                                    <textarea class="form-textarea" maxlength="80" onkeyup="updateCharCounter(this, 'title-counter')">Pokemon Card Pikachu Promo Limited Edition Near Mint Japanese</textarea>
                                    <div class="char-counter" id="title-counter">65/80</div>
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">商品状態</label>
                                    <select class="form-select">
                                        <option value="1000">New</option>
                                        <option value="2500">Like New</option>
                                        <option value="3000" selected>Very Good</option>
                                        <option value="4000">Good</option>
                                        <option value="5000">Acceptable</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">販売価格 (USD)</label>
                                    <input type="number" class="form-input" value="32.99" step="0.01">
                                </div>
                            </div>
                            
                            <div>
                                <div class="form-row">
                                    <label class="form-label">在庫数</label>
                                    <input type="number" class="form-input" value="1" min="1">
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">取扱注意事項</label>
                                    <textarea class="form-textarea" rows="3">カードの状態は良好ですが、コレクター向け商品のため丁寧に梱包いたします。</textarea>
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">SKU</label>
                                    <input type="text" class="form-input" value="PKM-PIKA-PROMO-001" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- 元データ表示 -->
                        <div class="data-section">
                            <div class="section-header">
                                <i class="fas fa-database"></i> Yahooオークション元データ
                            </div>
                            <div class="data-row">
                                <span class="data-label">元タイトル</span>
                                <span class="data-value">ポケモンカード ピカチュウ プロモ 限定版 美品</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">落札価格</span>
                                <span class="data-value">¥3,500</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">出品者評価</span>
                                <span class="data-value">98.5% (1,245件)</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">商品説明（抜粋）</span>
                                <span class="data-value">ポケモンカードゲーム ピカチュウのプロモカードです。状態は美品で...</span>
                            </div>
                        </div>
                    </section>

                    <!-- 画像管理タブ -->
                    <section id="tab-images" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-images"></i> 画像管理・最適化
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h4 style="margin-bottom: 0.5rem;">Yahoo取得画像 (8枚)</h4>
                                <div class="images-grid">
                                    <div class="image-item" onclick="selectImage(this, 1)">
                                        <img src="https://placehold.co/100x80/4CAF50/ffffff?text=Main" alt="メイン画像">
                                        <div class="image-overlay">メイン画像<br>✓ 選択済み</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 2)">
                                        <img src="https://placehold.co/100x80/2196F3/ffffff?text=Back" alt="裏面">
                                        <div class="image-overlay">裏面<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 3)">
                                        <img src="https://placehold.co/100x80/FF9800/ffffff?text=Side" alt="側面">
                                        <div class="image-overlay">側面<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 4)">
                                        <img src="https://placehold.co/100x80/9C27B0/ffffff?text=Detail" alt="詳細">
                                        <div class="image-overlay">詳細<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 5)">
                                        <img src="https://placehold.co/100x80/F44336/ffffff?text=Corner" alt="角">
                                        <div class="image-overlay">角の状態<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 6)">
                                        <img src="https://placehold.co/100x80/607D8B/ffffff?text=Cert" alt="認証">
                                        <div class="image-overlay">認証マーク<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 7)">
                                        <img src="https://placehold.co/100x80/795548/ffffff?text=Pack" alt="パッケージ">
                                        <div class="image-overlay">パッケージ<br>クリックで選択</div>
                                    </div>
                                    <div class="image-item" onclick="selectImage(this, 8)">
                                        <img src="https://placehold.co/100x80/009688/ffffff?text=Size" alt="サイズ比較">
                                        <div class="image-overlay">サイズ比較<br>クリックで選択</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin-bottom: 0.5rem;">eBay出品用画像 (選択順序)</h4>
                                <div class="images-grid">
                                    <div class="image-item" style="border: 2px solid var(--success);">
                                        <img src="https://placehold.co/100x80/4CAF50/ffffff?text=1st" alt="1番目">
                                        <div class="image-overlay">1番目 (メイン)<br><i class="fas fa-star"></i></div>
                                    </div>
                                    <div class="image-item" style="border: 2px dashed var(--border-color);">
                                        <div style="height: 80px; display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                                            <i class="fas fa-plus"></i><br>2番目を選択
                                        </div>
                                    </div>
                                    <div class="image-item" style="border: 2px dashed var(--border-color);">
                                        <div style="height: 80px; display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                                            <i class="fas fa-plus"></i><br>3番目を選択
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 6px;">
                                    <h5 style="margin-bottom: 0.5rem;">画像最適化設定</h5>
                                    <label style="display: block; margin-bottom: 0.5rem;">
                                        <input type="checkbox" checked> eBay推奨サイズに自動リサイズ (1600x1200)
                                    </label>
                                    <label style="display: block; margin-bottom: 0.5rem;">
                                        <input type="checkbox" checked> 品質最適化 (ファイルサイズ削減)
                                    </label>
                                    <label style="display: block;">
                                        <input type="checkbox"> ウォーターマーク追加
                                    </label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- カテゴリー・仕様タブ -->
                    <section id="tab-category" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-tags"></i> eBayカテゴリー・Item Specifics
                        </h3>
                        
                        <div class="data-section">
                            <div class="section-header">
                                <i class="fas fa-robot"></i> 自動判定結果 (信頼度: 87%)
                            </div>
                            <div class="data-row">
                                <span class="data-label">推奨カテゴリー</span>
                                <span class="data-value">11116 > Trading Card Games > Pokémon > Individual Cards</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">カテゴリーID</span>
                                <span class="data-value">183454</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">リスティング手数料</span>
                                <span class="data-value">無料</span>
                            </div>
                        </div>

                        <div style="margin: 1rem 0;">
                            <h4 style="margin-bottom: 0.75rem;">Item Specifics 編集</h4>
                            
                            <div class="item-specifics">
                                <div class="specific-group">
                                    <h5>必須項目</h5>
                                    <div class="form-row">
                                        <label class="form-label">Game</label>
                                        <input type="text" class="form-input" value="Pokémon">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Card Type</label>
                                        <select class="form-select">
                                            <option>Pokémon</option>
                                            <option>Trainer</option>
                                            <option>Energy</option>
                                        </select>
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Condition</label>
                                        <select class="form-select">
                                            <option>Near Mint or better</option>
                                            <option selected>Lightly Played</option>
                                            <option>Moderately Played</option>
                                            <option>Heavily Played</option>
                                            <option>Damaged</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="specific-group">
                                    <h5>商品詳細</h5>
                                    <div class="form-row">
                                        <label class="form-label">Character</label>
                                        <input type="text" class="form-input" value="Pikachu">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Rarity</label>
                                        <input type="text" class="form-input" value="Promo">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Language</label>
                                        <select class="form-select">
                                            <option selected>Japanese</option>
                                            <option>English</option>
                                            <option>Korean</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="specific-group">
                                    <h5>オプション項目</h5>
                                    <div class="form-row">
                                        <label class="form-label">Set</label>
                                        <input type="text" class="form-input" value="Promotional Cards">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Card Number</label>
                                        <input type="text" class="form-input" value="025/P">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-label">Manufacturer</label>
                                        <input type="text" class="form-input" value="The Pokémon Company">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 利益設定タブ -->
                    <section id="tab-profit" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-calculator"></i> 利益計算・価格戦略
                        </h3>
                        
                        <div class="profit-breakdown">
                            <h4 style="margin-bottom: 1rem;">収支計算</h4>
                            
                            <div class="profit-row">
                                <span>Yahoo購入価格</span>
                                <span>¥3,500</span>
                            </div>
                            <div class="profit-row">
                                <span>国内送料</span>
                                <span>¥500</span>
                            </div>
                            <div class="profit-row">
                                <span>梱包・手数料</span>
                                <span>¥200</span>
                            </div>
                            <div class="profit-row">
                                <span><strong>総コスト</strong></span>
                                <span><strong>¥4,200</strong></span>
                            </div>
                            
                            <hr style="margin: 1rem 0;">
                            
                            <div class="profit-row">
                                <span>eBay販売価格</span>
                                <span>$32.99 (¥4,948)</span>
                            </div>
                            <div class="profit-row">
                                <span>eBay手数料 (13.25%)</span>
                                <span>-$4.37 (-¥656)</span>
                            </div>
                            <div class="profit-row">
                                <span>PayPal手数料 (3.49%)</span>
                                <span>-$1.15 (-¥173)</span>
                            </div>
                            <div class="profit-row">
                                <span>国際送料</span>
                                <span>-$12.99 (-¥1,949)</span>
                            </div>
                            <div class="profit-row">
                                <span><strong>手取り金額</strong></span>
                                <span><strong>$14.48 (¥2,172)</strong></span>
                            </div>
                            
                            <div class="profit-row total" style="color: var(--success);">
                                <span><strong>純利益</strong></span>
                                <span><strong>¥1,272 (30.3%)</strong></span>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-row">
                                <label class="form-label">価格戦略</label>
                                <select class="form-select">
                                    <option>競合価格マッチ</option>
                                    <option selected>高利益重視</option>
                                    <option>早期売却重視</option>
                                    <option>プレミアム価格</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label class="form-label">為替レート (自動更新)</label>
                                <input type="text" class="form-input" value="¥150.05 / $1" readonly>
                            </div>
                        </div>
                    </section>

                    <!-- 送料設定タブ */
                    <section id="tab-shipping" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-shipping-fast"></i> 送料計算・配送設定
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div class="data-section">
                                <div class="section-header">
                                    <i class="fas fa-calculator"></i> 自動送料計算結果
                                </div>
                                
                                <h5 style="margin: 0.75rem 0 0.5rem;">国内送料オプション</h5>
                                <div class="data-row">
                                    <span class="data-label">Standard (3-7日)</span>
                                    <span class="data-value">$8.99</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">Expedited (1-3日)</span>
                                    <span class="data-value">$15.99</span>
                                </div>
                                
                                <h5 style="margin: 0.75rem 0 0.5rem;">国際送料オプション</h5>
                                <div class="data-row">
                                    <span class="data-label">Economy (10-21日)</span>
                                    <span class="data-value">$12.99</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">Standard (7-14日)</span>
                                    <span class="data-value">$18.99</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">Express (3-6日)</span>
                                    <span class="data-value">$29.99</span>
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin-bottom: 0.75rem;">送料設定編集</h4>
                                
                                <div class="form-row">
                                    <label class="form-label">商品サイズ・重量</label>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.5rem;">
                                        <input type="text" class="form-input" placeholder="長さ(cm)" value="10">
                                        <input type="text" class="form-input" placeholder="幅(cm)" value="7">
                                        <input type="text" class="form-input" placeholder="高さ(cm)" value="0.5">
                                    </div>
                                    <input type="text" class="form-input" placeholder="重量(g)" value="15" style="margin-top: 0.5rem;">
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">梱包方法</label>
                                    <select class="form-select">
                                        <option selected>スリーブ + トップローダー + 封筒</option>
                                        <option>ハードケース + 小包</option>
                                        <option>厚紙補強 + 封筒</option>
                                        <option>カスタム梱包</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">配送除外国</label>
                                    <textarea class="form-textarea" rows="3">APO/FPO, Africa, Central America and Caribbean, Middle East, Southeast Asia (一部配送リスク地域を除外)</textarea>
                                </div>
                                
                                <div class="form-row">
                                    <label class="form-label">送料無料閾値</label>
                                    <input type="number" class="form-input" value="50.00" step="0.01">
                                    <small style="color: var(--text-secondary);">$50以上で送料無料</small>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- HTML編集タブ */
                    <section id="tab-html" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-code"></i> 商品説明HTML編集
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; height: calc(100vh - 300px);">
                            <div>
                                <h4 style="margin-bottom: 0.5rem;">HTMLエディタ</h4>
                                <textarea style="width: 100%; height: 90%; font-family: monospace; font-size: 0.8rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 6px;">
&lt;div style="font-family: Arial, sans-serif; max-width: 800px;"&gt;
  &lt;h2 style="color: #333; border-bottom: 2px solid #4CAF50;"&gt;Pokemon Card - Pikachu Promo Limited Edition&lt;/h2&gt;
  
  &lt;div style="background: #f9f9f9; padding: 15px; margin: 10px 0; border-left: 4px solid #4CAF50;"&gt;
    &lt;h3&gt;商品詳細&lt;/h3&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;状態:&lt;/strong&gt; Near Mint (美品)&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;言語:&lt;/strong&gt; 日本語&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;レアリティ:&lt;/strong&gt; プロモーション&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;キャラクター:&lt;/strong&gt; ピカチュウ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;

  &lt;div style="background: #e3f2fd; padding: 15px; margin: 10px 0;"&gt;
    &lt;h3&gt;配送について&lt;/h3&gt;
    &lt;p&gt;カードはスリーブとトップローダーで厳重に保護し、追跡番号付きで発送いたします。&lt;/p&gt;
    &lt;p&gt;通常7-14日でお届けします。&lt;/p&gt;
  &lt;/div&gt;

  &lt;div style="text-align: center; margin: 20px 0;"&gt;
    &lt;p style="color: #666;"&gt;ご質問がございましたらお気軽にお問い合わせください！&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
                                </textarea>
                            </div>
                            
                            <div>
                                <h4 style="margin-bottom: 0.5rem;">プレビュー</h4>
                                <div style="width: 100%; height: 90%; border: 1px solid var(--border-color); border-radius: 6px; padding: 1rem; background: white; overflow-y: auto;">
                                    <div style="font-family: Arial, sans-serif; max-width: 800px;">
                                        <h2 style="color: #333; border-bottom: 2px solid #4CAF50;">Pokemon Card - Pikachu Promo Limited Edition</h2>
                                        
                                        <div style="background: #f9f9f9; padding: 15px; margin: 10px 0; border-left: 4px solid #4CAF50;">
                                            <h3>商品詳細</h3>
                                            <ul>
                                                <li><strong>状態:</strong> Near Mint (美品)</li>
                                                <li><strong>言語:</strong> 日本語</li>
                                                <li><strong>レアリティ:</strong> プロモーション</li>
                                                <li><strong>キャラクター:</strong> ピカチュウ</li>
                                            </ul>
                                        </div>

                                        <div style="background: #e3f2fd; padding: 15px; margin: 10px 0;">
                                            <h3>配送について</h3>
                                            <p>カードはスリーブとトップローダーで厳重に保護し、追跡番号付きで発送いたします。</p>
                                            <p>通常7-14日でお届けします。</p>
                                        </div>

                                        <div style="text-align: center; margin: 20px 0;">
                                            <p style="color: #666;">ご質問がございましたらお気軽にお問い合わせください！</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 最終確認タブ -->
                    <section id="tab-final" class="tab-pane">
                        <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-check-circle"></i> 最終確認・出品準備
                        </h3>
                        
                        <!-- バリデーション結果 -->
                        <div class="data-section">
                            <div class="section-header">
                                <i class="fas fa-shield-alt"></i> eBay出品バリデーション
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                <div style="padding: 0.75rem; background: #d4edda; color: #155724; border-radius: 6px;">
                                    <i class="fas fa-check"></i> <strong>タイトル:</strong> OK (65/80文字)
                                </div>
                                <div style="padding: 0.75rem; background: #d4edda; color: #155724; border-radius: 6px;">
                                    <i class="fas fa-check"></i> <strong>画像:</strong> OK (8枚選択済み)
                                </div>
                                <div style="padding: 0.75rem; background: #d4edda; color: #155724; border-radius: 6px;">
                                    <i class="fas fa-check"></i> <strong>カテゴリー:</strong> OK (信頼度87%)
                                </div>
                                <div style="padding: 0.75rem; background: #fff3cd; color: #856404; border-radius: 6px;">
                                    <i class="fas fa-exclamation-triangle"></i> <strong>Item Specifics:</strong> 3項目追加推奨
                                </div>
                                <div style="padding: 0.75rem; background: #d4edda; color: #155724; border-radius: 6px;">
                                    <i class="fas fa-check"></i> <strong>価格設定:</strong> OK (競合価格内)
                                </div>
                                <div style="padding: 0.75rem; background: #d4edda; color: #155724; border-radius: 6px;">
                                    <i class="fas fa-check"></i> <strong>送料設定:</strong> OK (全地域対応)
                                </div>
                            </div>
                        </div>

                        <!-- 出品データサマリー -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1.5rem 0;">
                            <div class="data-section">
                                <div class="section-header">
                                    <i class="fas fa-list"></i> 出品データサマリー
                                </div>
                                <div class="data-row">
                                    <span class="data-label">商品タイトル</span>
                                    <span class="data-value">Pokemon Card Pikachu Promo Limited...</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">販売価格</span>
                                    <span class="data-value">$32.99</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">予想利益</span>
                                    <span class="data-value">¥1,272 (30.3%)</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">在庫数</span>
                                    <span class="data-value">1個</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">出品形式</span>
                                    <span class="data-value">Buy It Now (即決)</span>
                                </div>
                            </div>
                            
                            <div class="data-section">
                                <div class="section-header">
                                    <i class="fas fa-cog"></i> 出品設定
                                </div>
                                <div class="data-row">
                                    <span class="data-label">出品期間</span>
                                    <span class="data-value">Good 'Til Cancelled</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">自動再出品</span>
                                    <span class="data-value">有効</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">Best Offer</span>
                                    <span class="data-value">有効 (最低$29.99)</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">返品ポリシー</span>
                                    <span class="data-value">30日間返品可</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">出品予定日時</span>
                                    <span class="data-value">即時出品</span>
                                </div>
                            </div>
                        </div>

                        <!-- 出品アクション -->
                        <div style="text-align: center; padding: 2rem; background: #f8f9fa; border-radius: 8px;">
                            <h4 style="margin-bottom: 1rem;">出品準備完了</h4>
                            <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
                                すべての項目が設定されました。「eBayに出品」ボタンを押すとeBayに商品が出品され、データベースが更新されます。
                            </p>
                            
                            <div style="display: flex; justify-content: center; gap: 1rem;">
                                <button class="btn btn-secondary">
                                    <i class="fas fa-save"></i> 下書き保存
                                </button>
                                <button class="btn btn-warning">
                                    <i class="fas fa-eye"></i> 出品プレビュー
                                </button>
                                <button class="btn btn-success" onclick="submitToEbay()">
                                    <i class="fas fa-rocket"></i> eBayに出品する
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <footer class="modal-footer">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <i class="fas fa-clock"></i> 処理時間: 2.34秒 | 
                    <i class="fas fa-database"></i> データ完全性: 96% | 
                    <i class="fas fa-shield-alt"></i> バリデーション: 通過
                </div>
                
                <div style="display: flex; gap: 0.75rem;">
                    <button class="btn btn-secondary">
                        <i class="fas fa-save"></i> 一時保存
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i> 次へ進む
                    </button>
                    <button class="btn btn-success">
                        <i class="fas fa-check"></i> 完了・出品
                    </button>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // モーダル制御
        function openCompleteModal() {
            document.getElementById('complete-modal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function closeCompleteModal() {
            document.getElementById('complete-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // タブ切り替え
        function switchTab(event, tabId) {
            // 全てのタブとペインから active クラスを削除
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // クリックされたタブと対応するペインに active クラスを追加
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
        
        // 文字カウンター
        function updateCharCounter(textarea, counterId) {
            const counter = document.getElementById(counterId);
            const current = textarea.value.length;
            const max = textarea.maxLength;
            counter.textContent = `${current}/${max}`;
            
            // 文字数に応じて色を変更
            if (current > max * 0.9) {
                counter.style.color = 'var(--error)';
            } else if (current > max * 0.8) {
                counter.style.color = 'var(--warning)';
            } else {
                counter.style.color = 'var(--text-secondary)';
            }
        }
        
        // 画像選択
        let selectedImages = [1]; // メイン画像は既に選択済み
        
        function selectImage(element, imageId) {
            if (selectedImages.includes(imageId)) {
                // 既に選択済みの場合は選択解除
                selectedImages = selectedImages.filter(id => id !== imageId);
                element.style.border = '';
                element.querySelector('.image-overlay').innerHTML = element.querySelector('.image-overlay').innerHTML.replace('✓ 選択済み', 'クリックで選択');
            } else {
                // 新規選択（最大12枚まで）
                if (selectedImages.length < 12) {
                    selectedImages.push(imageId);
                    element.style.border = '2px solid var(--success)';
                    element.querySelector('.image-overlay').innerHTML = element.querySelector('.image-overlay').innerHTML.replace('クリックで選択', '✓ 選択済み');
                    updateEbayImageGrid();
                } else {
                    alert('eBay出品は最大12枚まで画像をアップロードできます。');
                }
            }
            
            console.log('選択された画像:', selectedImages);
        }
        
        function updateEbayImageGrid() {
            // eBay用画像グリッドを更新する関数（実装時に追加）
            console.log('eBay画像グリッド更新:', selectedImages);
        }
        
        // eBay出品実行
        function submitToEbay() {
            if (confirm('この設定でeBayに出品しますか？\n\n出品後はeBay側での編集が必要になります。')) {
                // 出品処理のシミュレーション
                const loadingDiv = document.createElement('div');
                loadingDiv.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 20000; display: flex; align-items: center; justify-content: center; color: white;">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <h3>eBayに出品中...</h3>
                            <p>画像をアップロードしています...</p>
                            <div style="width: 300px; height: 20px; background: #333; border-radius: 10px; margin: 20px auto; overflow: hidden;">
                                <div id="progress-bar" style="width: 0%; height: 100%; background: var(--success); border-radius: 10px; transition: width 0.5s ease;"></div>
                            </div>
                            <div id="progress-text">0%</div>
                        </div>
                    </div>
                `;
                document.body.appendChild(loadingDiv);
                
                // プログレスバーアニメーション
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 100) progress = 100;
                    
                    document.getElementById('progress-bar').style.width = progress + '%';
                    document.getElementById('progress-text').textContent = Math.round(progress) + '%';
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        setTimeout(() => {
                            document.body.removeChild(loadingDiv);
                            alert('eBayへの出品が完了しました！\n\n出品ID: 123456789012\nURL: https://ebay.com/itm/123456789012\n\nデータベースが更新されました。');
                            closeCompleteModal();
                        }, 1000);
                    }
                }, 200);
            }
        }
        
        // キーボードショートカット
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCompleteModal();
            }
            
            // Ctrl+S で一時保存
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                alert('データを一時保存しました');
            }
            
            // Ctrl+Enter で次のタブに移動
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                const currentTab = document.querySelector('.tab-link.active');
                const nextTab = currentTab.nextElementSibling;
                if (nextTab && nextTab.classList.contains('tab-link')) {
                    nextTab.click();
                }
            }
        });
        
        // モーダル外クリックで閉じる
        document.getElementById('complete-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCompleteModal();
            }
        });
        
        // 初期化時の処理
        document.addEventListener('DOMContentLoaded', function() {
            console.log('07_editing 完全統合モーダル UI サンプル初期化完了');
            
            // 初期データの設定
            updateCharCounter(document.querySelector('textarea[maxlength="80"]'), 'title-counter');
            
            // ツールチップの初期化など
            console.log('選択された画像の初期状態:', selectedImages);
        });
        
        // 追加のユーティリティ関数
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('クリップボードにコピーしました');
            });
        }
        
        function exportData() {
            const exportData = {
                title: document.querySelector('textarea[maxlength="80"]').value,
                price: 32.99,
                condition: 'Very Good',
                images: selectedImages,
                category: '183454',
                timestamp: new Date().toISOString()
            };
            
            console.log('エクスポートデータ:', exportData);
            copyToClipboard(JSON.stringify(exportData, null, 2));
        }
        
        // リアルタイム利益計算のシミュレーション
        function recalculateProfit() {
            // 実際の実装では価格変更時に API を呼び出して再計算
            console.log('利益を再計算中...');
            setTimeout(() => {
                console.log('利益計算完了');
            }, 500);
        }
    </script>
</body>
</html>