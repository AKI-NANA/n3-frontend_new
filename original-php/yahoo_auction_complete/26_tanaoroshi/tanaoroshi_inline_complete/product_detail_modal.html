<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“è©³ç´°</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
    body {
        margin: 0;
        padding: 1rem;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: white;
    }
    
    .detail-container {
        max-width: 900px;
        margin: 0 auto;
    }
    
    .product-header {
        display: flex;
        gap: 2rem;
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: #f8f9fa;
        border-radius: 12px;
    }
    
    .product-image {
        flex: 0 0 300px;
        height: 300px;
        border-radius: 8px;
        overflow: hidden;
        background: white;
        border: 1px solid #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .product-image .no-image {
        color: #6c757d;
        font-size: 3rem;
    }
    
    .product-info {
        flex: 1;
    }
    
    .product-title {
        font-size: 1.75rem;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .product-sku {
        font-size: 1rem;
        color: #64748b;
        background: #f1f5f9;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-family: 'Monaco', 'Consolas', monospace;
        margin-bottom: 1rem;
        display: inline-block;
    }
    
    .detail-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .detail-section {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 1.5rem;
        border: 1px solid #e9ecef;
    }
    
    .detail-section h3 {
        font-size: 1.1rem;
        font-weight: 600;
        color: #475569;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .detail-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e2e8f0;
    }
    
    .detail-item:last-child {
        border-bottom: none;
    }
    
    .detail-label {
        font-weight: 500;
        color: #64748b;
    }
    
    .detail-value {
        font-weight: 600;
        color: #1e293b;
    }
    
    .price-value {
        color: #059669;
        font-size: 1.1rem;
    }
    
    .stock-value {
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-size: 0.875rem;
        font-weight: 600;
    }
    
    .stock-high { background: #d1fae5; color: #065f46; }
    .stock-medium { background: #fef3c7; color: #92400e; }
    .stock-low { background: #fee2e2; color: #991b1b; }
    
    .badge {
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .badge-stock { background: #d1fae5; color: #065f46; }
    .badge-dropship { background: #dbeafe; color: #1e40af; }
    .badge-set { background: #f3e8ff; color: #7c3aed; }
    .badge-hybrid { background: #fed7d7; color: #c53030; }
    
    .badge-new { background: #d1fae5; color: #065f46; }
    .badge-used { background: #fef3c7; color: #92400e; }
    .badge-refurbished { background: #dbeafe; color: #1e40af; }
    
    .btn-group {
        display: flex;
        gap: 0.75rem;
        justify-content: flex-end;
        padding-top: 1rem;
        border-top: 1px solid #e2e8f0;
        margin-top: 2rem;
    }
    
    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-secondary {
        background: #f1f5f9;
        color: #475569;
        border: 1px solid #cbd5e1;
    }
    
    .btn-secondary:hover {
        background: #e2e8f0;
        transform: translateY(-1px);
    }
    
    .btn-primary {
        background: #3b82f6;
        color: white;
        border: 1px solid #3b82f6;
    }
    
    .btn-primary:hover {
        background: #2563eb;
        transform: translateY(-1px);
    }
    
    .btn-success {
        background: #10b981;
        color: white;
        border: 1px solid #10b981;
    }
    
    .btn-success:hover {
        background: #059669;
        transform: translateY(-1px);
    }
    </style>
</head>
<body>
    <div class="detail-container">
        <div class="product-header">
            <div class="product-image" id="productImage">
                <div class="no-image">
                    <i class="fas fa-image"></i>
                </div>
            </div>
            <div class="product-info">
                <h1 class="product-title">
                    <i class="fas fa-cube" id="productTypeIcon"></i>
                    <span id="productName">å•†å“åã‚’èª­ã¿è¾¼ã¿ä¸­...</span>
                </h1>
                <div class="product-sku" id="productSku">SKU: èª­ã¿è¾¼ã¿ä¸­...</div>
                <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                    <span class="badge" id="productTypeBadge">èª­ã¿è¾¼ã¿ä¸­</span>
                    <span class="badge" id="productConditionBadge">èª­ã¿è¾¼ã¿ä¸­</span>
                </div>
            </div>
        </div>
        
        <div class="detail-grid">
            <div class="detail-section">
                <h3>
                    <i class="fas fa-dollar-sign text-success"></i>
                    ä¾¡æ ¼æƒ…å ±
                </h3>
                <div class="detail-item">
                    <span class="detail-label">è²©å£²ä¾¡æ ¼</span>
                    <span class="detail-value price-value" id="productPrice">$0.00</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">ä»•å…¥ä¾¡æ ¼</span>
                    <span class="detail-value" id="productCost">$0.00</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">åˆ©ç›Šç‡</span>
                    <span class="detail-value" id="productMargin">0%</span>
                </div>
            </div>
            
            <div class="detail-section">
                <h3>
                    <i class="fas fa-warehouse text-primary"></i>
                    åœ¨åº«æƒ…å ±
                </h3>
                <div class="detail-item">
                    <span class="detail-label">åœ¨åº«æ•°</span>
                    <span class="detail-value stock-value" id="productStock">0å€‹</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">åœ¨åº«ä¾¡å€¤</span>
                    <span class="detail-value" id="stockValue">$0.00</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">çŠ¶æ…‹</span>
                    <span class="detail-value" id="stockStatus">-</span>
                </div>
            </div>
            
            <div class="detail-section">
                <h3>
                    <i class="fas fa-info-circle text-info"></i>
                    å•†å“æƒ…å ±
                </h3>
                <div class="detail-item">
                    <span class="detail-label">ã‚«ãƒ†ã‚´ãƒª</span>
                    <span class="detail-value" id="productCategory">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">ç™»éŒ²æ—¥</span>
                    <span class="detail-value" id="productCreated">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">æ›´æ–°æ—¥</span>
                    <span class="detail-value" id="productUpdated">-</span>
                </div>
            </div>
            
            <div class="detail-section">
                <h3>
                    <i class="fas fa-chart-line text-warning"></i>
                    è²©å£²æƒ…å ±
                </h3>
                <div class="detail-item">
                    <span class="detail-label">å‡ºå“ãƒãƒ£ãƒ³ãƒãƒ«</span>
                    <span class="detail-value" id="salesChannels">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">è²©å£²æ•°</span>
                    <span class="detail-value" id="salesCount">0å€‹</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">ç·å£²ä¸Š</span>
                    <span class="detail-value" id="totalRevenue">$0.00</span>
                </div>
            </div>
        </div>
        
        <div class="detail-section" id="descriptionSection" style="display: none;">
            <h3>
                <i class="fas fa-align-left"></i>
                å•†å“èª¬æ˜
            </h3>
            <p id="productDescription" style="margin: 0; line-height: 1.6; color: #475569;">
                å•†å“èª¬æ˜ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
            </p>
        </div>
        
        <div class="btn-group">
            <button class="btn btn-secondary" onclick="closeModal()">
                <i class="fas fa-times"></i>
                é–‰ã˜ã‚‹
            </button>
            <button class="btn btn-primary" onclick="editProduct()">
                <i class="fas fa-edit"></i>
                ç·¨é›†
            </button>
            <button class="btn btn-success" onclick="duplicateProduct()">
                <i class="fas fa-copy"></i>
                è¤‡è£½
            </button>
        </div>
    </div>

    <script>
    // å•†å“è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã£ã¦è¡¨ç¤º
    let currentProductData = null;
    
    // è¦ªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‹ã‚‰ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡
    window.addEventListener('message', function(e) {
        if (e.data.action === 'showProductDetail') {
            currentProductData = e.data.productData;
            displayProductDetail(currentProductData);
        }
    });
    
    // å•†å“è©³ç´°è¡¨ç¤ºé–¢æ•°
    function displayProductDetail(product) {
        console.log('ğŸ¯ å•†å“è©³ç´°è¡¨ç¤º:', product);
        
        // åŸºæœ¬æƒ…å ±
        document.getElementById('productName').textContent = product.name || 'å•†å“åæœªè¨­å®š';
        document.getElementById('productSku').textContent = `SKU: ${product.sku || 'SKUæœªè¨­å®š'}`;
        
        // å•†å“ã‚¿ã‚¤ãƒ—ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒãƒƒã‚¸
        updateProductType(product.type || 'stock');
        
        // çŠ¶æ…‹ãƒãƒƒã‚¸
        updateConditionBadge(product.condition || 'new');
        
        // ä¾¡æ ¼æƒ…å ±
        const price = parseFloat(product.price || 0);
        const cost = parseFloat(product.cost || 0);
        const margin = price > 0 && cost > 0 ? (((price - cost) / price) * 100).toFixed(1) : '0';
        
        document.getElementById('productPrice').textContent = `$${price.toFixed(2)}`;
        document.getElementById('productCost').textContent = `$${cost.toFixed(2)}`;
        document.getElementById('productMargin').textContent = `${margin}%`;
        
        // åœ¨åº«æƒ…å ±
        const stock = parseInt(product.stock || 0);
        const stockValue = (stock * price).toFixed(2);
        
        document.getElementById('productStock').textContent = `${stock}å€‹`;
        document.getElementById('stockValue').textContent = `$${stockValue}`;
        
        // åœ¨åº«çŠ¶æ…‹ã®è‰²åˆ†ã‘
        const stockElement = document.getElementById('productStock');
        stockElement.className = 'detail-value stock-value';
        if (stock > 50) stockElement.classList.add('stock-high');
        else if (stock > 10) stockElement.classList.add('stock-medium');
        else stockElement.classList.add('stock-low');
        
        // ãã®ä»–ã®æƒ…å ±
        document.getElementById('productCategory').textContent = product.category || 'æœªåˆ†é¡';
        document.getElementById('productCreated').textContent = product.created || 'ä¸æ˜';
        document.getElementById('productUpdated').textContent = product.updated || 'ä¸æ˜';
        
        // è²©å£²æƒ…å ±ï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
        document.getElementById('salesChannels').textContent = 'eBay, Amazon';
        document.getElementById('salesCount').textContent = '0å€‹';
        document.getElementById('totalRevenue').textContent = '$0.00';
        
        // å•†å“èª¬æ˜
        if (product.description && product.description.trim()) {
            document.getElementById('productDescription').textContent = product.description;
            document.getElementById('descriptionSection').style.display = 'block';
        }
        
        // å•†å“ç”»åƒ
        if (product.image) {
            document.getElementById('productImage').innerHTML = `<img src="${product.image}" alt="${product.name}">`;
        }
    }
    
    // å•†å“ã‚¿ã‚¤ãƒ—æ›´æ–°
    function updateProductType(type) {
        const iconElement = document.getElementById('productTypeIcon');
        const badgeElement = document.getElementById('productTypeBadge');
        
        const typeConfig = {
            'stock': { icon: 'fas fa-warehouse', text: 'æœ‰åœ¨åº«', class: 'badge-stock' },
            'dropship': { icon: 'fas fa-truck', text: 'ç„¡åœ¨åº«', class: 'badge-dropship' },
            'set': { icon: 'fas fa-layer-group', text: 'ã‚»ãƒƒãƒˆå“', class: 'badge-set' },
            'hybrid': { icon: 'fas fa-sync-alt', text: 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰', class: 'badge-hybrid' }
        };
        
        const config = typeConfig[type] || typeConfig['stock'];
        iconElement.className = config.icon;
        badgeElement.textContent = config.text;
        badgeElement.className = `badge ${config.class}`;
    }
    
    // çŠ¶æ…‹ãƒãƒƒã‚¸æ›´æ–°
    function updateConditionBadge(condition) {
        const badgeElement = document.getElementById('productConditionBadge');
        
        const conditionConfig = {
            'new': { text: 'æ–°å“', class: 'badge-new' },
            'used': { text: 'ä¸­å¤', class: 'badge-used' },
            'refurbished': { text: 'æ•´å‚™æ¸ˆã¿', class: 'badge-refurbished' }
        };
        
        const config = conditionConfig[condition] || conditionConfig['new'];
        badgeElement.textContent = config.text;
        badgeElement.className = `badge ${config.class}`;
    }
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹æ©Ÿèƒ½
    function closeModal() {
        window.parent.postMessage({
            action: 'closeModal',
            modalId: 'productDetailModal'
        }, '*');
    }
    
    // å•†å“ç·¨é›†æ©Ÿèƒ½
    function editProduct() {
        console.log('ğŸ”§ å•†å“ç·¨é›†:', currentProductData);
        // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãå‡¦ç†
        alert('å•†å“ç·¨é›†æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™');
    }
    
    // å•†å“è¤‡è£½æ©Ÿèƒ½
    function duplicateProduct() {
        console.log('ğŸ“‹ å•†å“è¤‡è£½:', currentProductData);
        // è¤‡è£½å‡¦ç†
        alert('å•†å“è¤‡è£½æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™');
    }
    
    console.log('âœ… å•†å“è©³ç´°iframeåˆæœŸåŒ–å®Œäº†');
    </script>
</body>
</html>