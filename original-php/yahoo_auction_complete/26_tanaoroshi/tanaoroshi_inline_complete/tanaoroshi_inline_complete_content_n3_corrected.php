<?php
/**
 * Ê£öÂç∏„Åó„Ç∑„Çπ„ÉÜ„É† - N3Ê∫ñÊã†ÂÆåÂÖ®‰øÆÊ≠£ÁâàÔºàÂÖ±ÈÄöCSS/JSÈÄ£Êê∫Ôºâ
 * ‰øÆÊ≠£ÂÜÖÂÆπ: ÂÖ±ÈÄö„Éï„Ç°„Ç§„É´ÈÄ£Êê∫„ÉªÊ≠£„Åó„ÅÑN3„É´„Éº„É´Ê∫ñÊã†
 * ‰øÆÊ≠£Êó•: 2025-08-18
 */

if (!defined('SECURE_ACCESS')) {
    die('Direct access not allowed');
}

function safe_output($str) {
    return htmlspecialchars($str, ENT_QUOTES, 'UTF-8');
}
?>

<!-- üéØ N3Ê∫ñÊã†ÂÖ±ÈÄö„Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„Åø -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="common/css/unified_modal_system.css">

<!-- üéØ N3Ê∫ñÊã†„É°„Ç§„É≥„Çπ„Çø„Ç§„É´Ôºà„Éö„Éº„Ç∏Â∞ÇÁî®CSSÔºâ -->
<style>
/* === CSSÂ§âÊï∞ÂÆöÁæ© === */
:root {
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f1f5f9;
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-muted: #64748b;
    --border-color: #e2e8f0;
    --border-light: #f1f5f9;
    --radius-lg: 0.75rem;
    --radius-md: 0.5rem;
    --radius-sm: 0.25rem;
    --space-xs: 0.5rem;
    --space-sm: 0.75rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --color-success: #059669;
    --color-warning: #dc6803;
    --color-info: #0e7490;
    --color-purple: #7c3aed;
    --color-ebay: #0064d2;
    --color-primary: #3b82f6;
}

/* === „Éô„Éº„Çπ„É¨„Ç§„Ç¢„Ç¶„Éà === */
body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
}

/* === „Éì„É•„Éº„Ç≥„É≥„ÉÜ„ÉäÁµ±‰∏Ä„Ç∑„Çπ„ÉÜ„É† === */
.inventory__main-content {
    position: relative;
    min-height: auto;
    width: 100%;
}

.inventory__view {
    position: relative;
    top: 0;
    left: 0;
    width: 100%;
    min-height: 100%;
    background: var(--bg-primary);
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    z-index: 1;
}

.inventory__view--hidden {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    z-index: 1 !important;
    position: absolute !important;
    top: 0;
    left: -9999px;
}

.inventory__view--visible {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
    z-index: 10 !important;
    position: relative !important;
    top: auto;
    left: auto;
}

/* === CSS GridÂÆåÂÖ®ÂØæÂøúÁâà === */
.inventory__grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
    gap: 1rem !important;
    padding: var(--space-lg) !important;
    background: var(--bg-primary) !important;
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
    grid-auto-rows: max-content !important;
    justify-content: center !important;
}

/* === „Ç´„Éº„Éâ„Éá„Ç∂„Ç§„É≥ === */
.inventory__card {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-lg) !important;
    overflow: hidden !important;
    cursor: pointer !important;
    transition: all 0.2s ease-in-out !important;
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
    height: 280px !important;
}

.inventory__card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15) !important;
}

.inventory__card-image {
    position: relative !important;
    height: 150px !important;
    background: var(--bg-tertiary) !important;
    overflow: hidden !important;
    flex-shrink: 0 !important;
}

.inventory__card-img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
}

.inventory__card-placeholder {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 100% !important;
    background: var(--bg-tertiary) !important;
    color: var(--text-muted) !important;
    flex-direction: column !important;
    gap: 0.5rem !important;
    font-size: 0.875rem;
}

.inventory__badge {
    position: absolute !important;
    top: 0.5rem !important;
    right: 0.5rem !important;
    padding: 0.25rem 0.5rem !important;
    border-radius: var(--radius-sm) !important;
    font-size: 0.7rem !important;
    font-weight: 600 !important;
    color: white !important;
}

.inventory__badge--stock { background: var(--color-success) !important; }
.inventory__badge--dropship { background: var(--color-info) !important; }
.inventory__badge--set { background: var(--color-purple) !important; }
.inventory__badge--hybrid { background: var(--color-warning) !important; }

.inventory__card-info {
    padding: var(--space-sm) !important;
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 0.5rem !important;
}

.inventory__card-title {
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    color: var(--text-primary) !important;
    line-height: 1.25 !important;
    margin: 0 !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    height: 2.5rem !important;
}

.inventory__card-price {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.25rem !important;
}

.inventory__card-price-main {
    font-size: 1rem !important;
    font-weight: 700 !important;
    color: var(--text-primary) !important;
}

.inventory__card-price-sub {
    font-size: 0.75rem !important;
    color: var(--text-muted) !important;
}

.inventory__card-footer {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    margin-top: auto !important;
    padding-top: 0.5rem !important;
    border-top: 1px solid var(--border-light) !important;
    font-size: 0.75rem !important;
}

.inventory__card-sku {
    font-family: monospace !important;
    background: var(--bg-tertiary) !important;
    padding: 0.125rem 0.25rem !important;
    border-radius: var(--radius-sm) !important;
    color: var(--text-muted) !important;
}

.inventory__card-stock {
    font-weight: 600 !important;
    color: var(--text-secondary) !important;
}

/* === „Åù„ÅÆ‰ªñ„ÅÆ„Çπ„Çø„Ç§„É´ÔºàÁ∞°ÊΩîÁâàÔºâ === */
.inventory__header {
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    padding: var(--space-lg);
}

.inventory__title {
    font-size: 1.875rem;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin: 0;
}

.inventory__filter-bar {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-md);
}

.inventory__view-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    padding: 0.5rem 1rem;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
}

.btn--success { background: var(--color-success); color: white; }
.btn--warning { background: var(--color-warning); color: white; }
.btn--info { background: var(--color-info); color: white; }
.btn--primary { background: var(--color-primary); color: white; }
.btn--secondary { background: var(--bg-tertiary); color: var(--text-secondary); }

.btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
}

/* === ÂïÜÂìÅ„Çø„Ç§„ÉóÈÅ∏ÊäûÔºàÂÖ±ÈÄöCSSÂà©Áî®Ôºâ === */
.inventory__product-type-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.inventory__product-type-option {
    cursor: pointer;
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
}

.inventory__product-type-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-lg) var(--space-md);
    background: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    text-align: center;
    transition: all 0.2s ease;
    min-height: 100px;
}

.inventory__product-type-card i {
    font-size: 1.5rem;
    margin-bottom: var(--space-sm);
    color: var(--text-muted);
    transition: color 0.2s ease;
}

.inventory__product-type-card span {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.875rem;
}

.inventory__product-type-option:hover .inventory__product-type-card {
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.inventory__product-type-option--active .inventory__product-type-card {
    border-color: var(--color-primary);
    background: rgba(59, 130, 246, 0.05);
}

/* === „É¨„Çπ„Éù„É≥„Ç∑„Éñ === */
@media (max-width: 768px) {
    .inventory__grid { 
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) !important; 
        gap: 0.5rem !important; 
    }
    .inventory__card { height: 240px !important; }
}
</style>

<div class="inventory__header">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
        <h1 class="inventory__title">
            <i class="fas fa-warehouse" style="color: var(--color-info);"></i>
            <?php echo safe_output('Ê£öÂç∏„Åó„Ç∑„Çπ„ÉÜ„É†ÔºàN3Ê∫ñÊã†„ÉªÂÖ±ÈÄö„Éï„Ç°„Ç§„É´ÈÄ£Êê∫ÁâàÔºâ'); ?>
        </h1>
        
        <div style="display: flex; align-items: center; gap: 0.5rem; background: var(--bg-tertiary); padding: 0.5rem 1rem; border-radius: var(--radius-md);">
            <i class="fas fa-exchange-alt"></i>
            <span>USD/JPY:</span>
            <span id="exchange-rate">¬•150.25</span>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: var(--space-md);">
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="total-products">30</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('Á∑èÂïÜÂìÅÊï∞'); ?></span>
        </div>
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="stock-products">8</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('ÊúâÂú®Â∫´'); ?></span>
        </div>
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="dropship-products">8</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('ÁÑ°Âú®Â∫´'); ?></span>
        </div>
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="set-products">6</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('„Çª„ÉÉ„ÉàÂìÅ'); ?></span>
        </div>
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="hybrid-products">8</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('„Éè„Ç§„Éñ„É™„ÉÉ„Éâ'); ?></span>
        </div>
        <div style="text-align: center; background: var(--bg-tertiary); padding: var(--space-md); border-radius: var(--radius-md);">
            <span style="display: block; font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="total-value">$608.4K</span>
            <span style="font-size: 0.875rem; color: var(--text-muted);"><?php echo safe_output('Á∑èÂú®Â∫´‰æ°ÂÄ§'); ?></span>
        </div>
    </div>
</div>

<!-- „Éï„Ç£„É´„Çø„Éº„Éê„Éº -->
<div class="inventory__filter-bar">
    <h2 style="margin: 0 0 var(--space-md) 0; font-size: 1.25rem; color: var(--text-primary); display: flex; align-items: center; gap: var(--space-sm);">
        <i class="fas fa-filter"></i>
        <?php echo safe_output('„Éï„Ç£„É´„Çø„ÉºË®≠ÂÆö'); ?>
    </h2>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-md); margin-bottom: var(--space-md);">
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);"><?php echo safe_output('ÂïÜÂìÅÁ®ÆÈ°û'); ?></label>
            <select style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); color: var(--text-primary);" id="filter-type">
                <option value=""><?php echo safe_output('„Åô„Åπ„Å¶'); ?></option>
                <option value="stock"><?php echo safe_output('ÊúâÂú®Â∫´'); ?></option>
                <option value="dropship"><?php echo safe_output('ÁÑ°Âú®Â∫´'); ?></option>
                <option value="set"><?php echo safe_output('„Çª„ÉÉ„ÉàÂìÅ'); ?></option>
                <option value="hybrid"><?php echo safe_output('„Éè„Ç§„Éñ„É™„ÉÉ„Éâ'); ?></option>
            </select>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);"><?php echo safe_output('Âá∫ÂìÅ„É¢„Éº„É´'); ?></label>
            <select style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); color: var(--text-primary);" id="filter-channel">
                <option value=""><?php echo safe_output('„Åô„Åπ„Å¶'); ?></option>
                <option value="ebay">eBay</option>
                <option value="amazon">Amazon</option>
                <option value="mercari">„É°„É´„Ç´„É™</option>
            </select>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);"><?php echo safe_output('Âú®Â∫´Áä∂Ê≥Å'); ?></label>
            <select style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); color: var(--text-primary);" id="filter-stock-status">
                <option value=""><?php echo safe_output('„Åô„Åπ„Å¶'); ?></option>
                <option value="in-stock"><?php echo safe_output('Âú®Â∫´„ÅÇ„Çä'); ?></option>
                <option value="low-stock"><?php echo safe_output('Âú®Â∫´ÂÉÖÂ∞ë'); ?></option>
                <option value="out-of-stock"><?php echo safe_output('Âú®Â∫´Âàá„Çå'); ?></option>
            </select>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);"><?php echo safe_output('‰æ°Ê†ºÁØÑÂõ≤ (USD)'); ?></label>
            <select style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); color: var(--text-primary);" id="filter-price-range">
                <option value=""><?php echo safe_output('„Åô„Åπ„Å¶'); ?></option>
                <option value="0-100">$0 - $100</option>
                <option value="100-500">$100 - $500</option>
                <option value="500-1000">$500 - $1,000</option>
                <option value="1000+">$1,000‰ª•‰∏ä</option>
            </select>
        </div>
    </div>
    
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display: flex; gap: var(--space-sm);">
            <button class="btn btn--secondary" id="js-reset-filters-btn">
            <i class="fas fa-undo"></i>
            <?php echo safe_output('„É™„Çª„ÉÉ„Éà'); ?>
            </button>
            <button class="btn btn--info" id="js-apply-filters-btn">
            <i class="fas fa-search"></i>
            <?php echo safe_output('ÈÅ©Áî®'); ?>
            </button>
        </div>
        
        <div style="position: relative; display: flex; align-items: center;">
            <i class="fas fa-search" style="position: absolute; left: 0.75rem; color: var(--text-muted);"></i>
            <input type="text" style="padding: 0.5rem 1rem 0.5rem 2.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); min-width: 300px;" id="search-input" placeholder="<?php echo safe_output('ÂïÜÂìÅÂêç„ÉªSKU„Éª„Ç´„ÉÜ„Ç¥„É™„ÅßÊ§úÁ¥¢...'); ?>">
        </div>
    </div>
</div>

<!-- „Éì„É•„ÉºÂàá„ÇäÊõø„Åà„Ç≥„É≥„Éà„É≠„Éº„É´ -->
<div class="inventory__view-controls">
    <div style="display: flex; background: var(--bg-tertiary); border-radius: var(--radius-md); padding: 0.25rem;">
        <button style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: var(--bg-secondary); border-radius: var(--radius-sm); color: var(--text-primary); cursor: pointer; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);" id="card-view-btn">
            <i class="fas fa-th-large"></i>
            <?php echo safe_output('„Ç´„Éº„Éâ„Éì„É•„Éº'); ?>
        </button>
        <button style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: transparent; border-radius: var(--radius-sm); color: var(--text-secondary); cursor: pointer;" id="excel-view-btn">
            <i class="fas fa-table"></i>
            <?php echo safe_output('Excel„Éì„É•„Éº'); ?>
        </button>
    </div>
    
    <div style="display: flex; gap: var(--space-sm);">
        <button class="btn btn--success" id="js-add-product-btn">
            <i class="fas fa-plus"></i>
            <?php echo safe_output('Êñ∞Ë¶èÂïÜÂìÅÁôªÈå≤'); ?>
        </button>
        
        <button class="btn btn--warning" id="js-create-set-btn">
            <i class="fas fa-layer-group"></i>
            <?php echo safe_output('Êñ∞Ë¶è„Çª„ÉÉ„ÉàÂìÅ‰ΩúÊàê'); ?>
        </button>
        
        <button class="btn btn--info" id="js-load-data-btn">
            <i class="fas fa-database"></i>
            <?php echo safe_output('eBay PostgreSQL„Éá„Éº„ÇøÂèñÂæó'); ?>
        </button>
        
        <button class="btn btn--primary" id="js-sync-btn">
            <i class="fas fa-sync"></i>
            <?php echo safe_output('eBayÂêåÊúüÂÆüË°å'); ?>
        </button>
    </div>
</div>

<!-- „Éì„É•„ÉºÁµ±‰∏Ä„É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
<div class="inventory__main-content">
    <!-- „Ç´„Éº„Éâ„Éì„É•„Éº -->
    <div class="inventory__view inventory__view--visible" id="card-view">        
        <div class="inventory__grid js-inventory-grid">
            <div style="text-align: center; padding: 2rem; color: #64748b; grid-column: 1 / -1;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                <p>N3Ê∫ñÊã†„Ç∑„Çπ„ÉÜ„É†„Åß„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...</p>
            </div>
        </div>
    </div>

    <!-- Excel„Éì„É•„Éº -->
    <div class="inventory__view inventory__view--hidden" id="list-view">
        <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-lg); overflow: hidden; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
            <div style="background: var(--bg-tertiary); border-bottom: 1px solid var(--border-color); padding: var(--space-sm) var(--space-md); display: flex; justify-content: space-between; align-items: center; gap: var(--space-md); min-height: 40px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: var(--space-sm); flex-wrap: wrap;">
                    <button style="padding: var(--space-xs) var(--space-sm); border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--color-success); color: white; font-size: 0.75rem; font-weight: 500; cursor: pointer; height: 28px; display: inline-flex; align-items: center; gap: var(--space-xs);" onclick="openAddProductModal()">
                        <i class="fas fa-plus"></i>
                        Êñ∞Ë¶èÁôªÈå≤
                    </button>
                    <button style="padding: var(--space-xs) var(--space-sm); border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-secondary); color: var(--text-primary); font-size: 0.75rem; cursor: pointer; height: 28px;">
                        <i class="fas fa-trash"></i>
                        ÈÅ∏ÊäûÂâäÈô§
                    </button>
                    <button style="padding: var(--space-xs) var(--space-sm); border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--color-warning); color: white; font-size: 0.75rem; cursor: pointer; height: 28px;" onclick="createNewSet()">
                        <i class="fas fa-layer-group"></i>
                        „Çª„ÉÉ„ÉàÂìÅ‰ΩúÊàê
                    </button>
                </div>
            </div>
            
            <div id="excel-table-container">
                <table id="excel-table" style="width: 100%; border-collapse: collapse; background: var(--bg-secondary); font-size: 0.75rem; line-height: 1.2;">
                    <thead>
                        <tr>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">
                                <input type="checkbox" style="width: 14px; height: 14px; cursor: pointer;" />
                            </th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">ÁîªÂÉè</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">ÂïÜÂìÅÂêç</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">SKU</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">Á®ÆÈ°û</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">Ë≤©Â£≤‰æ°Ê†º(USD)</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">Âú®Â∫´Êï∞</th>
                            <th style="background: var(--bg-tertiary); border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: left; font-weight: 600; color: var(--text-primary); font-size: 0.7rem; height: 28px;">Êìç‰Ωú</th>
                        </tr>
                    </thead>
                    <tbody id="excel-table-body">
                        <tr>
                            <td colspan="8" style="border: 1px solid var(--border-color); padding: 1rem; text-align: center; color: var(--text-muted);">
                                <i class="fas fa-spinner fa-spin" style="margin-right: 0.5rem;"></i>
                                N3Ê∫ñÊã†„Ç∑„Çπ„ÉÜ„É†„Åß„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- „É¢„Éº„ÉÄ„É´Áæ§ÔºàÂÖ±ÈÄöCSS‰ΩøÁî®Ôºâ -->
<!-- ÂïÜÂìÅË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
<div id="itemModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalTitle">ÂïÜÂìÅË©≥Á¥∞</h2>
            <button class="modal-close" id="js-close-item-modal">&times;</button>
        </div>
        <div class="modal-body" id="modalBody">
            <!-- ÂïÜÂìÅË©≥Á¥∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
        <div class="modal-footer">
            <button class="btn btn--secondary" id="js-close-item-btn">Èñâ„Åò„Çã</button>
            <button class="btn btn--primary" id="js-edit-item-btn">Á∑®ÈõÜ</button>
        </div>
    </div>
</div>

<!-- Êñ∞Ë¶èÂïÜÂìÅÁôªÈå≤„É¢„Éº„ÉÄ„É´ÔºàÂÖ±ÈÄöCSS‰ΩøÁî®Ôºâ -->
<div id="addProductModal" class="modal">
    <div class="modal-content" style="max-width: 900px; width: 95vw;">
        <div class="modal-header">
            <h2 class="modal-title">
                <i class="fas fa-plus-circle"></i>
                Êñ∞Ë¶èÂïÜÂìÅÁôªÈå≤
            </h2>
            <button class="modal-close" id="js-close-add-modal">&times;</button>
        </div>
        
        <div class="modal-body">
            <!-- ÂïÜÂìÅ„Çø„Ç§„ÉóÈÅ∏Êäû -->
            <div style="margin-bottom: var(--space-lg);">
                <h3 style="margin-bottom: var(--space-md); display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-tag"></i>
                    ÂïÜÂìÅ„Çø„Ç§„Éó
                </h3>
                <div class="inventory__product-type-grid">
                    <label class="inventory__product-type-option inventory__product-type-option--active" data-type="stock">
                        <input type="radio" name="product-type" value="stock" checked style="display: none;">
                        <div class="inventory__product-type-card">
                            <i class="fas fa-warehouse"></i>
                            <span>ÊúâÂú®Â∫´</span>
                        </div>
                    </label>
                    <label class="inventory__product-type-option" data-type="dropship">
                        <input type="radio" name="product-type" value="dropship" style="display: none;">
                        <div class="inventory__product-type-card">
                            <i class="fas fa-truck"></i>
                            <span>ÁÑ°Âú®Â∫´</span>
                        </div>
                    </label>
                    <label class="inventory__product-type-option" data-type="set">
                        <input type="radio" name="product-type" value="set" style="display: none;">
                        <div class="inventory__product-type-card">
                            <i class="fas fa-layer-group"></i>
                            <span>„Çª„ÉÉ„ÉàÂìÅ</span>
                        </div>
                    </label>
                    <label class="inventory__product-type-option" data-type="hybrid">
                        <input type="radio" name="product-type" value="hybrid" style="display: none;">
                        <div class="inventory__product-type-card">
                            <i class="fas fa-sync-alt"></i>
                            <span>„Éè„Ç§„Éñ„É™„ÉÉ„Éâ</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Âü∫Êú¨ÊÉÖÂ†±ÂÖ•Âäõ„Éï„Ç©„Éº„É† -->
            <div class="unified-form-grid">
                <div class="unified-form-group">
                    <label class="unified-form-label unified-form-label--required">ÂïÜÂìÅÂêç</label>
                    <input type="text" class="unified-form-input" id="new-product-name" placeholder="ÂïÜÂìÅÂêç„ÇíÂÖ•Âäõ" required>
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label unified-form-label--required">SKU</label>
                    <input type="text" class="unified-form-input" id="new-product-sku" placeholder="SKU-XXX-001" required>
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">Ë≤©Â£≤‰æ°Ê†º (USD)</label>
                    <input type="number" class="unified-form-input" id="new-product-price" placeholder="0.00" min="0" step="0.01">
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">‰ªïÂÖ•‰æ°Ê†º (USD)</label>
                    <input type="number" class="unified-form-input" id="new-product-cost" placeholder="0.00" min="0" step="0.01">
                </div>
                <div class="unified-form-group" id="stock-field">
                    <label class="unified-form-label">Âú®Â∫´Êï∞</label>
                    <input type="number" class="unified-form-input" id="new-product-stock" placeholder="0" min="0" value="0">
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">Áä∂ÊÖã</label>
                    <select class="unified-form-input" id="new-product-condition">
                        <option value="new">Êñ∞ÂìÅ</option>
                        <option value="used">‰∏≠Âè§</option>
                        <option value="refurbished">Êï¥ÂÇôÊ∏à„Åø</option>
                    </select>
                </div>
            </div>

            <!-- ÂïÜÂìÅË™¨Êòé -->
            <div class="unified-form-group" style="margin: var(--space-lg) 0;">
                <label class="unified-form-label">ÂïÜÂìÅË™¨Êòé</label>
                <textarea class="unified-form-input" id="new-product-description" placeholder="ÂïÜÂìÅ„ÅÆË©≥Á¥∞„Å™Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..." style="min-height: 80px; resize: vertical;"></textarea>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn--secondary" id="js-cancel-add-btn">„Ç≠„É£„É≥„Çª„É´</button>
            <button class="btn btn--success" id="js-save-product-btn">
                <i class="fas fa-save"></i>
                ÂïÜÂìÅ„Çí‰øùÂ≠ò
            </button>
        </div>
    </div>
</div>

<!-- „Çª„ÉÉ„ÉàÂìÅ‰ΩúÊàê„É¢„Éº„ÉÄ„É´ -->
<div id="setModal" class="modal">
    <div class="modal-content" style="max-width: 1200px; width: 95vw;">
        <div class="modal-header">
            <h2 class="modal-title">„Çª„ÉÉ„ÉàÂìÅ‰ΩúÊàê„ÉªÁ∑®ÈõÜ</h2>
            <button class="modal-close" id="js-close-set-modal">&times;</button>
        </div>
        
        <div class="modal-body">
            <div class="unified-form-grid">
                <div class="unified-form-group">
                    <label class="unified-form-label">„Çª„ÉÉ„ÉàÂìÅÂêç</label>
                    <input type="text" class="unified-form-input" id="setName" placeholder="Gaming Accessories Bundle">
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">SKU</label>
                    <input type="text" class="unified-form-input" id="setSku" placeholder="SET-XXX-001">
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">Ë≤©Â£≤‰æ°Ê†º (USD)</label>
                    <input type="number" class="unified-form-input" id="setPrice" placeholder="59.26" step="0.01">
                </div>
                <div class="unified-form-group">
                    <label class="unified-form-label">„Ç´„ÉÜ„Ç¥„É™</label>
                    <input type="text" class="unified-form-input" id="setCategory" placeholder="Bundle">
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn--secondary" id="js-cancel-set-btn">„Ç≠„É£„É≥„Çª„É´</button>
            <button class="btn btn--success" id="js-save-set-btn">
                <i class="fas fa-layer-group"></i>
                „Çª„ÉÉ„ÉàÂìÅ„Çí‰øùÂ≠ò
            </button>
        </div>
    </div>
</div>

<!-- „ÉÜ„Çπ„ÉàÁµêÊûú„É¢„Éº„ÉÄ„É´ -->
<div id="testModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">„Ç∑„Çπ„ÉÜ„É†„ÉÜ„Çπ„ÉàÁµêÊûú</h2>
            <button class="modal-close" id="js-close-test-modal">&times;</button>
        </div>
        <div class="modal-body" id="testModalBody">
            <!-- „ÉÜ„Çπ„ÉàÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
        <div class="modal-footer">
            <button class="btn btn--secondary" id="js-close-test-btn">Èñâ„Åò„Çã</button>
        </div>
    </div>
</div>

<!-- üéØ N3Ê∫ñÊã†ÂÖ±ÈÄöJavaScriptË™≠„ÅøËæº„Åø -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="common/js/ui/modal_system.js"></script>
<script src="common/js/hooks/modal_integration.js"></script>
<script src="common/js/tanaoroshi_inventory.js"></script>

<!-- üéØ N3Ê∫ñÊã†„Éö„Éº„Ç∏Â∞ÇÁî®JavaScript -->
<script>
// N3Ê∫ñÊã†Ê£öÂç∏„Åó„Ç∑„Çπ„ÉÜ„É† - „É°„Ç§„É≥Âà∂Âæ°
class TanaoroshiController {
    constructor() {
        this.currentView = 'card';
        this.inventoryData = [];
        this.filteredData = [];
        this.currentPage = 1;
        this.itemsPerPage = 24;
        
        this.init();
    }
    
    init() {
        this.setupEventListeners();
        this.loadInitialData();
        this.log('Ê£öÂç∏„Åó„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü');
    }
    
    setupEventListeners() {
        // „Éì„É•„ÉºÂàá„ÇäÊõø„Åà
        document.getElementById('card-view-btn')?.addEventListener('click', () => {
            this.switchView('card');
        });
        
        document.getElementById('excel-view-btn')?.addEventListener('click', () => {
            this.switchView('excel');
        });
        
        // ÂïÜÂìÅ„Çø„Ç§„ÉóÈÅ∏Êäû
        document.querySelectorAll('.inventory__product-type-option').forEach(option => {
            option.addEventListener('click', () => {
                this.selectProductType(option);
            });
        });
    }
    
    switchView(viewType) {
        const cardView = document.getElementById('card-view');
        const excelView = document.getElementById('list-view');
        const cardBtn = document.getElementById('card-view-btn');
        const excelBtn = document.getElementById('excel-view-btn');
        
        if (viewType === 'card') {
            cardView?.classList.remove('inventory__view--hidden');
            cardView?.classList.add('inventory__view--visible');
            excelView?.classList.remove('inventory__view--visible');
            excelView?.classList.add('inventory__view--hidden');
            
            // „Éú„Çø„É≥„Çπ„Çø„Ç§„É´Êõ¥Êñ∞
            cardBtn?.setAttribute('style', 'display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: var(--bg-secondary); border-radius: var(--radius-sm); color: var(--text-primary); cursor: pointer; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);');
            excelBtn?.setAttribute('style', 'display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: transparent; border-radius: var(--radius-sm); color: var(--text-secondary); cursor: pointer;');
        } else {
            excelView?.classList.remove('inventory__view--hidden');
            excelView?.classList.add('inventory__view--visible');
            cardView?.classList.remove('inventory__view--visible');
            cardView?.classList.add('inventory__view--hidden');
            
            // „Éú„Çø„É≥„Çπ„Çø„Ç§„É´Êõ¥Êñ∞
            excelBtn?.setAttribute('style', 'display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: var(--bg-secondary); border-radius: var(--radius-sm); color: var(--text-primary); cursor: pointer; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);');
            cardBtn?.setAttribute('style', 'display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: none; background: transparent; border-radius: var(--radius-sm); color: var(--text-secondary); cursor: pointer;');
        }
        
        this.currentView = viewType;
        this.log(`„Éì„É•„ÉºÂàá„ÇäÊõø„Åà: ${viewType}`);
    }
    
    selectProductType(option) {
        // Êó¢Â≠òÈÅ∏ÊäûËß£Èô§
        document.querySelectorAll('.inventory__product-type-option').forEach(opt => {
            opt.classList.remove('inventory__product-type-option--active');
            opt.querySelector('input').checked = false;
        });
        
        // Êñ∞„Åó„ÅÑÈÅ∏ÊäûË®≠ÂÆö
        option.classList.add('inventory__product-type-option--active');
        option.querySelector('input').checked = true;
        
        const selectedType = option.dataset.type;
        this.updateFormByProductType(selectedType);
        this.log(`ÂïÜÂìÅ„Çø„Ç§„ÉóÈÅ∏Êäû: ${selectedType}`);
    }
    
    updateFormByProductType(type) {
        const stockField = document.getElementById('stock-field');
        
        if (stockField) {
            if (type === 'dropship') {
                stockField.style.display = 'none';
            } else {
                stockField.style.display = 'block';
            }
        }
    }
    
    async loadInitialData() {
        try {
            this.log('„Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÈñãÂßã');
            
            // N3Core‰ΩøÁî®„Åó„Å¶AjaxÂÆüË°å
            if (window.N3) {
                const result = await window.N3.ajax('tanaoroshi_get_inventory', { limit: 30 });
                this.inventoryData = result.data || [];
            } else {
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
                const response = await fetch('modules/tanaoroshi_inline_complete/tanaoroshi_ajax_handler.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: 'action=get_inventory&limit=30'
                });
                
                const result = await response.json();
                this.inventoryData = result.data || [];
            }
            
            this.filteredData = [...this.inventoryData];
            this.renderData();
            this.updateStats();
            
            this.log(`„Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÂÆå‰∫Ü: ${this.inventoryData.length}‰ª∂`);
            
        } catch (error) {
            this.error('„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
            this.showError('„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
        }
    }
    
    renderData() {
        if (this.currentView === 'card') {
            this.renderCardView();
        } else {
            this.renderExcelView();
        }
    }
    
    renderCardView() {
        const container = document.querySelector('.js-inventory-grid');
        if (!container) return;
        
        if (this.filteredData.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 2rem; color: #64748b; grid-column: 1 / -1;">
                    <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <p>„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                </div>
            `;
            return;
        }
        
        const cards = this.filteredData.map(item => this.createCardHTML(item)).join('');
        container.innerHTML = cards;
    }
    
    createCardHTML(item) {
        const typeClass = `inventory__badge--${item.type}`;
        const typeLabel = {
            stock: 'ÊúâÂú®Â∫´',
            dropship: 'ÁÑ°Âú®Â∫´',
            set: '„Çª„ÉÉ„ÉàÂìÅ',
            hybrid: '„Éè„Ç§„Éñ„É™„ÉÉ„Éâ'
        }[item.type] || item.type;
        
        return `
            <div class="inventory__card" onclick="openItemModal('${item.id}')">
                <div class="inventory__card-image">
                    ${item.image ? 
                        `<img src="${item.image}" alt="${item.title}" class="inventory__card-img">` :
                        `<div class="inventory__card-placeholder">
                            <i class="fas fa-image"></i>
                            <span>ÁîªÂÉè„Å™„Åó</span>
                        </div>`
                    }
                    <div class="inventory__badge ${typeClass}">${typeLabel}</div>
                </div>
                <div class="inventory__card-info">
                    <h3 class="inventory__card-title">${item.title || item.name}</h3>
                    <div class="inventory__card-price">
                        <div class="inventory__card-price-main">$${item.priceUSD || item.price}</div>
                        <div class="inventory__card-price-sub">¬•${Math.round((item.priceUSD || item.price) * 150)}</div>
                    </div>
                </div>
                <div class="inventory__card-footer">
                    <span class="inventory__card-sku">${item.sku}</span>
                    <span class="inventory__card-stock">Âú®Â∫´: ${item.stock || item.quantity || 0}</span>
                </div>
            </div>
        `;
    }
    
    renderExcelView() {
        const tbody = document.getElementById('excel-table-body');
        if (!tbody) return;
        
        if (this.filteredData.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="8" style="border: 1px solid var(--border-color); padding: 1rem; text-align: center; color: var(--text-muted);">
                        „Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì
                    </td>
                </tr>
            `;
            return;
        }
        
        const rows = this.filteredData.map(item => this.createRowHTML(item)).join('');
        tbody.innerHTML = rows;
    }
    
    createRowHTML(item) {
        const typeLabel = {
            stock: 'ÊúâÂú®Â∫´',
            dropship: 'ÁÑ°Âú®Â∫´',
            set: '„Çª„ÉÉ„ÉàÂìÅ',
            hybrid: '„Éè„Ç§„Éñ„É™„ÉÉ„Éâ'
        }[item.type] || item.type;
        
        return `
            <tr style="border-bottom: 1px solid var(--border-color); cursor: pointer;" onclick="openItemModal('${item.id}')">
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm);">
                    <input type="checkbox" onclick="event.stopPropagation();" style="width: 14px; height: 14px;">
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm);">
                    ${item.image ? 
                        `<img src="${item.image}" style="width: 40px; height: 30px; object-fit: cover; border-radius: 4px;">` :
                        `<div style="width: 40px; height: 30px; background: var(--bg-tertiary); border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-image" style="color: var(--text-muted); font-size: 0.7rem;"></i>
                        </div>`
                    }
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    ${item.title || item.name}
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); font-family: monospace; font-size: 0.7rem;">
                    ${item.sku}
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm);">
                    <span style="padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.6rem; font-weight: 600; background: var(--bg-tertiary); color: var(--text-secondary);">
                        ${typeLabel}
                    </span>
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: right; font-weight: 600;">
                    $${item.priceUSD || item.price}
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: center;">
                    ${item.stock || item.quantity || 0}
                </td>
                <td style="border: 1px solid var(--border-color); padding: var(--space-xs) var(--space-sm); text-align: center;">
                    <button style="padding: 0.125rem 0.25rem; border: 1px solid var(--border-color); border-radius: 0.25rem; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.6rem; cursor: pointer;" onclick="event.stopPropagation(); editItem('${item.id}')">
                        Á∑®ÈõÜ
                    </button>
                </td>
            </tr>
        `;
    }
    
    updateStats() {
        const total = this.inventoryData.length;
        const stock = this.inventoryData.filter(item => item.type === 'stock').length;
        const dropship = this.inventoryData.filter(item => item.type === 'dropship').length;
        const set = this.inventoryData.filter(item => item.type === 'set').length;
        const hybrid = this.inventoryData.filter(item => item.type === 'hybrid').length;
        
        const totalValue = this.inventoryData.reduce((sum, item) => {
            const price = parseFloat(item.priceUSD || item.price || 0);
            const quantity = parseInt(item.stock || item.quantity || 0);
            return sum + (price * quantity);
        }, 0);
        
        // DOMÊõ¥Êñ∞
        document.getElementById('total-products').textContent = total;
        document.getElementById('stock-products').textContent = stock;
        document.getElementById('dropship-products').textContent = dropship;
        document.getElementById('set-products').textContent = set;
        document.getElementById('hybrid-products').textContent = hybrid;
        document.getElementById('total-value').textContent = `$${(totalValue / 1000).toFixed(1)}K`;
    }
    
    showError(message) {
        if (window.N3Modal) {
            window.N3Modal.alert(message, '„Ç®„É©„Éº', 'error');
        } else {
            alert(message);
        }
    }
    
    log(message, data = null) {
        if (window.N3?.config?.debug) {
            console.log(`[TANAOROSHI] ${message}`, data || '');
        }
    }
    
    error(message, data = null) {
        console.error(`[TANAOROSHI] ${message}`, data || '');
    }
}

// „Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞ÔºàÊó¢Â≠ò„Ç≥„Éº„Éâ„Å®„ÅÆ‰∫íÊèõÊÄßÔºâ
function openAddProductModal() {
    if (window.N3Modal) {
        window.N3Modal.openModal('addProductModal');
    } else {
        document.getElementById('addProductModal').style.display = 'flex';
    }
}

function closeModal(modalId) {
    if (window.N3Modal) {
        window.N3Modal.closeModal(modalId);
    } else {
        document.getElementById(modalId).style.display = 'none';
    }
}

function createNewSet() {
    if (window.N3Modal) {
        window.N3Modal.openModal('setModal');
    } else {
        document.getElementById('setModal').style.display = 'flex';
    }
}

function openItemModal(itemId) {
    console.log('ÂïÜÂìÅË©≥Á¥∞Ë°®Á§∫:', itemId);
    // TODO: ÂïÜÂìÅË©≥Á¥∞„É¢„Éº„ÉÄ„É´ÂÆüË£Ö
}

function editItem(itemId) {
    console.log('ÂïÜÂìÅÁ∑®ÈõÜ:', itemId);
    // TODO: ÂïÜÂìÅÁ∑®ÈõÜÊ©üËÉΩÂÆüË£Ö
}

function saveNewProduct() {
    console.log('ÂïÜÂìÅ‰øùÂ≠òÂá¶ÁêÜ');
    // TODO: ÂïÜÂìÅ‰øùÂ≠òÂá¶ÁêÜÂÆüË£Ö
    closeModal('addProductModal');
}

function saveSetProduct() {
    console.log('„Çª„ÉÉ„ÉàÂìÅ‰øùÂ≠òÂá¶ÁêÜ');
    // TODO: „Çª„ÉÉ„ÉàÂìÅ‰øùÂ≠òÂá¶ÁêÜÂÆüË£Ö
    closeModal('setModal');
}

function loadEbayPostgreSQLData() {
    if (window.tanaoroshiController) {
        window.tanaoroshiController.loadInitialData();
    }
}

function syncWithEbay() {
    console.log('eBayÂêåÊúüÂá¶ÁêÜ');
    // TODO: eBayÂêåÊúüÂá¶ÁêÜÂÆüË£Ö
}

function testPostgreSQL() {
    console.log('PostgreSQL„ÉÜ„Çπ„Éà');
    // TODO: PostgreSQL„ÉÜ„Çπ„ÉàÂÆüË£Ö
}

function resetFilters() {
    console.log('„Éï„Ç£„É´„Çø„Éº„É™„Çª„ÉÉ„Éà');
    // TODO: „Éï„Ç£„É´„Çø„Éº„É™„Çª„ÉÉ„ÉàÂÆüË£Ö
}

function applyFilters() {
    console.log('„Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®');
    // TODO: „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®ÂÆüË£Ö
}

// ÂàùÊúüÂåñ
document.addEventListener('DOMContentLoaded', () => {
    window.tanaoroshiController = new TanaoroshiController();
    console.log('‚úÖ N3Ê∫ñÊã†Ê£öÂç∏„Åó„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫ÜÔºàÂÖ±ÈÄö„Éï„Ç°„Ç§„É´ÈÄ£Êê∫ÁâàÔºâ');
});
</script>
