# ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ  ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

## ğŸ“‹ å‰ææ¡ä»¶

- Node.js 16ä»¥ä¸Š
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Reacté–‹ç™ºç’°å¢ƒ

---

## ğŸš€ Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. https://supabase.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. "New Project"ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
4. ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠï¼ˆæ—¥æœ¬ãªã‚‰ Tokyoï¼‰

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€ŒSQL Editorã€ã‚’é–‹ã
2. `supabase_scoring_schema.sql` ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
3. å®Ÿè¡Œï¼ˆRunï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯

### 3. APIèªè¨¼æƒ…å ±å–å¾—

1. Settings â†’ API ã‹ã‚‰ä»¥ä¸‹ã‚’å–å¾—:
   - `Project URL` â†’ `REACT_APP_SUPABASE_URL`
   - `anon public` â†’ `REACT_APP_SUPABASE_ANON_KEY`

---

## âš›ï¸ Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```bash
# Create React Appã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
npx create-react-app scoring-system
cd scoring-system

# Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @supabase/supabase-js

# Tailwind CSS ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### 2. ç’°å¢ƒå¤‰æ•°è¨­å®š

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ä½œæˆ:

```env
REACT_APP_SUPABASE_URL=https://your-project.supabase.co
REACT_APP_SUPABASE_ANON_KEY=your-anon-key
```

### 3. Tailwind CSSè¨­å®šï¼ˆä½¿ç”¨ã™ã‚‹å ´åˆï¼‰

`tailwind.config.js`:

```javascript
module.exports = {
  content: [
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

`src/index.css`:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

### 4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé…ç½®

`src/components/ScoringDashboard.jsx` ã« `ScoringDashboard.jsx` ã®å†…å®¹ã‚’é…ç½®

### 5. App.js ç·¨é›†

```javascript
import React from 'react';
import ScoringDashboard from './components/ScoringDashboard';
import './index.css';

function App() {
  return (
    <div className="App">
      <ScoringDashboard />
    </div>
  );
}

export default App;
```

### 6. èµ·å‹•

```bash
npm start
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ã

---

## ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
scoring-system/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ScoringDashboard.jsx
â”‚   â”œâ”€â”€ App.js
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ .env
â”œâ”€â”€ package.json
â””â”€â”€ tailwind.config.js
```

---

## ğŸ”§ Supabase Edge Functionsï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ã‚¹ã‚³ã‚¢è¨ˆç®—ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹å ´åˆ:

### 1. Supabase CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install -g supabase
```

### 2. Edge Functionä½œæˆ

```bash
supabase functions new calculate-score
```

### 3. `supabase/functions/calculate-score/index.ts`:

```typescript
import { serve } from 'https://deno.land/std@0.168.0/http/server.ts'
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

serve(async (req) => {
  try {
    const { productId } = await req.json()
    
    const supabase = createClient(
      Deno.env.get('SUPABASE_URL') ?? '',
      Deno.env.get('SUPABASE_SERVICE_ROLE_KEY') ?? ''
    )
    
    // ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
    // ï¼ˆPHPã®ScoreCalculator.phpã‚’TypeScriptã«ç§»æ¤ï¼‰
    
    const totalScore = 8500.00 // è¨ˆç®—çµæœ
    
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°
    const { error } = await supabase
      .from('product_scores')
      .upsert({
        product_id: productId,
        total_score: totalScore,
        last_calculated_at: new Date().toISOString()
      })
    
    if (error) throw error
    
    return new Response(
      JSON.stringify({ success: true, score: totalScore }),
      { headers: { 'Content-Type': 'application/json' } }
    )
  } catch (error) {
    return new Response(
      JSON.stringify({ success: false, error: error.message }),
      { status: 400, headers: { 'Content-Type': 'application/json' } }
    )
  }
})
```

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
supabase functions deploy calculate-score
```

---

## ğŸŒ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤

### Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Vercel CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g vercel

# ãƒ‡ãƒ—ãƒ­ã‚¤
vercel

# ç’°å¢ƒå¤‰æ•°è¨­å®š
vercel env add REACT_APP_SUPABASE_URL
vercel env add REACT_APP_SUPABASE_ANON_KEY
```

### Netlifyã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Netlify CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g netlify-cli

# ãƒ‡ãƒ—ãƒ­ã‚¤
netlify deploy --prod

# ç’°å¢ƒå¤‰æ•°ã¯Netlifyãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰è¨­å®š
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### Row Level Securityï¼ˆRLSï¼‰ãƒãƒªã‚·ãƒ¼

ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«RLSãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™:

- **èª­ã¿å–ã‚Š**: ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¨±å¯
- **æ›¸ãè¾¼ã¿**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿

### èªè¨¼ãŒå¿…è¦ãªå ´åˆ

```javascript
// Supabaseèªè¨¼
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'password'
})
```

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ

```sql
-- Supabase SQL Editorã§å®Ÿè¡Œ

INSERT INTO product_scores (
  product_id, total_score, 
  profit_amount_score, profit_rate_score,
  market_size_score, competition_count_score
) VALUES
(1, 8500.00, 850.00, 650.00, 500.00, 450.00),
(2, 7800.50, 780.00, 600.00, 480.00, 420.00),
(3, 9200.75, 920.00, 720.00, 580.00, 480.00);
```

---

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### CORS ã‚¨ãƒ©ãƒ¼

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ Settings â†’ API ã§è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã‚’è¿½åŠ 

### æ¥ç¶šã‚¨ãƒ©ãƒ¼

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã®ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ã„ã‹ç¢ºèª:

```bash
echo $REACT_APP_SUPABASE_URL
echo $REACT_APP_SUPABASE_ANON_KEY
```

### RLSãƒãƒªã‚·ãƒ¼ã‚¨ãƒ©ãƒ¼

Supabase SQL Editorã§ç¢ºèª:

```sql
SELECT * FROM pg_policies WHERE tablename = 'product_scores';
```

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Supabaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://supabase.com/docs)
- [Reactå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://react.dev/)
- [Tailwind CSS](https://tailwindcss.com/)

---

## ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ Database â†’ Backups

### å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# supabaseã®pg_dumpã‚’ä½¿ç”¨
supabase db dump -f backup.sql
```

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. âœ… ã‚¹ã‚­ãƒ¼ãƒå®Ÿè¡Œ
3. âœ… Reactã‚¢ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
4. â¬œ å¤–éƒ¨APIé€£æºï¼ˆeBay, Amazonï¼‰
5. â¬œ AIåˆ†ææ©Ÿèƒ½çµ±åˆ
6. â¬œ è‡ªå‹•ã‚¹ã‚³ã‚¢æ›´æ–°æ©Ÿèƒ½

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ä»¥ä¸‹ã‚’ç¢ºèª:

1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç¨¼åƒä¸­ã‹
2. ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
3. RLSãƒãƒªã‚·ãƒ¼ãŒæ­£ã—ã„ã‹
4. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒæ­£å¸¸ã‹