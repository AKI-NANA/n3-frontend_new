<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダッシュボード - NAGANO-3 多販路一括管理</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            /* ダッシュボードテーマカラー */
            --dashboard-primary: #0f172a;
            --dashboard-secondary: #1e293b;
            --dashboard-accent: #06b6d4;
            --dashboard-success: #059669;
            --dashboard-warning: #d97706;
            --dashboard-danger: #dc2626;
            --dashboard-info: #0284c7;
            
            /* チャートカラー */
            --chart-primary: #3b82f6;
            --chart-secondary: #8b5cf6;
            --chart-success: #10b981;
            --chart-warning: #f59e0b;
            --chart-danger: #ef4444;
            --chart-info: #06b6d4;
            
            /* 共通カラー */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-dark: #0f172a;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --text-white: #ffffff;
            --border-color: #e5e7eb;
            
            /* スペーシング */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            
            /* 角丸・シャドウ */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-xl: 12px;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* メインコンテナ */
        .dashboard-container {
            padding: 5px;
            min-height: 100vh;
        }

        /* 4列レイアウト */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 280px 300px 1fr 300px;
            gap: 6px;
            align-items: start;
            min-height: calc(100vh - 10px);
        }

        /* ===== 1列目: KPI・統計パネル ===== */
        .kpi-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: calc(100vh - 10px);
        }

        .kpi-header {
            padding: var(--space-4);
            background: linear-gradient(135deg, var(--dashboard-primary), var(--dashboard-secondary));
            color: var(--text-white);
        }

        .kpi-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .period-selector {
            display: flex;
            gap: var(--space-1);
        }

        .period-btn {
            padding: var(--space-1) var(--space-2);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-white);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .period-btn.active {
            background: var(--dashboard-accent);
            border-color: var(--dashboard-accent);
        }

        .kpi-content {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .kpi-grid {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .kpi-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            border-left: 4px solid;
            transition: var(--transition);
        }

        .kpi-card:hover {
            transform: translateX(2px);
            box-shadow: var(--shadow-md);
        }

        .kpi-card.revenue { border-left-color: var(--chart-primary); }
        .kpi-card.profit { border-left-color: var(--chart-success); }
        .kpi-card.orders { border-left-color: var(--chart-warning); }
        .kpi-card.conversion { border-left-color: var(--chart-secondary); }

        .kpi-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .kpi-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-1);
        }

        .kpi-change {
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .kpi-change.positive {
            color: var(--chart-success);
        }

        .kpi-change.negative {
            color: var(--chart-danger);
        }

        .mini-chart {
            height: 40px;
            margin-top: var(--space-2);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
            border-radius: var(--radius-sm);
            position: relative;
            overflow: hidden;
        }

        /* ===== 2列目: チャート・分析パネル ===== */
        .chart-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            height: calc(100vh - 10px);
            overflow: hidden;
        }

        .chart-header {
            padding: var(--space-3);
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chart-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-controls {
            display: flex;
            gap: var(--space-1);
        }

        .chart-control-btn {
            padding: var(--space-1) var(--space-2);
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .chart-control-btn.active {
            background: var(--dashboard-accent);
            color: var(--text-white);
        }

        .chart-content {
            padding: var(--space-3);
            height: calc(100% - 60px);
            overflow-y: auto;
        }

        .chart-container {
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            padding: var(--space-3);
            margin-bottom: var(--space-3);
            height: 200px;
            position: relative;
        }

        .donut-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }

        .donut-stat {
            text-align: center;
            padding: var(--space-2);
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
        }

        .donut-stat-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .donut-stat-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* ===== 3列目: メイン分析エリア ===== */
        .main-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: calc(100vh - 10px);
        }

        .main-header {
            padding: var(--space-4);
            background: linear-gradient(135deg, var(--dashboard-primary), var(--dashboard-secondary));
            color: var(--text-white);
        }

        .main-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .main-subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .main-content {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .analysis-sections {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            height: 100%;
        }

        .analysis-section {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            border: 1px solid var(--border-color);
            flex: 1;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
        }

        .section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .section-action {
            font-size: 0.8rem;
            color: var(--dashboard-accent);
            cursor: pointer;
            text-decoration: none;
        }

        .trend-chart {
            height: 250px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            padding: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .performance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3);
        }

        .performance-card {
            background: var(--bg-primary);
            padding: var(--space-3);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
        }

        .performance-metric {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .performance-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }

        .performance-bar {
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--chart-primary), var(--chart-secondary));
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* ===== 4列目: アラート・アクションパネル ===== */
        .alert-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: calc(100vh - 10px);
        }

        .alert-header {
            padding: var(--space-4);
            background: linear-gradient(135deg, var(--dashboard-primary), var(--dashboard-secondary));
            color: var(--text-white);
        }

        .alert-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .alert-content {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .alert-list {
            margin-bottom: var(--space-4);
        }

        .alert-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            padding: var(--space-3);
            margin-bottom: var(--space-2);
            border-left: 4px solid;
            transition: var(--transition);
        }

        .alert-item:hover {
            transform: translateX(2px);
            box-shadow: var(--shadow-md);
        }

        .alert-item.critical { border-left-color: var(--dashboard-danger); }
        .alert-item.warning { border-left-color: var(--dashboard-warning); }
        .alert-item.info { border-left-color: var(--dashboard-info); }

        .alert-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-1);
        }

        .alert-type {
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .alert-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .alert-message {
            font-size: 0.85rem;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .top-products {
            margin-bottom: var(--space-4);
        }

        .products-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
            color: var(--text-primary);
        }

        .product-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2);
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            margin-bottom: var(--space-2);
        }

        .product-rank {
            width: 24px;
            height: 24px;
            background: var(--dashboard-accent);
            color: var(--text-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .product-info {
            flex: 1;
        }

        .product-name {
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .product-sales {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .quick-actions {
            border-top: 1px solid var(--border-color);
            padding-top: var(--space-4);
        }

        .actions-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
            color: var(--text-primary);
        }

        .action-btn {
            width: 100%;
            padding: var(--space-2);
            margin-bottom: var(--space-2);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            text-align: left;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .action-btn:hover {
            background: var(--dashboard-accent);
            color: var(--text-white);
            transform: translateX(2px);
        }

        /* チャート共通スタイル */
        .chart-wrapper {
            position: relative;
            height: 100%;
            width: 100%;
        }

        /* レスポンシブ */
        @media (max-width: 1400px) {
            .dashboard-layout {
                grid-template-columns: 260px 280px 1fr 280px;
            }
        }

        @media (max-width: 1200px) {
            .dashboard-layout {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto;
            }
        }

        @media (max-width: 768px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
                gap: var(--space-3);
            }
            
            .kpi-panel, .chart-panel, .alert-panel {
                height: auto;
            }
            
            .analysis-sections {
                height: auto;
            }
        }

        /* アニメーション */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .kpi-card, .alert-item, .product-item {
            animation: slideInUp 0.3s ease-out;
        }

        .kpi-card:nth-child(1) { animation-delay: 0.1s; }
        .kpi-card:nth-child(2) { animation-delay: 0.2s; }
        .kpi-card:nth-child(3) { animation-delay: 0.3s; }
        .kpi-card:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-layout" id="dashboardLayout">
            <!-- 1列目: KPI・統計パネル -->
            <div class="kpi-panel">
                <div class="kpi-header">
                    <div class="kpi-title">
                        <i class="fas fa-chart-line"></i>
                        業績指標 (KPI)
                    </div>
                    <div class="period-selector">
                        <button class="period-btn" onclick="changePeriod('today')">今日</button>
                        <button class="period-btn active" onclick="changePeriod('week')">今週</button>
                        <button class="period-btn" onclick="changePeriod('month')">今月</button>
                    </div>
                </div>
                
                <div class="kpi-content">
                    <div class="kpi-grid">
                        <div class="kpi-card revenue">
                            <div class="kpi-value" id="revenueValue">¥2,458,670</div>
                            <div class="kpi-label">今週の売上</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+12.5% (前週比)</span>
                            </div>
                            <div class="mini-chart" id="revenueChart"></div>
                        </div>
                        
                        <div class="kpi-card profit">
                            <div class="kpi-value" id="profitValue">¥547,892</div>
                            <div class="kpi-label">今週の利益</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+8.3% (前週比)</span>
                            </div>
                            <div class="mini-chart" id="profitChart"></div>
                        </div>
                        
                        <div class="kpi-card orders">
                            <div class="kpi-value" id="ordersValue">187</div>
                            <div class="kpi-label">今週の注文数</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+15.2% (前週比)</span>
                            </div>
                            <div class="mini-chart" id="ordersChart"></div>
                        </div>
                        
                        <div class="kpi-card conversion">
                            <div class="kpi-value" id="conversionValue">22.3%</div>
                            <div class="kpi-label">利益率</div>
                            <div class="kpi-change negative">
                                <i class="fas fa-arrow-down"></i>
                                <span>-1.2% (前週比)</span>
                            </div>
                            <div class="mini-chart" id="conversionChart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2列目: チャート・分析パネル -->
            <div class="chart-panel">
                <div class="chart-header">
                    <div class="chart-title">売上分析</div>
                    <div class="chart-controls">
                        <button class="chart-control-btn active" onclick="changeChartType('sales')">売上</button>
                        <button class="chart-control-btn" onclick="changeChartType('orders')">注文</button>
                        <button class="chart-control-btn" onclick="changeChartType('profit')">利益</button>
                    </div>
                </div>
                
                <div class="chart-content">
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="channelChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="donut-stats">
                        <div class="donut-stat">
                            <div class="donut-stat-value">34.2%</div>
                            <div class="donut-stat-label">eBay</div>
                        </div>
                        <div class="donut-stat">
                            <div class="donut-stat-value">28.7%</div>
                            <div class="donut-stat-label">Amazon</div>
                        </div>
                        <div class="donut-stat">
                            <div class="donut-stat-value">21.5%</div>
                            <div class="donut-stat-label">Shopee</div>
                        </div>
                        <div class="donut-stat">
                            <div class="donut-stat-value">15.6%</div>
                            <div class="donut-stat-label">Shopify</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3列目: メイン分析エリア -->
            <div class="main-panel">
                <div class="main-header">
                    <div class="main-title">
                        <i class="fas fa-analytics"></i>
                        総合分析ダッシュボード
                    </div>
                    <div class="main-subtitle">
                        多販路統合データ・リアルタイム更新
                    </div>
                </div>
                
                <div class="main-content">
                    <div class="analysis-sections">
                        <!-- 売上トレンド分析 -->
                        <div class="analysis-section">
                            <div class="section-header">
                                <div class="section-title">
                                    <i class="fas fa-trending-up"></i>
                                    売上トレンド分析
                                </div>
                                <a href="#" class="section-action">詳細レポート</a>
                            </div>
                            
                            <div class="trend-chart">
                                <canvas id="trendChart"></canvas>
                            </div>
                            
                            <div class="performance-grid">
                                <div class="performance-card">
                                    <div class="performance-metric">¥485,670</div>
                                    <div class="performance-label">今日の売上</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 78%;"></div>
                                    </div>
                                </div>
                                <div class="performance-card">
                                    <div class="performance-metric">32件</div>
                                    <div class="performance-label">今日の注文</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 65%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- パフォーマンス分析 -->
                        <div class="analysis-section">
                            <div class="section-header">
                                <div class="section-title">
                                    <i class="fas fa-chart-bar"></i>
                                    パフォーマンス分析
                                </div>
                                <a href="#" class="section-action">最適化提案</a>
                            </div>
                            
                            <div class="performance-grid">
                                <div class="performance-card">
                                    <div class="performance-metric">94.2%</div>
                                    <div class="performance-label">出荷完了率</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 94%;"></div>
                                    </div>
                                </div>
                                <div class="performance-card">
                                    <div class="performance-metric">2.3日</div>
                                    <div class="performance-label">平均処理時間</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 82%;"></div>
                                    </div>
                                </div>
                                <div class="performance-card">
                                    <div class="performance-metric">97.8%</div>
                                    <div class="performance-label">顧客満足度</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 98%;"></div>
                                    </div>
                                </div>
                                <div class="performance-card">
                                    <div class="performance-metric">¥15,247</div>
                                    <div class="performance-label">平均注文単価</div>
                                    <div class="performance-bar">
                                        <div class="performance-fill" style="width: 72%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4列目: アラート・アクションパネル -->
            <div class="alert-panel">
                <div class="alert-header">
                    <div class="alert-title">
                        <i class="fas fa-bell"></i>
                        アラート・通知
                    </div>
                </div>
                
                <div class="alert-content">
                    <div class="alert-list">
                        <div class="alert-item critical">
                            <div class="alert-header-row">
                                <div class="alert-type" style="color: var(--dashboard-danger);">重要</div>
                                <div class="alert-time">5分前</div>
                            </div>
                            <div class="alert-message">
                                在庫切れ商品が15件あります。至急仕入れ確認が必要です。
                            </div>
                        </div>
                        
                        <div class="alert-item warning">
                            <div class="alert-header-row">
                                <div class="alert-type" style="color: var(--dashboard-warning);">警告</div>
                                <div class="alert-time">12分前</div>
                            </div>
                            <div class="alert-message">
                                出荷期限が24時間以内の注文が8件あります。
                            </div>
                        </div>
                        
                        <div class="alert-item info">
                            <div class="alert-header-row">
                                <div class="alert-type" style="color: var(--dashboard-info);">情報</div>
                                <div class="alert-time">30分前</div>
                            </div>
                            <div class="alert-message">
                                Ship&co APIとの連携が正常に完了しました。
                            </div>
                        </div>
                        
                        <div class="alert-item warning">
                            <div class="alert-header-row">
                                <div class="alert-type" style="color: var(--dashboard-warning);">警告</div>
                                <div class="alert-time">1時間前</div>
                            </div>
                            <div class="alert-message">
                                問い合わせ対応が遅れている案件が3件あります。
                            </div>
                        </div>
                    </div>
                    
                    <div class="top-products">
                        <div class="products-title">今週の売れ筋商品</div>
                        
                        <div class="product-item">
                            <div class="product-rank">1</div>
                            <div class="product-info">
                                <div class="product-name">Nintendo Switch Pro Controller</div>
                                <div class="product-sales">23件販売・¥195,500売上</div>
                            </div>
                        </div>
                        
                        <div class="product-item">
                            <div class="product-rank">2</div>
                            <div class="product-info">
                                <div class="product-name">Sony WH-1000XM4 Headphones</div>
                                <div class="product-sales">18件販売・¥630,000売上</div>
                            </div>
                        </div>
                        
                        <div class="product-item">
                            <div class="product-rank">3</div>
                            <div class="product-info">
                                <div class="product-name">Apple AirPods Pro</div>
                                <div class="product-sales">15件販売・¥412,500売上</div>
                            </div>
                        </div>
                        
                        <div class="product-item">
                            <div class="product-rank">4</div>
                            <div class="product-info">
                                <div class="product-name">Canon EOS R6 Mark II</div>
                                <div class="product-sales">7件販売・¥2,100,000売上</div>
                            </div>
                        </div>
                        
                        <div class="product-item">
                            <div class="product-rank">5</div>
                            <div class="product-info">
                                <div class="product-name">MacBook Air M2</div>
                                <div class="product-sales">5件販売・¥750,000売上</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="actions-title">クイックアクション</div>
                        
                        <button class="action-btn" onclick="goToOrders()">
                            <i class="fas fa-list"></i>
                            受注管理を開く
                        </button>
                        
                        <button class="action-btn" onclick="goToShipping()">
                            <i class="fas fa-truck"></i>
                            出荷管理を開く
                        </button>
                        
                        <button class="action-btn" onclick="goToInquiries()">
                            <i class="fas fa-comments"></i>
                            問い合わせ対応
                        </button>
                        
                        <button class="action-btn" onclick="exportReport()">
                            <i class="fas fa-download"></i>
                            レポート出力
                        </button>
                        
                        <button class="action-btn" onclick="updateInventory()">
                            <i class="fas fa-boxes"></i>
                            在庫更新実行
                        </button>
                        
                        <button class="action-btn" onclick="runAnalysis()">
                            <i class="fas fa-chart-pie"></i>
                            AI分析実行
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Chart.js設定
        Chart.defaults.font.family = "'Helvetica Neue', Arial, sans-serif";
        Chart.defaults.font.size = 12;
        Chart.defaults.color = '#6b7280';

        let mainChart, channelChart, trendChart;
        let currentPeriod = 'week';
        let currentChartType = 'sales';

        // サンプルデータ
        const sampleData = {
            sales: {
                daily: [45000, 52000, 48000, 61000, 55000, 67000, 59000],
                weekly: [285000, 320000, 295000, 380000, 355000, 412000, 389000],
                monthly: [1250000, 1380000, 1290000, 1580000, 1470000, 1680000]
            },
            orders: {
                daily: [25, 32, 28, 35, 31, 42, 37],
                weekly: [165, 187, 172, 203, 189, 224, 211],
                monthly: [720, 810, 765, 890, 834, 945]
            },
            profit: {
                daily: [9500, 11200, 10300, 13800, 12100, 15200, 13900],
                weekly: [62000, 71500, 66800, 84200, 78900, 92300, 87600],
                monthly: [275000, 315000, 285000, 365000, 340000, 385000]
            }
        };

        // メインチャート初期化
        function initMainChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            mainChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['月', '火', '水', '木', '金', '土', '日'],
                    datasets: [{
                        label: '売上',
                        data: sampleData.sales.daily,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f1f5f9'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '¥' + (value / 1000) + 'K';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // チャネル別チャート初期化
        function initChannelChart() {
            const ctx = document.getElementById('channelChart').getContext('2d');
            channelChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['eBay', 'Amazon', 'Shopee', 'Shopify'],
                    datasets: [{
                        data: [34.2, 28.7, 21.5, 15.6],
                        backgroundColor: [
                            '#3b82f6',
                            '#f59e0b',
                            '#10b981',
                            '#8b5cf6'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // トレンドチャート初期化
        function initTrendChart() {
            const ctx = document.getElementById('trendChart').getContext('2d');
            trendChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7'],
                    datasets: [{
                        label: '売上',
                        data: sampleData.sales.weekly,
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderColor: '#3b82f6',
                        borderWidth: 1
                    }, {
                        label: '利益',
                        data: sampleData.profit.weekly,
                        backgroundColor: 'rgba(16, 185, 129, 0.8)',
                        borderColor: '#10b981',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 20
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f1f5f9'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '¥' + (value / 1000) + 'K';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // 期間変更
        function changePeriod(period) {
            currentPeriod = period;
            
            // ボタンの状態更新
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // KPI値更新
            updateKPIValues();
            
            // チャート更新
            updateMainChart();
            
            console.log('期間変更:', period);
        }

        // チャートタイプ変更
        function changeChartType(type) {
            currentChartType = type;
            
            // ボタンの状態更新
            document.querySelectorAll('.chart-control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // チャート更新
            updateMainChart();
            
            console.log('チャートタイプ変更:', type);
        }

        // KPI値更新
        function updateKPIValues() {
            const kpis = {
                today: {
                    revenue: '¥485,670',
                    profit: '¥108,426',
                    orders: '32',
                    conversion: '22.3%'
                },
                week: {
                    revenue: '¥2,458,670',
                    profit: '¥547,892',
                    orders: '187',
                    conversion: '22.3%'
                },
                month: {
                    revenue: '¥10,245,890',
                    profit: '¥2,284,736',
                    orders: '768',
                    conversion: '22.3%'
                }
            };

            const data = kpis[currentPeriod];
            document.getElementById('revenueValue').textContent = data.revenue;
            document.getElementById('profitValue').textContent = data.profit;
            document.getElementById('ordersValue').textContent = data.orders;
            document.getElementById('conversionValue').textContent = data.conversion;
        }

        // メインチャート更新
        function updateMainChart() {
            const periodKey = currentPeriod === 'today' ? 'daily' : 
                             currentPeriod === 'week' ? 'daily' : 'weekly';
            
            const data = sampleData[currentChartType][periodKey];
            const labels = currentPeriod === 'month' ? 
                          ['W1', 'W2', 'W3', 'W4', 'W5', 'W6'] : 
                          ['月', '火', '水', '木', '金', '土', '日'];

            mainChart.data.labels = labels;
            mainChart.data.datasets[0].data = data;
            mainChart.data.datasets[0].label = 
                currentChartType === 'sales' ? '売上' :
                currentChartType === 'orders' ? '注文数' : '利益';
            
            mainChart.update();
        }

        // クイックアクション関数
        function goToOrders() {
            window.open('/modules/juchu_kanri/php/juchu_kanri_controller.php', '_blank');
        }

        function goToShipping() {
            window.open('/modules/shukka_kanri/php/shukka_kanri_controller.php', '_blank');
        }

        function goToInquiries() {
            window.open('/modules/toiawase_kanri/php/toiawase_controller.php', '_blank');
        }

        function exportReport() {
            console.log('レポート出力開始');
            // 実際のエクスポート処理
        }

        function updateInventory() {
            console.log('在庫更新実行');
            // 在庫更新処理
        }

        function runAnalysis() {
            console.log('AI分析実行');
            // AI分析実行
        }

        // リアルタイム更新
        function startRealTimeUpdates() {
            setInterval(() => {
                // KPI値のリアルタイム更新
                updateKPIValues();
                
                // アラートの確認
                checkAlerts();
                
                console.log('データ更新完了');
            }, 30000); // 30秒間隔
        }

        // アラート確認
        function checkAlerts() {
            // 実際のアラート確認ロジック
            console.log('アラート確認中...');
        }

        // 初期化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ダッシュボード初期化開始');
            
            // チャート初期化
            setTimeout(() => {
                initMainChart();
                initChannelChart();
                initTrendChart();
            }, 100);
            
            // リアルタイム更新開始
            startRealTimeUpdates();
            
            // 初期KPI値設定
            updateKPIValues();
            
            console.log('ダッシュボード初期化完了');
        });

        // ウィンドウリサイズ対応
        window.addEventListener('resize', function() {
            if (mainChart) mainChart.resize();
            if (channelChart) channelChart.resize();
            if (trendChart) trendChart.resize();
        });
    </script>
</body>
</html>
                                        