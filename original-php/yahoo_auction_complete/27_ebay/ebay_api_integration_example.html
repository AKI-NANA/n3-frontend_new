<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBay APIçµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background: #f7f7f7;
            color: #191919;
            line-height: 1.4;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .api-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00a650;
        }
        
        .status-indicator.error { background: #e53e3e; }
        .status-indicator.warning { background: #f5af02; }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #0064d2;
        }
        
        .refresh-btn {
            background: #0064d2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .refresh-btn:hover {
            background: #0053ba;
        }
        
        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .data-row:last-child {
            border-bottom: none;
        }
        
        .data-label {
            color: #707070;
            font-size: 14px;
        }
        
        .data-value {
            font-weight: 600;
            font-size: 16px;
            color: #191919;
        }
        
        .data-value.urgent {
            color: #e53e3e;
        }
        
        .action-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .action-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        
        .action-info {
            flex: 1;
        }
        
        .action-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .action-desc {
            font-size: 12px;
            color: #707070;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: #0064d2;
            color: white;
        }
        
        .btn-secondary {
            background: white;
            color: #0064d2;
            border: 1px solid #0064d2;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .automation-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .automation-title {
            font-size: 20px;
            font-weight: 600;
            color: #0064d2;
            margin-bottom: 15px;
        }
        
        .automation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .automation-card {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .auto-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .auto-desc {
            font-size: 13px;
            color: #707070;
            margin-bottom: 10px;
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background: #ccc;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .toggle-switch.active {
            background: #00a650;
        }
        
        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }
        
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #0064d2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .log-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-item {
            font-size: 12px;
            padding: 5px 0;
            border-bottom: 1px solid #e9ecef;
            color: #6c757d;
        }
        
        .log-item:last-child {
            border-bottom: none;
        }
        
        .log-time {
            color: #0064d2;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- APIã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <h1>eBay APIçµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <div class="api-status">
                <div class="status-indicator" id="apiStatus"></div>
                <span id="apiStatusText">APIæ¥ç¶šä¸­...</span>
                <span id="lastUpdate"></span>
            </div>
        </div>

        <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º -->
        <div class="grid">
            <!-- å£²ä¸Šãƒ‡ãƒ¼ã‚¿ -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">å£²ä¸Šãƒ‡ãƒ¼ã‚¿</h3>
                    <button class="refresh-btn" onclick="refreshSalesData()">
                        <span id="salesLoader"></span>æ›´æ–°
                    </button>
                </div>
                <div class="data-row">
                    <span class="data-label">ä»Šæ—¥ã®å£²ä¸Š</span>
                    <span class="data-value" id="todaySales">$--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ä»Šæœˆã®å£²ä¸Š</span>
                    <span class="data-value" id="monthSales">$--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–å‡ºå“æ•°</span>
                    <span class="data-value" id="activeListings">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼æ•°</span>
                    <span class="data-value" id="watchers">--</span>
                </div>
            </div>

            <!-- æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">æ³¨æ–‡çŠ¶æ³</h3>
                    <button class="refresh-btn" onclick="refreshOrderData()">
                        <span id="orderLoader"></span>æ›´æ–°
                    </button>
                </div>
                <div class="data-row">
                    <span class="data-label">æ”¯æ‰•ã„å¾…ã¡</span>
                    <span class="data-value" id="awaitingPayment">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ç™ºé€å¾…ã¡</span>
                    <span class="data-value urgent" id="awaitingShipment">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</span>
                    <span class="data-value urgent" id="unreadMessages">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">å¯¾å¿œå¿…è¦ã‚±ãƒ¼ã‚¹</span>
                    <span class="data-value urgent" id="openCases">--</span>
                </div>
            </div>

            <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h3>
                    <button class="refresh-btn" onclick="refreshPerformanceData()">
                        <span id="perfLoader"></span>æ›´æ–°
                    </button>
                </div>
                <div class="data-row">
                    <span class="data-label">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç‡</span>
                    <span class="data-value" id="feedbackScore">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">æ¬ é™¥ç‡</span>
                    <span class="data-value" id="defectRate">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">é…å»¶é…é€ç‡</span>
                    <span class="data-value" id="lateShipmentRate">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ã‚»ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«</span>
                    <span class="data-value" id="sellerLevel">--</span>
                </div>
            </div>
        </div>

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¯èƒ½ãªé …ç›® -->
        <div class="action-section">
            <h2 style="margin-bottom: 20px; color: #0064d2;">APIæ“ä½œ + eBayãƒšãƒ¼ã‚¸é€£æº</h2>
            
            <div class="action-item">
                <div class="action-info">
                    <div class="action-title">ä¾¡æ ¼ä¸€æ‹¬æ›´æ–°</div>
                    <div class="action-desc">ç«¶åˆã‚ˆã‚Šé«˜ã„å•†å“ã®ä¾¡æ ¼ã‚’è‡ªå‹•èª¿æ•´ï¼ˆAPIæ“ä½œï¼‰</div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="updatePricesAPI()">
                        ğŸ”„ APIå®Ÿè¡Œ
                    </button>
                    <a href="https://www.ebay.com/mys/listing" target="_blank" class="btn btn-secondary">
                        ğŸ“ eBayã§ç·¨é›†
                    </a>
                </div>
            </div>

            <div class="action-item">
                <div class="action-info">
                    <div class="action-title">åœ¨åº«æ•°æ›´æ–°</div>
                    <div class="action-desc">åœ¨åº«åˆ‡ã‚Œå•†å“ã®è‡ªå‹•åœæ­¢ãƒ»å¾©æ´»ï¼ˆAPIæ“ä½œï¼‰</div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="updateInventoryAPI()">
                        ğŸ“¦ APIå®Ÿè¡Œ
                    </button>
                    <a href="https://www.ebay.com/mys/listing" target="_blank" class="btn btn-secondary">
                        ğŸ“Š eBayã§ç¢ºèª
                    </a>
                </div>
            </div>

            <div class="action-item">
                <div class="action-info">
                    <div class="action-title">è¿½è·¡ç•ªå·ä¸€æ‹¬ç™»éŒ²</div>
                    <div class="action-desc">CSVã‹ã‚‰è¿½è·¡ç•ªå·ã‚’ä¸€æ‹¬ç™»éŒ²ï¼ˆAPIæ“ä½œï¼‰</div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="uploadTrackingAPI()">
                        ğŸšš APIå®Ÿè¡Œ
                    </button>
                    <a href="https://www.ebay.com/mys/sold" target="_blank" class="btn btn-secondary">
                        ğŸ“‹ eBayã§ç¢ºèª
                    </a>
                </div>
            </div>

            <div class="action-item">
                <div class="action-info">
                    <div class="action-title">ãƒ©ãƒ™ãƒ«å°åˆ·</div>
                    <div class="action-desc">ç™ºé€ãƒ©ãƒ™ãƒ«ã®å°åˆ·ï¼ˆeBayã‚µã‚¤ãƒˆæ“ä½œå¿…é ˆï¼‰</div>
                </div>
                <div class="action-buttons">
                    <span style="color: #707070; font-size: 12px;">APIã§ã¯ä¸å¯</span>
                    <a href="https://www.ebay.com/mys/sold?filter=awaiting_shipment" target="_blank" class="btn btn-primary">
                        ğŸ–¨ï¸ eBayã§å°åˆ·
                    </a>
                </div>
            </div>

            <div class="action-item">
                <div class="action-info">
                    <div class="action-title">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿”ä¿¡</div>
                    <div class="action-desc">è²·ã„æ‰‹ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¯¾å¿œï¼ˆeBayã‚µã‚¤ãƒˆæ“ä½œæ¨å¥¨ï¼‰</div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="viewMessagesAPI()">
                        ğŸ‘ï¸ APIç¢ºèª
                    </button>
                    <a href="https://www.ebay.com/mys/messages" target="_blank" class="btn btn-primary">
                        ğŸ’¬ eBayã§è¿”ä¿¡
                    </a>
                </div>
            </div>
        </div>

        <!-- è‡ªå‹•åŒ–è¨­å®š -->
        <div class="automation-section">
            <h2 class="automation-title">ğŸ¤– è‡ªå‹•åŒ–è¨­å®š</h2>
            <div class="automation-grid">
                <div class="automation-card">
                    <div class="auto-title">
                        <span>ä¾¡æ ¼è‡ªå‹•èª¿æ•´</span>
                        <div class="toggle-switch" onclick="toggleAutomation('priceAdjust')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="auto-desc">ç«¶åˆä¾¡æ ¼ã«åŸºã¥ãè‡ªå‹•ä¾¡æ ¼èª¿æ•´ï¼ˆ1æ—¥1å›ï¼‰</div>
                </div>

                <div class="automation-card">
                    <div class="auto-title">
                        <span>åœ¨åº«ç›£è¦–</span>
                        <div class="toggle-switch active" onclick="toggleAutomation('inventoryMonitor')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="auto-desc">åœ¨åº«åˆ‡ã‚Œã®è‡ªå‹•æ¤œçŸ¥ãƒ»é€šçŸ¥ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰</div>
                </div>

                <div class="automation-card">
                    <div class="auto-title">
                        <span>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šçŸ¥</span>
                        <div class="toggle-switch active" onclick="toggleAutomation('messageAlert')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="auto-desc">æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®Slack/ãƒ¡ãƒ¼ãƒ«é€šçŸ¥</div>
                </div>

                <div class="automation-card">
                    <div class="auto-title">
                        <span>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–</span>
                        <div class="toggle-switch active" onclick="toggleAutomation('perfMonitor')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="auto-desc">ã‚»ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«ä½ä¸‹ã®æ—©æœŸè­¦å‘Š</div>
                </div>
            </div>
        </div>

        <!-- ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="log-section">
            <h3 style="margin-bottom: 10px;">å®Ÿè¡Œãƒ­ã‚°</h3>
            <div id="logContainer">
                <div class="log-item">
                    <span class="log-time">2024-12-19 14:30:15</span> - 
                    ä¾¡æ ¼è‡ªå‹•èª¿æ•´: 15å•†å“ã®ä¾¡æ ¼ã‚’æ›´æ–°ã—ã¾ã—ãŸ
                </div>
                <div class="log-item">
                    <span class="log-time">2024-12-19 14:25:08</span> - 
                    åœ¨åº«ç›£è¦–: 3å•†å“ã®åœ¨åº«åˆ‡ã‚Œã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ
                </div>
                <div class="log-item">
                    <span class="log-time">2024-12-19 14:20:03</span> - 
                    æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: 2ä»¶ã®æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šçŸ¥ã—ã¾ã—ãŸ
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let automationSettings = {
            priceAdjust: false,
            inventoryMonitor: true,
            messageAlert: true,
            perfMonitor: true
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateAPIStatus('connecting');
            setTimeout(() => {
                updateAPIStatus('connected');
                loadAllData();
            }, 2000);
        });

        // APIã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
        function updateAPIStatus(status) {
            const indicator = document.getElementById('apiStatus');
            const text = document.getElementById('apiStatusText');
            const lastUpdate = document.getElementById('lastUpdate');

            switch(status) {
                case 'connecting':
                    indicator.className = 'status-indicator warning';
                    text.textContent = 'APIæ¥ç¶šä¸­...';
                    break;
                case 'connected':
                    indicator.className = 'status-indicator';
                    text.textContent = 'APIæ¥ç¶šæ¸ˆã¿';
                    lastUpdate.textContent = `æœ€çµ‚æ›´æ–°: ${new Date().toLocaleTimeString('ja-JP')}`;
                    break;
                case 'error':
                    indicator.className = 'status-indicator error';
                    text.textContent = 'APIæ¥ç¶šã‚¨ãƒ©ãƒ¼';
                    break;
            }
        }

        // å…¨ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadAllData() {
            refreshSalesData();
            refreshOrderData();
            refreshPerformanceData();
        }

        // å£²ä¸Šãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆæ¨¡æ“¬APIï¼‰
        async function refreshSalesData() {
            showLoader('salesLoader');
            
            // æ¨¡æ“¬APIå‘¼ã³å‡ºã—
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            document.getElementById('todaySales').textContent = '$' + (Math.random() * 500 + 100).toFixed(2);
            document.getElementById('monthSales').textContent = '$' + (Math.random() * 5000 + 2000).toFixed(2);
            document.getElementById('activeListings').textContent = Math.floor(Math.random() * 50 + 200);
            document.getElementById('watchers').textContent = Math.floor(Math.random() * 100 + 300);
            
            hideLoader('salesLoader');
            addLog('å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
        }

        // æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆæ¨¡æ“¬APIï¼‰
        async function refreshOrderData() {
            showLoader('orderLoader');
            
            await new Promise(resolve => setTimeout(resolve, 1200));
            
            document.getElementById('awaitingPayment').textContent = Math.floor(Math.random() * 5);
            document.getElementById('awaitingShipment').textContent = Math.floor(Math.random() * 15 + 5);
            document.getElementById('unreadMessages').textContent = Math.floor(Math.random() * 10);
            document.getElementById('openCases').textContent = Math.floor(Math.random() * 3);
            
            hideLoader('orderLoader');
            addLog('æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
        }

        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆæ¨¡æ“¬APIï¼‰
        async function refreshPerformanceData() {
            showLoader('perfLoader');
            
            await new Promise(resolve => setTimeout(resolve, 1800));
            
            document.getElementById('feedbackScore').textContent = (Math.random() * 5 + 95).toFixed(1) + '%';
            document.getElementById('defectRate').textContent = (Math.random() * 0.5).toFixed(2) + '%';
            document.getElementById('lateShipmentRate').textContent = (Math.random() * 3).toFixed(1) + '%';
            document.getElementById('sellerLevel').textContent = 'Top Rated';
            
            hideLoader('perfLoader');
            addLog('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
        }

        // APIæ“ä½œç³»é–¢æ•°
        async function updatePricesAPI() {
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<div class="loading"></div> å®Ÿè¡Œä¸­...';
            
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            btn.disabled = false;
            btn.innerHTML = 'ğŸ”„ APIå®Ÿè¡Œ';
            addLog('ä¾¡æ ¼ä¸€æ‹¬æ›´æ–°: 12å•†å“ã®ä¾¡æ ¼ã‚’èª¿æ•´ã—ã¾ã—ãŸ');
            alert('ä¾¡æ ¼æ›´æ–°å®Œäº†: 12å•†å“ã®ä¾¡æ ¼ã‚’å¸‚å ´ä¾¡æ ¼ã«åˆã‚ã›ã¦èª¿æ•´ã—ã¾ã—ãŸ');
        }

        async function updateInventoryAPI() {
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<div class="loading"></div> å®Ÿè¡Œä¸­...';
            
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            btn.disabled = false;
            btn.innerHTML = 'ğŸ“¦ APIå®Ÿè¡Œ';
            addLog('åœ¨åº«æ›´æ–°: 8å•†å“ã®åœ¨åº«çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
            alert('åœ¨åº«æ›´æ–°å®Œäº†: åœ¨åº«åˆ‡ã‚Œå•†å“3ä»¶ã‚’åœæ­¢ã€å¾©æ´»å•†å“5ä»¶ã‚’å†é–‹ã—ã¾ã—ãŸ');
        }

        async function uploadTrackingAPI() {
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<div class="loading"></div> å®Ÿè¡Œä¸­...';
            
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            btn.disabled = false;
            btn.innerHTML = 'ğŸšš APIå®Ÿè¡Œ';
            addLog('è¿½è·¡ç•ªå·ç™»éŒ²: 25ä»¶ã®æ³¨æ–‡ã«è¿½è·¡ç•ªå·ã‚’ç™»éŒ²ã—ã¾ã—ãŸ');
            alert('è¿½è·¡ç•ªå·ç™»éŒ²å®Œäº†: 25ä»¶ã®æ³¨æ–‡ã«è¿½è·¡ç•ªå·ã‚’ä¸€æ‹¬ç™»éŒ²ã—ã¾ã—ãŸ');
        }

        async function viewMessagesAPI() {
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<div class="loading"></div> å–å¾—ä¸­...';
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            btn.disabled = false;
            btn.innerHTML = 'ğŸ‘ï¸ APIç¢ºèª';
            
            const messages = [
                'è²·ã„æ‰‹: å•†å“ã®è©³ç´°ã‚µã‚¤ã‚ºã‚’æ•™ãˆã¦ãã ã•ã„',
                'è²·ã„æ‰‹: é…é€æ—¥æ•°ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ',
                'è²·ã„æ‰‹: ã¾ã¨ã‚è²·ã„å‰²å¼•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
            ];
            
            alert('æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§:\n\n' + messages.join('\n\n'));
            addLog('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª: 3ä»¶ã®æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¾ã—ãŸ');
        }

        // è‡ªå‹•åŒ–è¨­å®šåˆ‡ã‚Šæ›¿ãˆ
        function toggleAutomation(type) {
            const toggle = event.currentTarget;
            const isActive = toggle.classList.contains('active');
            
            if (isActive) {
                toggle.classList.remove('active');
                automationSettings[type] = false;
            } else {
                toggle.classList.add('active');
                automationSettings[type] = true;
            }
            
            addLog(`è‡ªå‹•åŒ–è¨­å®š: ${type} ã‚’ ${automationSettings[type] ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'} ã«ã—ã¾ã—ãŸ`);
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function showLoader(loaderId) {
            document.getElementById(loaderId).innerHTML = '<div class="loading"></div>';
        }

        function hideLoader(loaderId) {
            document.getElementById(loaderId).innerHTML = '';
        }

        function addLog(message) {
            const logContainer = document.getElementById('logContainer');
            const logItem = document.createElement('div');
            logItem.className = 'log-item';
            logItem.innerHTML = `<span class="log-time">${new Date().toLocaleString('ja-JP')}</span> - ${message}`;
            
            logContainer.insertBefore(logItem, logContainer.firstChild);
            
            // æœ€å¤§10ä»¶ã¾ã§è¡¨ç¤º
            if (logContainer.children.length > 10) {
                logContainer.removeChild(logContainer.lastChild);
            }
        }

        // è‡ªå‹•æ›´æ–°ï¼ˆ30ç§’ã”ã¨ï¼‰
        setInterval(function() {
            if (automationSettings.inventoryMonitor || automationSettings.messageAlert) {
                refreshOrderData();
            }
        }, 30000);

        // è‡ªå‹•åŒ–å®Ÿè¡Œï¼ˆä¾¡æ ¼èª¿æ•´ã¯1æ™‚é–“ã”ã¨ï¼‰
        setInterval(function() {
            if (automationSettings.priceAdjust) {
                addLog('è‡ªå‹•ä¾¡æ ¼èª¿æ•´ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
            }
        }, 3600000);
    </script>
</body>
</html>