<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ - ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ«å¯¾å¿œ</title>
    <style>
        /* NAGANO-3 CSSå¤‰æ•°ï¼ˆcommon/css/core/common.cssæº–æ‹ ï¼‰ */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-hover: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-light: #f1f5f9;
            --color-primary: #3b82f6;
            --color-secondary: #6366f1;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-danger: #ef4444;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --transition-fast: all 0.15s ease;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* ğŸ¨ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å°‚ç”¨CSSï¼ˆBEMæº–æ‹ ï¼‰ */
        .upload-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-6);
            background: var(--bg-primary);
            min-height: 100vh;
        }

        .upload__header {
            text-align: center;
            margin-bottom: var(--space-8);
            padding-bottom: var(--space-6);
            border-bottom: 1px solid var(--border-color);
        }

        .upload__title {
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .upload__subtitle {
            font-size: var(--text-base);
            color: var(--text-secondary);
        }

        /* === ãƒ¢ãƒ¼ãƒ«é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ === */
        .upload__mall-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
        }

        .upload__mall-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .upload__mall-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
        }

        .upload__mall-card {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
            cursor: pointer;
            transition: var(--transition-fast);
            position: relative;
        }

        .upload__mall-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .upload__mall-card--active {
            border-color: var(--color-primary);
            background: rgba(59, 130, 246, 0.05);
        }

        .upload__mall-icon {
            font-size: 2rem;
            margin-bottom: var(--space-2);
        }

        .upload__mall-name {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .upload__mall-status {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* === é¸æŠæ¸ˆã¿ãƒ¢ãƒ¼ãƒ«è¡¨ç¤º === */
        .upload__selected-mall {
            background: var(--bg-secondary);
            border: 1px solid var(--color-primary);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            margin-bottom: var(--space-6);
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .upload__selected-icon {
            color: var(--color-primary);
        }

        .upload__selected-text {
            font-size: var(--text-sm);
            color: var(--text-primary);
        }

        /* === å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ  === */
        .upload__form-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
        }

        .upload__form-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }

        .upload__input-group {
            margin-bottom: var(--space-4);
        }

        .upload__label {
            display: block;
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .upload__input {
            width: 100%;
            padding: var(--space-3);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            color: var(--text-primary);
            background: var(--bg-primary);
            transition: var(--transition-fast);
        }

        .upload__input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .upload__textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        /* === æ¡ä»¶è¡¨ç¤ºè¦ç´  === */
        .upload__conditional {
            display: none;
            margin-top: var(--space-4);
            padding: var(--space-4);
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--color-primary);
        }

        .upload__conditional--active {
            display: block;
        }

        /* === ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ === */
        .upload__file-zone {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-8);
            text-align: center;
            cursor: pointer;
            transition: var(--transition-fast);
            background: var(--bg-primary);
            position: relative;
        }

        .upload__file-zone:hover,
        .upload__file-zone--dragover {
            border-color: var(--color-primary);
            background: rgba(59, 130, 246, 0.05);
        }

        .upload__file-icon {
            font-size: 3rem;
            color: var(--text-muted);
            margin-bottom: var(--space-4);
        }

        .upload__file-text {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .upload__file-subtext {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .upload__file-input {
            position: absolute;
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            z-index: -1;
        }

        /* === CSVã‚µãƒ³ãƒ—ãƒ« === */
        .upload__sample {
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            margin-top: var(--space-4);
        }

        .upload__sample-title {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .upload__sample-code {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            white-space: pre-line;
            overflow-x: auto;
        }

        /* === ãƒœã‚¿ãƒ³ === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-6);
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition-fast);
            user-select: none;
        }

        .btn--primary {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .btn--primary:hover {
            background: #2563eb;
            border-color: #2563eb;
        }

        .btn--secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        .btn--secondary:hover {
            background: var(--bg-hover);
        }

        .upload__actions {
            display: flex;
            gap: var(--space-3);
            justify-content: center;
            margin-top: var(--space-6);
        }

        /* === ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– === */
        @media (max-width: 768px) {
            .upload-container {
                padding: var(--space-4);
            }

            .upload__mall-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: var(--space-3);
            }

            .upload__actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
<script>
// CAIDS error_handling Hook

// CAIDS ã‚¨ãƒ©ãƒ¼å‡¦ç†Hook - å®Œå…¨å®Ÿè£…
window.CAIDS_ERROR_HANDLER = {
    isActive: true,
    errorCount: 0,
    errorHistory: [],
    
    initialize: function() {
        this.setupGlobalErrorHandler();
        this.setupUnhandledPromiseRejection();
        this.setupNetworkErrorHandler();
        console.log('âš ï¸ CAIDS ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨åˆæœŸåŒ–');
    },
    
    setupGlobalErrorHandler: function() {
        window.addEventListener('error', (event) => {
            this.handleError({
                type: 'JavaScript Error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error?.stack
            });
        });
    },
    
    setupUnhandledPromiseRejection: function() {
        window.addEventListener('unhandledrejection', (event) => {
            this.handleError({
                type: 'Unhandled Promise Rejection',
                message: event.reason?.message || String(event.reason),
                stack: event.reason?.stack
            });
        });
    },
    
    setupNetworkErrorHandler: function() {
        const originalFetch = window.fetch;
        window.fetch = async function(...args) {
            try {
                const response = await originalFetch.apply(this, args);
                if (!response.ok) {
                    window.CAIDS_ERROR_HANDLER.handleError({
                        type: 'Network Error',
                        message: `HTTP ${response.status}: ${response.statusText}`,
                        url: args[0]
                    });
                }
                return response;
            } catch (error) {
                window.CAIDS_ERROR_HANDLER.handleError({
                    type: 'Network Fetch Error',
                    message: error.message,
                    url: args[0]
                });
                throw error;
            }
        };
    },
    
    handleError: function(errorInfo) {
        this.errorCount++;
        this.errorHistory.push({...errorInfo, timestamp: new Date().toISOString()});
        
        console.error('ğŸš¨ CAIDS Error Handler:', errorInfo);
        this.showErrorNotification(errorInfo);
        this.reportError(errorInfo);
    },
    
    showErrorNotification: function(errorInfo) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = `
            position: fixed; top: 10px; right: 10px; z-index: 999999;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white; padding: 15px 20px; border-radius: 8px;
            max-width: 350px; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            border: 2px solid #ff6666; animation: caids-error-shake 0.5s ease-in-out;
        `;
        errorDiv.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 18px;">ğŸš¨</span>
                <div>
                    <strong>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong><br>
                    <small style="opacity: 0.9;">${errorInfo.type}: ${errorInfo.message}</small>
                </div>
            </div>
        `;
        
        // CSS Animation
        if (!document.getElementById('caids-error-styles')) {
            const style = document.createElement('style');
            style.id = 'caids-error-styles';
            style.textContent = `
                @keyframes caids-error-shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(errorDiv);
        setTimeout(() => errorDiv.remove(), 7000);
    },
    
    reportError: function(errorInfo) {
        // ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»é€ä¿¡ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
        const report = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            errorCount: this.errorCount,
            sessionId: this.getSessionId(),
            ...errorInfo
        };
        
        console.log('ğŸ“‹ CAIDS Error Report:', report);
        localStorage.setItem('caids_last_error', JSON.stringify(report));
    },
    
    getSessionId: function() {
        let sessionId = sessionStorage.getItem('caids_session_id');
        if (!sessionId) {
            sessionId = 'caids_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('caids_session_id', sessionId);
        }
        return sessionId;
    },
    
    getErrorStats: function() {
        return {
            totalErrors: this.errorCount,
            recentErrors: this.errorHistory.slice(-10),
            sessionId: this.getSessionId()
        };
    }
};

window.CAIDS_ERROR_HANDLER.initialize();

</script>
<script>
// CAIDS user_feedback Hook
// CAIDS user_feedback Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_feedback Hook loaded');
</script>
<script>
// CAIDS character_limit Hook
// CAIDS character_limit Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_limit Hook loaded');
</script>
<script>
// CAIDS natural_explanation Hook
// CAIDS natural_explanation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… natural_explanation Hook loaded');
</script>
<script>
// CAIDS character_monitoring Hook
// CAIDS character_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… character_monitoring Hook loaded');
</script>
<script>
// CAIDS emergency_accumulation Hook
// CAIDS emergency_accumulation Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… emergency_accumulation Hook loaded');
</script>
<script>
// CAIDS processing_capacity_monitoring Hook
// CAIDS processing_capacity_monitoring Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… processing_capacity_monitoring Hook loaded');
</script>
<script>
// CAIDS pre_analysis_enforcement Hook
// CAIDS pre_analysis_enforcement Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… pre_analysis_enforcement Hook loaded');
</script>
<script>
// CAIDS user_approval_required Hook
// CAIDS user_approval_required Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… user_approval_required Hook loaded');
</script>
<script>
// CAIDS timeout_management Hook
// CAIDS timeout_management Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… timeout_management Hook loaded');
</script>
<script>
// CAIDS development_control Hook
// CAIDS development_control Hook - åŸºæœ¬å®Ÿè£…
console.log('âœ… development_control Hook loaded');
</script>
</head>
<body>
    <div class="upload-container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="upload__header">
            <h1 class="upload__title">ğŸ“¦ å•†å“ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h1>
            <p class="upload__subtitle">Amazonãƒ»æ¥½å¤©ãƒ»Yahooãƒ»eBayç­‰ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬å–å¾—</p>
        </div>

        <!-- ãƒ¢ãƒ¼ãƒ«é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="upload__mall-section">
            <h2 class="upload__mall-title">
                ğŸª å¯¾è±¡ãƒ¢ãƒ¼ãƒ«ã‚’é¸æŠ
            </h2>
            <div class="upload__mall-grid">
                <div class="upload__mall-card upload__mall-card--active" data-mall="amazon" onclick="selectMall('amazon')">
                    <div class="upload__mall-icon">ğŸ“¦</div>
                    <div class="upload__mall-name">Amazon</div>
                    <div class="upload__mall-status">æ¨å¥¨</div>
                </div>
                <div class="upload__mall-card" data-mall="rakuten" onclick="selectMall('rakuten')">
                    <div class="upload__mall-icon">ğŸ›ï¸</div>
                    <div class="upload__mall-name">æ¥½å¤©å¸‚å ´</div>
                    <div class="upload__mall-status">å¯¾å¿œä¸­</div>
                </div>
                <div class="upload__mall-card" data-mall="yahoo" onclick="selectMall('yahoo')">
                    <div class="upload__mall-icon">ğŸ›’</div>
                    <div class="upload__mall-name">Yahoo!</div>
                    <div class="upload__mall-status">å¯¾å¿œä¸­</div>
                </div>
                <div class="upload__mall-card" data-mall="ebay" onclick="selectMall('ebay')">
                    <div class="upload__mall-icon">ğŸŒ</div>
                    <div class="upload__mall-name">eBay</div>
                    <div class="upload__mall-status">æ–°æ©Ÿèƒ½</div>
                </div>
                <div class="upload__mall-card" data-mall="mercari" onclick="selectMall('mercari')">
                    <div class="upload__mall-icon">ğŸ“±</div>
                    <div class="upload__mall-name">ãƒ¡ãƒ«ã‚«ãƒª</div>
                    <div class="upload__mall-status">ãƒ™ãƒ¼ã‚¿</div>
                </div>
                <div class="upload__mall-card" data-mall="other" onclick="showComingSoon()">
                    <div class="upload__mall-icon">â•</div>
                    <div class="upload__mall-name">ãã®ä»–</div>
                    <div class="upload__mall-status">é †æ¬¡å¯¾å¿œ</div>
                </div>
            </div>
        </div>

        <!-- é¸æŠæ¸ˆã¿ãƒ¢ãƒ¼ãƒ«è¡¨ç¤º -->
        <div class="upload__selected-mall">
            <span class="upload__selected-icon">âœ…</span>
            <span class="upload__selected-text">é¸æŠæ¸ˆã¿: <strong id="selectedMallDisplay">Amazon</strong></span>
        </div>

        <!-- å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="upload__form-section">
            <h2 class="upload__form-title">ğŸ“ ãƒ‡ãƒ¼ã‚¿å…¥åŠ›</h2>
            
            <!-- å€‹åˆ¥å…¥åŠ› -->
            <div class="upload__input-group">
                <label class="upload__label" id="idLabel">ASIN</label>
                <input 
                    type="text" 
                    id="idInput" 
                    class="upload__input" 
                    placeholder="ä¾‹: B08N5WRWNW"
                >
            </div>

            <!-- URLå…¥åŠ› -->
            <div class="upload__input-group">
                <label class="upload__label">å•†å“URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</label>
                <input 
                    type="url" 
                    id="urlInput" 
                    class="upload__input" 
                    placeholder="https://amazon.co.jp/dp/B08N5WRWNW"
                >
            </div>

            <!-- ä¸€æ‹¬å…¥åŠ› -->
            <div class="upload__input-group">
                <label class="upload__label" id="bulkLabel">ASINãƒ»URLä¸€æ‹¬å…¥åŠ›</label>
                <textarea 
                    id="bulkInput" 
                    class="upload__input upload__textarea" 
                    placeholder="B08N5WRWNW&#10;B09B8RRQT5&#10;https://amazon.co.jp/dp/B08N5WRWNW"
                ></textarea>
            </div>

            <!-- ãƒ¢ãƒ¼ãƒ«å›ºæœ‰æ©Ÿèƒ½ï¼ˆæ¡ä»¶è¡¨ç¤ºï¼‰ -->
            
            <!-- Amazonå°‚ç”¨æ©Ÿèƒ½ -->
            <div class="upload__conditional upload__conditional--active" data-mall="amazon">
                <h3 style="font-size: var(--text-base); margin-bottom: var(--space-3);">ğŸ”§ Amazonå°‚ç”¨è¨­å®š</h3>
                <div class="upload__input-group">
                    <label class="upload__label">å–å¾—ä»¶æ•°åˆ¶é™</label>
                    <select class="upload__input">
                        <option value="100">100ä»¶</option>
                        <option value="500">500ä»¶</option>
                        <option value="1000" selected>1000ä»¶</option>
                        <option value="unlimited">åˆ¶é™ãªã—</option>
                    </select>
                </div>
                <div class="upload__input-group">
                    <label class="upload__label">
                        <input type="checkbox" checked> ãƒ¬ãƒ“ãƒ¥ãƒ¼æƒ…å ±ã‚’å–å¾—
                    </label>
                    <label class="upload__label">
                        <input type="checkbox" checked> ä¾¡æ ¼å±¥æ­´ã‚’å–å¾—
                    </label>
                </div>
            </div>

            <!-- æ¥½å¤©å°‚ç”¨æ©Ÿèƒ½ -->
            <div class="upload__conditional" data-mall="rakuten">
                <h3 style="font-size: var(--text-base); margin-bottom: var(--space-3);">ğŸ›ï¸ æ¥½å¤©å¸‚å ´å°‚ç”¨è¨­å®š</h3>
                <div class="upload__input-group">
                    <label class="upload__label">ã‚·ãƒ§ãƒƒãƒ—æƒ…å ±å–å¾—</label>
                    <label class="upload__label">
                        <input type="checkbox" checked> ã‚·ãƒ§ãƒƒãƒ—è©•ä¾¡ã‚’å–å¾—
                    </label>
                    <label class="upload__label">
                        <input type="checkbox"> ãƒã‚¤ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—
                    </label>
                </div>
            </div>

            <!-- eBayå°‚ç”¨æ©Ÿèƒ½ -->
            <div class="upload__conditional" data-mall="ebay">
                <h3 style="font-size: var(--text-base); margin-bottom: var(--space-3);">ğŸŒ eBayå°‚ç”¨è¨­å®š</h3>
                <div class="upload__input-group">
                    <label class="upload__label">å¯¾è±¡åœ°åŸŸ</label>
                    <select class="upload__input">
                        <option value="us">United States</option>
                        <option value="uk">United Kingdom</option>
                        <option value="de">Germany</option>
                        <option value="jp">Japan</option>
                    </select>
                </div>
                <div class="upload__input-group">
                    <label class="upload__label">
                        <input type="checkbox"> é€æ–™æƒ…å ±ã‚’å–å¾—
                    </label>
                    <label class="upload__label">
                        <input type="checkbox"> ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³å½¢å¼ã®ã¿
                    </label>
                </div>
            </div>

            <!-- CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
            <div class="upload__input-group">
                <label class="upload__label">ğŸ“„ CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
                <div class="upload__file-zone" onclick="document.getElementById('csvFile').click()">
                    <div class="upload__file-icon">ğŸ“„</div>
                    <div class="upload__file-text">CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯</div>
                    <div class="upload__file-subtext">æœ€å¤§10MBã€1000ä»¶ã¾ã§</div>
                    <input type="file" id="csvFile" class="upload__file-input" accept=".csv,.xlsx" onchange="handleFileSelect(this)">
                </div>
                
                <!-- CSVã‚µãƒ³ãƒ—ãƒ«è¡¨ç¤ºï¼ˆå‹•çš„ï¼‰ -->
                <div class="upload__sample">
                    <div class="upload__sample-title">ğŸ“ CSVã‚µãƒ³ãƒ—ãƒ«å½¢å¼</div>
                    <div class="upload__sample-code" id="csvSample">ASIN,URL,å•†å“å,ä¾¡æ ¼
B08N5WRWNW,https://amazon.co.jp/dp/B08N5WRWNW,Echo Dot,3980
B09B8RRQT5,https://amazon.co.jp/dp/B09B8RRQT5,Fire Stick,4980</div>
                </div>
            </div>
        </div>

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="upload__actions">
            <button class="btn btn--secondary" onclick="clearForm()">
                ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
            </button>
            <button class="btn btn--primary" onclick="startUpload()" data-action="start-upload">
                ğŸš€ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–‹å§‹
            </button>
        </div>
    </div>

    <script>
        // ãƒ¢ãƒ¼ãƒ«è¨­å®šï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é§†å‹•ï¼‰
        const mallConfigs = {
            amazon: {
                name: 'Amazon',
                idLabel: 'ASIN',
                bulkLabel: 'ASINãƒ»URLä¸€æ‹¬å…¥åŠ›',
                placeholder: 'B08N5WRWNW',
                urlPattern: 'https://amazon.co.jp/dp/',
                csvFormat: ['ASIN', 'URL', 'å•†å“å', 'ä¾¡æ ¼']
            },
            rakuten: {
                name: 'æ¥½å¤©å¸‚å ´',
                idLabel: 'å•†å“ID',
                bulkLabel: 'å•†å“IDãƒ»URLä¸€æ‹¬å…¥åŠ›',
                placeholder: 'rakuten-item-123',
                urlPattern: 'https://item.rakuten.co.jp/',
                csvFormat: ['å•†å“ID', 'URL', 'å•†å“å', 'ä¾¡æ ¼', 'ã‚«ãƒ†ã‚´ãƒª']
            },
            yahoo: {
                name: 'Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°',
                idLabel: 'å•†å“ã‚³ãƒ¼ãƒ‰',
                bulkLabel: 'å•†å“ã‚³ãƒ¼ãƒ‰ãƒ»URLä¸€æ‹¬å…¥åŠ›',
                placeholder: 'yahoo-abc123',
                urlPattern: 'https://shopping.yahoo.co.jp/',
                csvFormat: ['å•†å“ã‚³ãƒ¼ãƒ‰', 'URL', 'å•†å“å', 'ä¾¡æ ¼']
            },
            ebay: {
                name: 'eBay',
                idLabel: 'Item ID',
                bulkLabel: 'Item IDãƒ»URLä¸€æ‹¬å…¥åŠ›',
                placeholder: '123456789012',
                urlPattern: 'https://ebay.com/itm/',
                csvFormat: ['ItemID', 'URL', 'Title', 'Price', 'Category']
            },
            mercari: {
                name: 'ãƒ¡ãƒ«ã‚«ãƒª',
                idLabel: 'å•†å“ID',
                bulkLabel: 'å•†å“IDãƒ»URLä¸€æ‹¬å…¥åŠ›',
                placeholder: 'm12345678901',
                urlPattern: 'https://mercari.com/jp/items/',
                csvFormat: ['å•†å“ID', 'URL', 'å•†å“å', 'ä¾¡æ ¼', 'çŠ¶æ…‹']
            }
        };
        
        let selectedMall = 'amazon';
        
        // ãƒ¢ãƒ¼ãƒ«é¸æŠæ©Ÿèƒ½
        function selectMall(mallId) {
            selectedMall = mallId;
            
            // ãƒ¢ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ã®çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.upload__mall-card').forEach(card => {
                card.classList.remove('upload__mall-card--active');
            });
            document.querySelector(`[data-mall="${mallId}"]`).classList.add('upload__mall-card--active');
            
            // é¸æŠãƒ¢ãƒ¼ãƒ«è¡¨ç¤ºæ›´æ–°
            document.getElementById('selectedMallDisplay').textContent = mallConfigs[mallId].name;
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒ©ãƒ™ãƒ«æ›´æ–°
            const config = mallConfigs[mallId];
            document.getElementById('idLabel').textContent = config.idLabel;
            document.getElementById('bulkLabel').textContent = config.bulkLabel;
            document.getElementById('idInput').placeholder = `ä¾‹: ${config.placeholder}`;
            
            // æ¡ä»¶è¡¨ç¤ºæ©Ÿèƒ½ã®åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.upload__conditional').forEach(el => {
                el.classList.remove('upload__conditional--active');
            });
            const targetConditional = document.querySelector(`[data-mall="${mallId}"].upload__conditional`);
            if (targetConditional) {
                targetConditional.classList.add('upload__conditional--active');
            }
            
            // CSVã‚µãƒ³ãƒ—ãƒ«æ›´æ–°
            updateCSVSample(config.csvFormat);
            
            showNotification(`${config.name}ãŒé¸æŠã•ã‚Œã¾ã—ãŸã€‚`, 'info');
        }
        
        function showComingSoon() {
            showNotification('ãã®ä»–ã®ãƒ¢ãƒ¼ãƒ«ã¯é †æ¬¡å¯¾å¿œäºˆå®šã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼', 'info');
        }
        
        function updateCSVSample(format) {
            const sampleData = {
                amazon: `ASIN,URL,å•†å“å,ä¾¡æ ¼
B08N5WRWNW,https://amazon.co.jp/dp/B08N5WRWNW,Echo Dot,3980
B09B8RRQT5,https://amazon.co.jp/dp/B09B8RRQT5,Fire Stick,4980`,
                rakuten: `å•†å“ID,URL,å•†å“å,ä¾¡æ ¼,ã‚«ãƒ†ã‚´ãƒª
rakuten-123,https://item.rakuten.co.jp/shop/item123,å•†å“å,2980,å®¶é›»
rakuten-456,https://item.rakuten.co.jp/shop/item456,å•†å“å,4980,ç”Ÿæ´»ç”¨å“`,
                yahoo: `å•†å“ã‚³ãƒ¼ãƒ‰,URL,å•†å“å,ä¾¡æ ¼
yahoo-abc123,https://shopping.yahoo.co.jp/products/abc123,å•†å“å,1980
yahoo-def456,https://shopping.yahoo.co.jp/products/def456,å•†å“å,3980`,
                ebay: `ItemID,URL,Title,Price,Category
123456789012,https://ebay.com/itm/123456789012,Product Name,29.99,Electronics
123456789013,https://ebay.com/itm/123456789013,Product Name,49.99,Home`,
                mercari: `å•†å“ID,URL,å•†å“å,ä¾¡æ ¼,çŠ¶æ…‹
m12345678901,https://mercari.com/jp/items/m123456,å•†å“å,1500,æ–°å“ãƒ»æœªä½¿ç”¨
m12345678902,https://mercari.com/jp/items/m123457,å•†å“å,2800,ç›®ç«‹ã£ãŸå‚·ã‚„æ±šã‚Œãªã—`
            };
            
            document.getElementById('csvSample').textContent = sampleData[selectedMall] || sampleData.amazon;
        }
        
        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠå‡¦ç†
        function handleFileSelect(input) {
            const file = input.files[0];
            if (file) {
                showNotification(`ãƒ•ã‚¡ã‚¤ãƒ«ã€Œ${file.name}ã€ãŒé¸æŠã•ã‚Œã¾ã—ãŸã€‚`, 'success');
                
                // ãƒ•ã‚¡ã‚¤ãƒ«åè¡¨ç¤º
                const fileZone = document.querySelector('.upload__file-zone');
                fileZone.querySelector('.upload__file-text').textContent = file.name;
                fileZone.style.borderColor = 'var(--color-success)';
                fileZone.style.background = 'rgba(16, 185, 129, 0.05)';
            }
        }
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã‚¯ãƒªã‚¢
        function clearForm() {
            document.getElementById('idInput').value = '';
            document.getElementById('urlInput').value = '';
            document.getElementById('bulkInput').value = '';
            document.getElementById('csvFile').value = '';
            
            // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¾ãƒ¼ãƒ³ãƒªã‚»ãƒƒãƒˆ
            const fileZone = document.querySelector('.upload__file-zone');
            fileZone.querySelector('.upload__file-text').textContent = 'CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯';
            fileZone.style.borderColor = 'var(--border-color)';
            fileZone.style.background = 'var(--bg-primary)';
            
            showNotification('ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚', 'info');
        }
        
        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–‹å§‹
        function startUpload() {
            const idValue = document.getElementById('idInput').value.trim();
            const urlValue = document.getElementById('urlInput').value.trim();
            const bulkValue = document.getElementById('bulkInput').value.trim();
            const fileValue = document.getElementById('csvFile').files.length > 0;
            
            if (!idValue && !urlValue && !bulkValue && !fileValue) {
                showNotification('å•†å“IDã€URLã€ä¸€æ‹¬å…¥åŠ›ã€ã¾ãŸã¯CSVãƒ•ã‚¡ã‚¤ãƒ«ã®ã„ãšã‚Œã‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚', 'error');
                return;
            }
            
            // å®Ÿéš›ã®å‡¦ç†ã¯ã“ã“ã§Ajaxé€ä¿¡
            showNotification(`${mallConfigs[selectedMall].name}ã®å•†å“ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é–‹å§‹ã—ã¾ã™...`, 'success');
            
            // ãƒ‡ãƒ¢ç”¨: 3ç§’å¾Œã«å®Œäº†é€šçŸ¥
            setTimeout(() => {
                showNotification('å•†å“ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'success');
            }, 3000);
        }
        
        // é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç°¡æ˜“ç‰ˆï¼‰
        function showNotification(message, type = 'info') {
            // é€šçŸ¥è¦ç´ ä½œæˆ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 16px;
                border-radius: 6px;
                color: white;
                font-size: 14px;
                z-index: 1000;
                max-width: 300px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            `;
            
            // ã‚¿ã‚¤ãƒ—åˆ¥ã‚¹ã‚¿ã‚¤ãƒ«
            const colors = {
                info: '#3b82f6',
                success: '#10b981',
                error: '#ef4444',
                warning: '#f59e0b'
            };
            notification.style.background = colors[type] || colors.info;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // 3ç§’å¾Œã«å‰Šé™¤
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œ
        const fileZone = document.querySelector('.upload__file-zone');
        
        fileZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileZone.classList.add('upload__file-zone--dragover');
        });
        
        fileZone.addEventListener('dragleave', () => {
            fileZone.classList.remove('upload__file-zone--dragover');
        });
        
        fileZone.addEventListener('drop', (e) => {
            e.preventDefault();
            fileZone.classList.remove('upload__file-zone--dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('csvFile').files = files;
                handleFileSelect(document.getElementById('csvFile'));
            }
        });
        
        // åˆæœŸåŒ–
        selectMall('amazon');
    </script>
</body>
</html>