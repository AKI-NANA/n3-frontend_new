<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·åˆãƒªã‚µãƒ¼ãƒãƒ„ãƒ¼ãƒ« - eBayÃ—å›½å†…ECçµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.2em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 10px;
        }

        .header .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .stat-trend {
            font-size: 0.85em;
            font-weight: 500;
        }

        .trend-up { color: #4CAF50; }
        .trend-down { color: #f44336; }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            margin-bottom: 30px;
        }

        .research-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .search-section {
            margin-bottom: 30px;
        }

        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .search-btn:hover {
            transform: scale(1.05);
        }

        .filter-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .filter-select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .results-section {
            margin-top: 30px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-count {
            color: #666;
            font-size: 0.9em;
        }

        .view-toggle {
            display: flex;
            background: #f5f5f5;
            border-radius: 8px;
            overflow: hidden;
        }

        .view-btn {
            padding: 8px 15px;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .view-btn.active {
            background: #667eea;
            color: white;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 4px solid transparent;
        }

        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .product-card.high-potential {
            border-left-color: #4CAF50;
        }

        .product-card.medium-potential {
            border-left-color: #FF9800;
        }

        .product-card.low-potential {
            border-left-color: #f44336;
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .product-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
            line-height: 1.4;
            color: #333;
        }

        .product-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .metric-item {
            text-align: center;
        }

        .metric-value {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .metric-label {
            font-size: 0.8em;
            color: #666;
        }

        .profit-analysis {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .profit-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .profit-row:last-child {
            margin-bottom: 0;
            font-weight: bold;
            border-top: 1px solid #ddd;
            padding-top: 8px;
        }

        .supplier-matches {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .supplier-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .supplier-item:last-child {
            border-bottom: none;
        }

        .supplier-name {
            font-weight: 500;
        }

        .supplier-price {
            color: #4CAF50;
            font-weight: bold;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9em;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .analysis-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .trend-analysis {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .trend-chart {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            margin-bottom: 15px;
        }

        .market-insights {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .insight-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
        }

        .insight-content {
            flex: 1;
        }

        .insight-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .insight-desc {
            font-size: 0.9em;
            color: #666;
        }

        .notification-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            padding: 20px;
            display: none;
            z-index: 1000;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .notification-title {
            font-weight: bold;
            font-size: 1.1em;
        }

        .close-notification {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
        }

        .notification-content {
            padding: 15px;
            background: #e8f5e8;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <h1>ğŸš€ ç·åˆãƒªã‚µãƒ¼ãƒãƒ„ãƒ¼ãƒ«</h1>
            <div class="subtitle">eBayÃ—å›½å†…ECçµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  - é€†ãƒªã‚µãƒ¼ãƒæ©Ÿèƒ½ã§åˆ©ç›Šæ©Ÿä¼šã‚’ç™ºè¦‹</div>
        </div>

        <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">ğŸ“Š</div>
                <div class="stat-value" style="color: #667eea;">1,247</div>
                <div class="stat-label">ä»Šæ—¥ã®ãƒªã‚µãƒ¼ãƒä»¶æ•°</div>
                <div class="stat-trend trend-up">+18.5% æ˜¨æ—¥æ¯”</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white;">ğŸ’°</div>
                <div class="stat-value" style="color: #4CAF50;">Â¥892,340</div>
                <div class="stat-label">æ¨å®šæœˆé–“åˆ©ç›Š</div>
                <div class="stat-trend trend-up">+24.3% å…ˆæœˆæ¯”</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white;">ğŸ¯</div>
                <div class="stat-value" style="color: #FF9800;">89</div>
                <div class="stat-label">é«˜åˆ©ç›Šå•†å“å€™è£œ</div>
                <div class="stat-trend trend-up">+12.1% ä»Šé€±</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #9C27B0, #7B1FA2); color: white;">âš¡</div>
                <div class="stat-value" style="color: #9C27B0;">94.2%</div>
                <div class="stat-label">ãƒãƒƒãƒãƒ³ã‚°ç²¾åº¦</div>
                <div class="stat-trend trend-up">+2.1% æ”¹å–„</div>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="main-content">
            <div class="research-panel">
                <h2>ğŸ” å•†å“ãƒªã‚µãƒ¼ãƒ</h2>
                
                <!-- æ¤œç´¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="search-section">
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="å•†å“åã€ãƒ–ãƒ©ãƒ³ãƒ‰ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢..." id="searchInput">
                        <button class="search-btn" onclick="performSearch()">
                            <span id="searchText">æ¤œç´¢é–‹å§‹</span>
                            <div id="searchSpinner" class="loading" style="display: none;"></div>
                        </button>
                    </div>

                    <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
                    <div class="filter-section">
                        <div class="filter-group">
                            <div class="filter-label">ã‚«ãƒ†ã‚´ãƒª</div>
                            <select class="filter-select" id="categoryFilter">
                                <option value="">å…¨ã‚«ãƒ†ã‚´ãƒª</option>
                                <option value="electronics">é›»å­æ©Ÿå™¨</option>
                                <option value="fashion">ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</option>
                                <option value="home">ãƒ›ãƒ¼ãƒ ãƒ»ã‚­ãƒƒãƒãƒ³</option>
                                <option value="sports">ã‚¹ãƒãƒ¼ãƒ„</option>
                                <option value="automotive">è‡ªå‹•è»Š</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <div class="filter-label">ä¾¡æ ¼å¸¯</div>
                            <select class="filter-select" id="priceFilter">
                                <option value="">æŒ‡å®šãªã—</option>
                                <option value="0-50">$0-50</option>
                                <option value="50-200">$50-200</option>
                                <option value="200-500">$200-500</option>
                                <option value="500+">$500+</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <div class="filter-label">åˆ©ç›Šç‡</div>
                            <select class="filter-select" id="profitFilter">
                                <option value="">æŒ‡å®šãªã—</option>
                                <option value="20+">20%ä»¥ä¸Š</option>
                                <option value="30+">30%ä»¥ä¸Š</option>
                                <option value="50+">50%ä»¥ä¸Š</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <div class="filter-label">ä¸¦ã³é †</div>
                            <select class="filter-select" id="sortFilter">
                                <option value="profit">åˆ©ç›Šç‡é †</option>
                                <option value="score">ã‚¹ã‚³ã‚¢é †</option>
                                <option value="recent">æ–°ç€é †</option>
                                <option value="volume">å£²ä¸Šé †</option>
                            </select>
                        </div>
                    </div>

                    <div class="progress-bar" id="progressBar" style="display: none;">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- æ¤œç´¢çµæœ -->
                <div class="results-section">
                    <div class="results-header">
                        <div class="results-count" id="resultsCount">æ¤œç´¢çµæœã‚’è¡¨ç¤ºã™ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸ</div>
                        <div class="view-toggle">
                            <button class="view-btn active" onclick="switchView('grid')">ã‚°ãƒªãƒƒãƒ‰</button>
                            <button class="view-btn" onclick="switchView('list')">ãƒªã‚¹ãƒˆ</button>
                        </div>
                    </div>

                    <div class="product-grid" id="productGrid">
                        <!-- å•†å“ã‚«ãƒ¼ãƒ‰ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <div class="analysis-sidebar">
                <!-- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ -->
                <div class="trend-analysis">
                    <h3>ğŸ“ˆ å¸‚å ´ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ</h3>
                    <div class="trend-chart">
                        <div>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼å‹•å‘ã‚°ãƒ©ãƒ•</div>
                    </div>
                    <div style="font-size: 0.9em; color: #666;">
                        <p><strong>ä»Šé€±ã®ãƒˆãƒ¬ãƒ³ãƒ‰:</strong></p>
                        <ul style="padding-left: 20px; margin-top: 10px;">
                            <li>é›»å­æ©Ÿå™¨ã®éœ€è¦ãŒ15%ä¸Šæ˜‡</li>
                            <li>ãƒ›ãƒ¼ãƒ ç”¨å“ã®ä¾¡æ ¼ãŒå®‰å®š</li>
                            <li>ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ç³»ãŒå­£ç¯€å¤‰å‹•</li>
                        </ul>
                    </div>
                </div>

                <!-- ãƒãƒ¼ã‚±ãƒƒãƒˆæ´å¯Ÿ -->
                <div class="market-insights">
                    <h3>ğŸ’¡ AIæ¨å¥¨ã‚¤ãƒ³ã‚µã‚¤ãƒˆ</h3>
                    
                    <div class="insight-item">
                        <div class="insight-icon" style="background: #4CAF50; color: white;">ğŸ¯</div>
                        <div class="insight-content">
                            <div class="insight-title">é«˜åˆ©ç›Šæ©Ÿä¼šæ¤œå‡º</div>
                            <div class="insight-desc">Nintendoè£½å“ã§å¹³å‡34%ã®åˆ©ç›Šç‡ã‚’ç¢ºèª</div>
                        </div>
                    </div>

                    <div class="insight-item">
                        <div class="insight-icon" style="background: #FF9800; color: white;">âš ï¸</div>
                        <div class="insight-content">
                            <div class="insight-title">ç«¶åˆå¢—åŠ è­¦å‘Š</div>
                            <div class="insight-desc">iPhoneé–¢é€£å•†å“ã®å‡ºå“è€…ãŒ20%å¢—åŠ </div>
                        </div>
                    </div>

                    <div class="insight-item">
                        <div class="insight-icon" style="background: #2196F3; color: white;">ğŸ“Š</div>
                        <div class="insight-content">
                            <div class="insight-title">æ–°ã‚«ãƒ†ã‚´ãƒªç™ºè¦‹</div>
                            <div class="insight-desc">å¥åº·é–¢é€£å•†å“ã§æœªé–‹æ‹“å¸‚å ´ã‚’ç™ºè¦‹</div>
                        </div>
                    </div>

                    <div class="insight-item">
                        <div class="insight-icon" style="background: #9C27B0; color: white;">ğŸš€</div>
                        <div class="insight-content">
                            <div class="insight-title">å­£ç¯€å•†å“äºˆæ¸¬</div>
                            <div class="insight-desc">ã‚¯ãƒªã‚¹ãƒã‚¹é–¢é€£å•†å“ã®éœ€è¦äºˆæ¸¬é–‹å§‹</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥ãƒ‘ãƒãƒ« -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <div class="notification-title">ğŸ‰ é«˜åˆ©ç›Šå•†å“ã‚’ç™ºè¦‹ï¼</div>
            <button class="close-notification" onclick="closeNotification()">Ã—</button>
        </div>
        <div class="notification-content">
            <strong>Sony WH-1000XM4 ãƒ˜ãƒƒãƒ‰ãƒ›ãƒ³</strong><br>
            æ¨å®šåˆ©ç›Šç‡: <strong style="color: #4CAF50;">42.3%</strong><br>
            å›½å†…ä»•å…¥å…ˆ: Amazon, ãƒ¨ãƒ‰ãƒã‚·ã‚«ãƒ¡ãƒ©<br>
            <small>è©³ç´°åˆ†æã‚’ç¢ºèªã—ã¦æŠ•è³‡åˆ¤æ–­ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</small>
        </div>
    </div>

    <script>
        let searchInProgress = false;
        let currentSearchResults = [];

        // æ¤œç´¢å®Ÿè¡Œ
        async function performSearch() {
            if (searchInProgress) return;

            const searchInput = document.getElementById('searchInput');
            const searchText = document.getElementById('searchText');
            const searchSpinner = document.getElementById('searchSpinner');
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const resultsCount = document.getElementById('resultsCount');

            const keywords = searchInput.value.trim();
            if (!keywords) {
                alert('æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            searchInProgress = true;
            searchText.style.display = 'none';
            searchSpinner.style.display = 'inline-block';
            progressBar.style.display = 'block';

            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹æ›´æ–°ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 95) progress = 95;
                progressFill.style.width = progress + '%';
            }, 200);

            try {
                // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 2000));

                // æ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
                currentSearchResults = generateMockSearchResults(keywords, 24);
                
                clearInterval(progressInterval);
                progressFill.style.width = '100%';
                
                displayResults(currentSearchResults);
                resultsCount.textContent = `${currentSearchResults.length}ä»¶ã®å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`;

                // é«˜åˆ©ç›Šå•†å“ãŒã‚ã‚Œã°é€šçŸ¥è¡¨ç¤º
                const highProfitItems = currentSearchResults.filter(item => item.profit.margin > 35);
                if (highProfitItems.length > 0) {
                    setTimeout(() => showNotification(), 1000);
                }

            } catch (error) {
                console.error('Search failed:', error);
                alert('æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚');
            } finally {
                searchInProgress = false;
                searchText.style.display = 'inline';
                searchSpinner.style.display = 'none';
                setTimeout(() => {
                    progressBar.style.display = 'none';
                    progressFill.style.width = '0%';
                }, 1000);
            }
        }

        // æ¨¡æ“¬æ¤œç´¢çµæœç”Ÿæˆ
        function generateMockSearchResults(keywords, count) {
            const results = [];
            const brands = ['Sony', 'Apple', 'Samsung', 'Nintendo', 'Canon', 'Nikon', 'Dell', 'HP', 'Logitech', 'Microsoft'];
            const categories = ['Electronics', 'Gaming', 'Computer', 'Audio', 'Camera', 'Phone', 'Tablet', 'Watch', 'Accessory'];
            const suppliers = [
                { name: 'Amazon', reliability: 0.95 },
                { name: 'æ¥½å¤©å¸‚å ´', reliability: 0.88 },
                { name: 'ãƒ¨ãƒ‰ãƒã‚·ã‚«ãƒ¡ãƒ©', reliability: 0.92 },
                { name: 'ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©', reliability: 0.90 },
                { name: 'ãƒ¡ãƒ«ã‚«ãƒª', reliability: 0.75 },
                { name: 'ãƒ¤ãƒ•ã‚ªã‚¯', reliability: 0.70 }
            ];

            for (let i = 0; i < count; i++) {
                const brand = brands[Math.floor(Math.random() * brands.length)];
                const category = categories[Math.floor(Math.random() * categories.length)];
                const ebayPrice = Math.floor(Math.random() * 400 + 50);
                const domesticPrice = Math.floor(ebayPrice * (0.4 + Math.random() * 0.4));
                const profit = ebayPrice - domesticPrice - Math.floor(ebayPrice * 0.15);
                const profitMargin = (profit / domesticPrice) * 100;
                const supplierCount = Math.floor(Math.random() * 4) + 1;
                const selectedSuppliers = suppliers.sort(() => 0.5 - Math.random()).slice(0, supplierCount);

                let potentialClass = 'low-potential';
                if (profitMargin > 35) potentialClass = 'high-potential';
                else if (profitMargin > 20) potentialClass = 'medium-potential';

                results.push({
                    id: i + 1,
                    title: `${brand} ${category} ${keywords} ${generateModelName()}`,
                    image: `https://picsum.photos/300/200?random=${i + 1}`,
                    ebay: {
                        price: ebayPrice,
                        sold: Math.floor(Math.random() * 200 + 10),
                        views: Math.floor(Math.random() * 5000 + 500),
                        watchers: Math.floor(Math.random() * 100 + 5)
                    },
                    profit: {
                        estimated: Math.max(0, profit),
                        margin: Math.max(0, profitMargin),
                        confidence: 0.7 + Math.random() * 0.25
                    },
                    suppliers: selectedSuppliers.map(s => ({
                        name: s.name,
                        price: domesticPrice + Math.floor(Math.random() * 20 - 10),
                        reliability: s.reliability,
                        availability: Math.random() > 0.2 ? 'available' : 'limited'
                    })),
                    score: Math.floor(Math.random() * 30 + 70),
                    category: category.toLowerCase(),
                    potentialClass: potentialClass
                });
            }

            return results.sort((a, b) => b.profit.margin - a.profit.margin);
        }

        function generateModelName() {
            const models = ['Pro', 'Max', 'Ultra', 'Elite', 'Premium', 'Deluxe', 'X1', 'V2', 'Plus', 'Air', 'Mini', 'Lite'];
            return models[Math.floor(Math.random() * models.length)];
        }

        // æ¤œç´¢çµæœè¡¨ç¤º
        function displayResults(results) {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';

            results.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = `product-card ${product.potentialClass}`;
                
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" class="product-image">
                    <h3 class="product-title">${product.title}</h3>
                    
                    <div class="product-metrics">
                        <div class="metric-item">
                            <div class="metric-value" style="color: #667eea;">$${product.ebay.price}</div>
                            <div class="metric-label">eBayä¾¡æ ¼</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" style="color: #4CAF50;">${product.profit.margin.toFixed(1)}%</div>
                            <div class="metric-label">åˆ©ç›Šç‡</div>
                        </div>
                    </div>

                    <div class="profit-analysis">
                        <h4 style="margin-bottom: 10px; color: #333;">ğŸ’° åˆ©ç›Šåˆ†æ</h4>
                        <div class="profit-row">
                            <span>eBayè²©å£²ä¾¡æ ¼:</span>
                            <span>$${product.ebay.price}</span>
                        </div>
                        <div class="profit-row">
                            <span>ä»•å…¥ã‚ŒåŸä¾¡:</span>
                            <span>Â¥${product.suppliers[0].price.toLocaleString()}</span>
                        </div>
                        <div class="profit-row">
                            <span>æ‰‹æ•°æ–™ãƒ»é€æ–™:</span>
                            <span>Â¥${Math.floor(product.ebay.price * 15 * 150 / 100).toLocaleString()}</span>
                        </div>
                        <div class="profit-row">
                            <span>æ¨å®šåˆ©ç›Š:</span>
                            <span style="color: #4CAF50;">Â¥${product.profit.estimated.toLocaleString()}</span>
                        </div>
                    </div>

                    <div class="supplier-matches">
                        <h4 style="margin-bottom: 10px; color: #333;">ğŸª ä»•å…¥å…ˆå€™è£œ</h4>
                        ${product.suppliers.slice(0, 2).map(supplier => `
                            <div class="supplier-item">
                                <div>
                                    <div class="supplier-name">${supplier.name}</div>
                                    <div style="font-size: 0.8em; color: #666;">
                                        ä¿¡é ¼åº¦: ${(supplier.reliability * 100).toFixed(0)}% | 
                                        ${supplier.availability === 'available' ? 'åœ¨åº«ã‚ã‚Š' : 'åœ¨åº«é™å®š'}
                                    </div>
                                </div>
                                <div class="supplier-price">Â¥${supplier.price.toLocaleString()}</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="analyzeProduct(${product.id})">
                            è©³ç´°åˆ†æ
                        </button>
                        <button class="btn btn-secondary" onclick="addToWatchlist(${product.id})">
                            ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ
                        </button>
                    </div>
                `;

                productGrid.appendChild(productCard);
            });
        }

        // è¡¨ç¤ºåˆ‡æ›¿
        function switchView(viewType) {
            const viewButtons = document.querySelectorAll('.view-btn');
            const productGrid = document.getElementById('productGrid');
            
            viewButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (viewType === 'list') {
                productGrid.style.gridTemplateColumns = '1fr';
                // ãƒªã‚¹ãƒˆè¡¨ç¤ºç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
            } else {
                productGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(320px, 1fr))';
            }
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification() {
            const notification = document.getElementById('notificationPanel');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease-out';
            }, 100);
        }

        function closeNotification() {
            const notification = document.getElementById('notificationPanel');
            notification.style.display = 'none';
        }

        // å•†å“åˆ†æ
        function analyzeProduct(productId) {
            const product = currentSearchResults.find(p => p.id === productId);
            if (product) {
                alert(`${product.title}ã®è©³ç´°åˆ†æã‚’é–‹å§‹ã—ã¾ã™...\n\næ¨å®šåˆ©ç›Šç‡: ${product.profit.margin.toFixed(1)}%\nä¿¡é ¼åº¦: ${(product.profit.confidence * 100).toFixed(0)}%\n\nè©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­...`);
            }
        }

        // ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆè¿½åŠ 
        function addToWatchlist(productId) {
            const product = currentSearchResults.find(p => p.id === productId);
            if (product) {
                alert(`${product.title}ã‚’ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸã€‚\n\nä¾¡æ ¼å¤‰å‹•ã‚„æ–°ã—ã„ä»•å…¥å…ˆãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã«ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚`);
            }
        }

        // ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§æ¤œç´¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            setTimeout(() => {
                const examples = ['Nintendo Switch', 'iPhone 15', 'Sony WH-1000XM5', 'MacBook Pro', 'Canon EOS R6'];
                const example = examples[Math.floor(Math.random() * examples.length)];
                document.getElementById('searchInput').placeholder = `ä¾‹: ${example}`;
            }, 1000);

            // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            animateStats();
        });

        function animateStats() {
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach((stat, index) => {
                setTimeout(() => {
                    stat.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        stat.style.transform = 'scale(1)';
                    }, 200);
                }, index * 100);
            });
        }

        // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            .stat-value {
                transition: transform 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>