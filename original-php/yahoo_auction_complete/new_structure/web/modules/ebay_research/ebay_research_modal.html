<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBay AIプロダクトリサーチ</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/ebay_research_ui.css">
</head>
<body>

<!-- eBay AIプロダクトリサーチモーダル -->
<div id="ebayResearchModal" class="modal ebay-research-modal">
    <div class="modal-content ebay-research-content">
        <div class="modal-header ebay-research-header">
            <h2 class="modal-title">
                <i class="fas fa-brain"></i>
                eBay AIプロダクトリサーチ
            </h2>
            <button class="modal-close" onclick="closeEbayResearchModal()">&times;</button>
        </div>
        
        <div class="modal-body ebay-research-body">
            <!-- 検索フォーム -->
            <div class="research-form-section">
                <div class="form-group">
                    <label for="productName" class="form-label">商品名・キーワード</label>
                    <input type="text" id="productName" class="form-input" 
                           placeholder="例: iPhone 15 Pro Max" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="categorySelect" class="form-label">カテゴリ</label>
                        <select id="categorySelect" class="form-select">
                            <option value="">全カテゴリ</option>
                            <option value="9355">携帯電話・スマートフォン</option>
                            <option value="31388">タブレット・電子書籍</option>
                            <option value="293">ゲーム</option>
                            <option value="11450">衣類・アクセサリー</option>
                            <option value="11700">家電・AV機器</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="maxResults" class="form-label">最大検索数</label>
                        <select id="maxResults" class="form-select">
                            <option value="25">25件</option>
                            <option value="50" selected>50件</option>
                            <option value="100">100件</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="startResearchBtn" class="btn btn-primary" onclick="startEbayResearch()">
                        <i class="fas fa-search"></i>
                        AIリサーチ開始
                    </button>
                </div>
            </div>
            
            <!-- プログレスセクション -->
            <div id="researchProgress" class="research-progress-section" style="display: none;">
                <div class="progress-container">
                    <div class="progress-header">
                        <h3>AI分析進行中...</h3>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <div id="progressStatus" class="progress-status">初期化中...</div>
                </div>
                
                <div class="progress-steps">
                    <div class="step" id="step1">
                        <i class="fas fa-search"></i>
                        <span>eBay検索</span>
                    </div>
                    <div class="step" id="step2">
                        <i class="fas fa-brain"></i>
                        <span>AI分析</span>
                    </div>
                    <div class="step" id="step3">
                        <i class="fas fa-chart-line"></i>
                        <span>市場評価</span>
                    </div>
                    <div class="step" id="step4">
                        <i class="fas fa-check-circle"></i>
                        <span>完了</span>
                    </div>
                </div>
            </div>
            
            <!-- 結果表示セクション -->
            <div id="researchResults" class="research-results-section" style="display: none;">
                <!-- AIスコア表示 -->
                <div class="ai-score-display">
                    <div class="score-main">
                        <div class="score-circle">
                            <svg class="score-svg" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" class="score-bg"></circle>
                                <circle cx="50" cy="50" r="45" class="score-progress" id="scoreCircle"></circle>
                            </svg>
                            <div class="score-content">
                                <span class="score-value" id="aiScore">0</span>
                                <span class="score-label">AI Score</span>
                            </div>
                        </div>
                        
                        <div class="score-details">
                            <div class="confidence-bar">
                                <label>信頼度</label>
                                <div class="confidence-progress">
                                    <div id="confidenceBar" class="confidence-fill"></div>
                                </div>
                                <span id="confidencePercent">0%</span>
                            </div>
                            
                            <div class="risk-indicator">
                                <label>リスクレベル</label>
                                <span id="riskLevel" class="risk-badge">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 推奨価格セクション -->
                <div class="price-recommendations">
                    <h3>推奨価格戦略</h3>
                    <div class="price-strategies">
                        <div class="price-card competitive">
                            <h4>競争戦略</h4>
                            <div class="price-value" id="competitivePrice">$0.00</div>
                            <p>市場最安値レベル</p>
                            <button class="apply-price-btn" onclick="applyPrice('competitive')">適用</button>
                        </div>
                        
                        <div class="price-card balanced recommended">
                            <h4>バランス戦略 <span class="recommended-badge">推奨</span></h4>
                            <div class="price-value" id="balancedPrice">$0.00</div>
                            <p>AI最適化価格</p>
                            <button class="apply-price-btn" onclick="applyPrice('balanced')">適用</button>
                        </div>
                        
                        <div class="price-card premium">
                            <h4>高利益戦略</h4>
                            <div class="price-value" id="premiumPrice">$0.00</div>
                            <p>高マージン設定</p>
                            <button class="apply-price-btn" onclick="applyPrice('premium')">適用</button>
                        </div>
                    </div>
                </div>
                
                <!-- 市場データサマリー -->
                <div class="market-summary">
                    <h3>市場分析結果</h3>
                    <div class="market-metrics">
                        <div class="metric">
                            <label>平均価格</label>
                            <span id="avgPrice">$0.00</span>
                        </div>
                        <div class="metric">
                            <label>最安価格</label>
                            <span id="minPrice">$0.00</span>
                        </div>
                        <div class="metric">
                            <label>供給数</label>
                            <span id="supplyCount">0件</span>
                        </div>
                        <div class="metric">
                            <label>需要スコア</label>
                            <span id="demandScore">0.0</span>
                        </div>
                    </div>
                </div>
                
                <!-- 詳細推奨事項 -->
                <div class="recommendations-section">
                    <h3>AI推奨事項</h3>
                    <div id="recommendationsList" class="recommendations-list">
                        <!-- AI推奨事項が動的に挿入される -->
                    </div>
                </div>
            </div>
            
            <!-- エラー表示 -->
            <div id="researchError" class="error-section" style="display: none;">
                <div class="error-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>エラーが発生しました</h3>
                    <p id="errorMessage">不明なエラーが発生しました。</p>
                    <button class="btn btn-secondary" onclick="retryResearch()">再試行</button>
                </div>
            </div>
        </div>
        
        <div class="modal-footer ebay-research-footer">
            <button class="btn btn-secondary" onclick="closeEbayResearchModal()">閉じる</button>
            <button id="saveResearchBtn" class="btn btn-success" onclick="saveResearchData()" style="display: none;">
                <i class="fas fa-save"></i>
                結果を保存
            </button>
        </div>
    </div>
</div>

<!-- JavaScript統合 -->
<script src="../../assets/js/ebay_research_modal_integration.js"></script>

</body>
</html>