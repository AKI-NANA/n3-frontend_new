💻 Claudeへの最終統合指示書（Shopee 多販路変換ロジック）1. 🎯 依頼の目的とスコープあなたは、Shopeeの複雑なローカライズ要件と利益計算ロジックに対応するため、以下のGeminiが作成したコアファイルをプロジェクトに組み込み、残りの機能（外部API連携、UI統合）を完成させます。2. 📂 ファイルの格納と新規作成（最優先）以下のファイルパスに、提供されたコードを新規作成してください。ファイルパス修正/新規目的/lib/shopee/profitCalculator.ts🆕 新規Shopee独自の利益計算システムを実装済み。このファイルをベースに、為替レート取得ロジックを完成させます。/app/api/shopee/transform-listing/route.ts🆕 新規Shopee向けデータ変換APIの骨子を実装済み。翻訳、画像調整、必須項目チェックを統合する主要なエンドポイントです。このファイルをベースに残りのロジックを完成させます。/app/api/shopee/generate-csv/route.ts🆕 新規CSV生成APIを新規で実装し、上記変換APIの結果を利用してShopeeの国別CSVフォーマットを出力します。3. 🛠️ 実装すべき残りの機能（外部API連携とロジックの補完）以下の機能は、Geminiが作成したコードをベースに、Claudeが担当する統合と外部連携の部分です。A. 💲 利益計算モジュールの完成と統合ファイルパス: /lib/shopee/profitCalculator.ts為替レート取得の実装: calculateShopeePrice関数内で使用される為替レート取得ロジック（現在モック）を、プロジェクトが使用する実際の外部為替APIクライアントを利用するように実装し直してください。設定データの外部化: /lib/shopee/profitCalculator.ts 内にハードコードされているSHOPEE_CONFIG（手数料率、SLS送料、補助率）を、DBまたは設定ファイルから読み込むロジックに置き換えるための準備をしてください。B. 🌐 データ変換APIの完成と検証ファイルパス: /app/api/shopee/transform-listing/route.tsLLM翻訳サービスの統合: 翻訳ロジック（translatedTitle、translatedDesc）を、既存のLLM翻訳サービス（DeepL、Google Translateなど）を呼び出すコードに置き換え、韓国語・英語・タイ語などへの自動翻訳を動作させてください。画像処理ライブラリの統合: 画像規格調整ロジック（adjustedImages）を、プロジェクトの画像処理ライブラリ（トリミング、リサイズ）を利用して実装し、**Shopee推奨の正方形（1:1、800x800px以上）**に変換できるようにしてください。カテゴリマッピング: shopeeData内のcategory_idを補完するため、既存カテゴリからShopee国別カテゴリIDへのマッピング（DBまたはマッピング辞書を参照）ロジックを実装してください。CSV生成APIの実装: /app/api/shopee/generate-csv/route.tsで/transform-listingの変換済みデータを受け取り、Shopeeの国別CSVフォーマットに整形し、ファイル応答として返すロジックを実装してください。4. 🖥️ UI連携の指示価格計算UIへの統合: 統合編集モーダル内のShopeeタブで、仕入れ原価、重量、目標利益率を入力すると、/lib/shopee/profitCalculator.tsを呼び出し、現地通貨での最終販売価格と利益率がリアルタイムで表示されるよう連携ロジックを実装してください。必須属性の動的表示: カテゴリが選択された際、Shopee APIを通じてそのカテゴリの必須属性（例: Material, Style）を取得し、モーダル内に動的に入力フィールドを表示し、空欄をブロックする検証ロジックを実装してください。この指示書に従うことで、Shopeeへの出品に必要な全ての機能が統合され、システムが完成します。