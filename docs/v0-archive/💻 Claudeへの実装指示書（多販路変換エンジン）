💻 Claudeへの実装指示書（多販路変換エンジン）1. 🎯 依頼の目的とスコープあなたは、Geminiが設計・実装した多販路変換エンジンのコアロジックをプロジェクトに組み込み、指定された全プラットフォーム（Coupang、Qoo10、Amazon AU/JP、Shopify）に対応可能なデータ変換システムを完成させます。2. 📂 ファイルの格納と新規作成（最優先）以下のファイルパスに、提供されたコードを新規作成または既存ファイルに追記・修正してください。ファイルパス修正/新規目的/lib/pricing/PlatformPricing.ts🆕 新規プラットフォーム別利益計算ロジックを実装します。手数料、送料、為替を考慮し、最適な販売価格を算出する中核モジュールです。/app/api/products/transform-multichannel/route.ts🆕 新規コア変換APIを実装します。翻訳、画像規格調整、SKU/在庫マッピング、および利益計算を統合する主要なエンドポイントです。/types/product.ts🔄 修正必要に応じて、二重価格設定（Qoo10向け）やCoupang Item IDなどの新しいプラットフォーム固有のデータフィールドを扱うための型定義を追記してください。3. 🔗 依存関係とロジックの補完（重要）APIを完全に動作させるため、以下のモックになっている機能を実装してください。為替レート取得の実装: /lib/pricing/PlatformPricing.ts 内で使用されているgetExchangeRate関数を、実際の外部為替APIクライアントを利用するように実装してください。LLM翻訳サービスの統合: /app/api/products/transform-multichannel/route.ts 内の翻訳ロジック（translateText）を、既存のLLM翻訳サービス（Geminiなど）を利用して、韓国語・英語への自動翻訳を動作させてください。画像処理ライブラリの統合: 画像規格調整ロジック（adjustImageSpecs）を、プロジェクトで使用している画像処理ライブラリ（例: sharp, JIMPなど）を利用して実装し、トリミング、リサイズ、枚数制限を適用できるようにしてください。4. 🗃️ 最終出力とUI連携の指示DB一時テーブルの定義: 将来のAPI連携に備え、変換済みデータを格納するためのDB一時テーブル（例: multichannel_export_queue）のスキーマを定義し、APIからの書き込みロジックを完成させてください。CSV生成の確認: APIがx-output-type: csvヘッダーを受け取った際に、正しくプラットフォーム別CSVフォーマット（例：SKU、Title、Priceを含む）を生成し、ファイルとして応答できることを確認してください。UIへの価格計算統合: 商品編集モーダル（/components/ProductModal/FullFeaturedModal.tsxなど）内で、新しいプラットフォームのタブ（Coupang、Qoo10など）が選択された際、/lib/pricing/PlatformPricing.tsを呼び出し、最適な販売価格をリアルタイムで表示できるように連携ロジックを実装してください。