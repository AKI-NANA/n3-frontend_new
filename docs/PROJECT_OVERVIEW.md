# NAGANO-3 プロジェクト概要

## 🎯 プロジェクトの目的

NAGANO-3（N3）は、Yahoo!オークションの商品をeBayに効率的に輸出するための統合管理システムです。
手動で行っていた商品選定、フィルタリング、編集、出品の一連のプロセスを自動化・効率化します。

## 💡 解決する課題

### 従来の問題点
1. **手動での商品選定**: 輸出禁止品の判定に時間がかかる
2. **複雑な規制対応**: eBay、税関、各国の輸出規制への対応が困難
3. **データ入力の手間**: 商品情報の手動入力が非効率
4. **在庫管理の煩雑さ**: 複数モールの在庫管理が困難
5. **利益計算の複雑さ**: 為替、手数料、送料の計算が煩雑

### N3の解決策
1. **自動フィルタリング**: 2段階フィルターで安全な商品のみを抽出
2. **規制データベース**: VeROリスト、パテントトロール情報を統合
3. **自動データ取得**: Yahoo!オークションから自動でデータ取得
4. **統合ダッシュボード**: すべての操作を一元管理
5. **自動計算**: 価格、送料、利益を自動計算

## 🔄 ワークフロー

### 商品の流れ

```
Yahoo!オークション
    ↓ スクレイピング
商品データ取得
    ↓ 第1段階フィルター（自動）
輸出禁止品チェック
特許・著作権チェック
    ↓ OK → PENDING
    ↓ NG → 除外
商品リスト表示
    ↓ ユーザーがモール選択
    ↓ 第2段階フィルター（自動）
モール専用フィルター実行
    ↓ 判定
    ├─ OK → 出品可能
    ├─ NG → 除外
    └─ PENDING → 要確認
商品編集・最適化
    ↓
価格・送料計算
    ↓
eBay出品
    ↓
在庫・注文管理
```

## 🛡️ フィルタリングシステム（重要機能）

### 第1段階フィルター（自動実行）

**実行タイミング**: スクレイピング後、商品保存時

**チェック内容**:
1. **輸出禁止品フィルター（EXPORT）**
   - 銃器・武器
   - 麻薬関連
   - 児童ポルノ
   - 偽造品
   - 文化財
   - その他法律で禁止されている品目

2. **特許・著作権フィルター（PATENT）**
   - VeRO（Verified Rights Owner）リスト
   - パテントトロール対策
   - 商標権侵害リスク
   - 著作権侵害リスク

**判定**:
- ✅ 両方OK → `PENDING`（モール選択待ち）
- ❌ どちらかNG → `NG`（除外）

### 第2段階フィルター（ユーザー操作連動）

**実行タイミング**: ユーザーがモールを選択した時

**対応モール**:
- eBay
- Amazon.com
- Etsy
- Mercari

**チェック内容**:
- モール固有の禁止品
- モール固有の規約違反
- 各モールのVeROプログラム対象品

**判定**:
- ✅ すべてOK → `OK`（出品可能）
- ❌ いずれかNG → `NG`（除外）

### フィルターデータベース

約200種類以上のキーワードをデータベース管理

## 📊 システムアーキテクチャ

### レイヤー構造

```
┌─────────────────────────────────────┐
│  プレゼンテーション層（Next.js）    │
│  - ダッシュボード                    │
│  - フィルター管理UI                  │
│  - 商品編集画面                      │
└─────────────────────────────────────┘
            ↓ API
┌─────────────────────────────────────┐
│  アプリケーション層（API Routes）   │
│  - eBay API統合                      │
│  - フィルタリングロジック            │
│  - 価格計算エンジン                  │
└─────────────────────────────────────┘
            ↓
┌─────────────────────────────────────┐
│  ビジネスロジック層（PHP/TS）       │
│  - スクレイピング                    │
│  - フィルター実行エンジン            │
│  - データ変換                        │
└─────────────────────────────────────┘
            ↓
┌─────────────────────────────────────┐
│  データ層（PostgreSQL/Supabase）    │
│  - 商品データ                        │
│  - フィルターキーワード              │
│  - ユーザー情報                      │
└─────────────────────────────────────┘
```

---

**最終更新**: 2025年1月18日
