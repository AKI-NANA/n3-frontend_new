# ğŸ“Š åœ¨åº«ãƒ»ä¾¡æ ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  é–‹ç™ºè¨ˆç”»æ›¸

**ä½œæˆæ—¥**: 2025-11-02  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: N3 E-commerce Management System  
**ç›®çš„**: å€‹åˆ¥å•†å“ã”ã¨ã«ä¾¡æ ¼æˆ¦ç•¥ã‚’è¨­å®šå¯èƒ½ãªã€æŸ”è»Ÿãªåœ¨åº«ãƒ»ä¾¡æ ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰

---

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
**ã€Œã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ + å€‹åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€**

- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š**: å°‚ç”¨UIç”»é¢ã§å…¨å•†å“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬æˆ¦ç•¥ã‚’è¨­å®š
- **å€‹åˆ¥è¨­å®š**: ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆ`/tools/editing`ï¼‰ã§å•†å“ã”ã¨ã«æˆ¦ç•¥ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
- **å„ªå…ˆé †ä½**: å€‹åˆ¥è¨­å®š > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šUI (/settings/pricing-defaults)         â”‚
â”‚  - å…¨å•†å“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬æˆ¦ç•¥                           â”‚
â”‚  - æœ€ä½åˆ©ç›Šé¡ã€ä¾¡æ ¼èª¿æ•´ãƒ«ãƒ¼ãƒ«ã€åœ¨åº«åˆ‡ã‚Œå¯¾å¿œãªã©         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ (é©ç”¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…¨å•†å“ (products_master)                               â”‚
â”‚  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæˆ¦ç•¥ãŒè‡ªå‹•é©ç”¨                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ (å€‹åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« (/tools/editing)                          â”‚
â”‚  - å•†å“ã”ã¨ã«æˆ¦ç•¥ã‚’å¤‰æ›´                                 â”‚
â”‚  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä¸Šæ›¸ã                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 1. `pricing_defaults` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ä½œæˆï¼‰

**ç›®çš„**: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ç®¡ç†

```sql
CREATE TABLE pricing_defaults (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  setting_name VARCHAR(100) NOT NULL UNIQUE,
  
  -- åŸºæœ¬è¨­å®š
  enabled BOOLEAN DEFAULT TRUE,
  priority INTEGER DEFAULT 0,
  
  -- ä¾¡æ ¼æˆ¦ç•¥
  strategy_type VARCHAR(50),
  -- 'follow_lowest': æœ€å®‰å€¤è¿½å¾“
  -- 'price_difference': å·®åˆ†ç¶­æŒ
  -- 'minimum_profit': æœ€ä½åˆ©ç›Šç¢ºä¿
  -- 'seasonal': å­£ç¯€å¤‰å‹•
  -- 'none': æˆ¦ç•¥ãªã—
  
  -- æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ (JSON)
  strategy_params JSONB DEFAULT '{}',
  -- ä¾‹: {
  --   "min_profit_usd": 10,
  --   "price_adjust_percent": -5,
  --   "follow_competitor": true
  -- }
  
  -- åœ¨åº«ç®¡ç†è¨­å®š
  out_of_stock_action VARCHAR(50) DEFAULT 'set_zero',
  -- 'set_zero': åœ¨åº«ã‚’0ã«è¨­å®š
  -- 'pause_listing': å‡ºå“ã‚’ä¸€æ™‚åœæ­¢
  -- 'end_listing': å‡ºå“ã‚’çµ‚äº†
  -- 'notify_only': é€šçŸ¥ã®ã¿
  
  -- ç›£è¦–è¨­å®š
  default_check_frequency VARCHAR(20) DEFAULT 'daily',
  enable_price_monitoring BOOLEAN DEFAULT TRUE,
  enable_inventory_monitoring BOOLEAN DEFAULT TRUE,
  
  -- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  created_by VARCHAR(100)
);

-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’æŒ¿å…¥
INSERT INTO pricing_defaults (setting_name, strategy_type, strategy_params, out_of_stock_action)
VALUES (
  'global_default',
  'minimum_profit',
  '{"min_profit_usd": 10, "enforce_minimum": true}',
  'set_zero'
);
```

### 2. `products_master` ãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ

**æ—¢å­˜ã‚«ãƒ©ãƒ **:
- `pricing_rules_enabled` (æ—¢å­˜)
- `active_pricing_rule_id` (æ—¢å­˜)
- `min_profit_usd` (æ—¢å­˜)

**æ–°è¦è¿½åŠ ã‚«ãƒ©ãƒ **:
```sql
ALTER TABLE products_master

-- å€‹åˆ¥ä¾¡æ ¼æˆ¦ç•¥è¨­å®š
ADD COLUMN IF NOT EXISTS custom_pricing_strategy VARCHAR(50),
-- NULL = ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½¿ç”¨
-- 'follow_lowest', 'price_difference', 'minimum_profit', 'seasonal', 'none'

ADD COLUMN IF NOT EXISTS custom_strategy_params JSONB DEFAULT '{}',
-- å•†å“å›ºæœ‰ã®æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ADD COLUMN IF NOT EXISTS custom_out_of_stock_action VARCHAR(50),
-- NULL = ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½¿ç”¨
-- 'set_zero', 'pause_listing', 'end_listing', 'notify_only'

-- å€‹åˆ¥ç›£è¦–è¨­å®š
ADD COLUMN IF NOT EXISTS custom_check_frequency VARCHAR(20),
-- NULL = ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½¿ç”¨
-- 'hourly', 'every_3h', 'every_6h', 'daily', 'weekly'

-- è¨­å®šã®ç¶™æ‰¿ãƒ•ãƒ©ã‚°
ADD COLUMN IF NOT EXISTS use_default_pricing BOOLEAN DEFAULT TRUE,
ADD COLUMN IF NOT EXISTS use_default_inventory BOOLEAN DEFAULT TRUE,

-- è¨­å®šã®ä¸Šæ›¸ãè¨˜éŒ²
ADD COLUMN IF NOT EXISTS pricing_overridden_at TIMESTAMP,
ADD COLUMN IF NOT EXISTS pricing_overridden_by VARCHAR(100);
```

### 3. `pricing_rules` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ—¢å­˜ï¼‰

å•†å“ã«ç´ä»˜ã‘ã‚‰ã‚Œã‚‹è©³ç´°ãƒ«ãƒ¼ãƒ«ã‚’ç®¡ç†ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰

---

## ğŸ¨ UIè¨­è¨ˆ

### A. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šç”»é¢ï¼ˆæ–°è¦ä½œæˆï¼‰

**URL**: `/settings/pricing-defaults`

**ç”»é¢æ§‹æˆ**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¾¡æ ¼æˆ¦ç•¥è¨­å®š                            â”‚
â”‚                                                    â”‚
â”‚  ğŸ“Š ä¾¡æ ¼æˆ¦ç•¥                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â—‹ æœ€å®‰å€¤è¿½å¾“ï¼ˆæœ€ä½åˆ©ç›Šç¢ºä¿ï¼‰          â”‚         â”‚
â”‚  â”‚ â—‹ åŸºæº–ä¾¡æ ¼ã‹ã‚‰ã®å·®åˆ†ç¶­æŒ              â”‚         â”‚
â”‚  â”‚ â—‹ æœ€ä½åˆ©ç›Šç¢ºä¿ã®ã¿                    â”‚         â”‚
â”‚  â”‚ â—‹ æˆ¦ç•¥ãªã—ï¼ˆæ‰‹å‹•ç®¡ç†ï¼‰                â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                    â”‚
â”‚  ğŸ’° ä¾¡æ ¼èª¿æ•´ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿                             â”‚
â”‚  æœ€ä½åˆ©ç›Šé¡ï¼ˆUSDï¼‰: [___10___]                     â”‚
â”‚  ä¾¡æ ¼èª¿æ•´ç‡ï¼ˆ%ï¼‰: [___-5___] %                     â”‚
â”‚  ç«¶åˆè¿½å¾“: [â˜‘] æœ‰åŠ¹                               â”‚
â”‚                                                    â”‚
â”‚  ğŸ“¦ åœ¨åº«åˆ‡ã‚Œæ™‚ã®å¯¾å¿œ                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â—‹ åœ¨åº«ã‚’0ã«è¨­å®š                       â”‚         â”‚
â”‚  â”‚ â—‹ å‡ºå“ã‚’ä¸€æ™‚åœæ­¢                      â”‚         â”‚
â”‚  â”‚ â—‹ å‡ºå“ã‚’çµ‚äº†                          â”‚         â”‚
â”‚  â”‚ â—‹ é€šçŸ¥ã®ã¿ï¼ˆè‡ªå‹•å¤‰æ›´ãªã—ï¼‰            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                    â”‚
â”‚  â± ç›£è¦–é »åº¦                                       â”‚
â”‚  ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé »åº¦: [â–¼ 1æ—¥1å›]                       â”‚
â”‚                                                    â”‚
â”‚  [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä¿å­˜]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**:
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã®ç®¡ç†
- è¨­å®šã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- é©ç”¨å•†å“æ•°ã®è¡¨ç¤º
- è¨­å®šå¤‰æ›´å±¥æ­´

---

### B. ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«æ‹¡å¼µï¼ˆæ—¢å­˜ã‚’æ‹¡å¼µï¼‰

**URL**: `/tools/editing`  
**å¯¾è±¡**: æ—¢å­˜ã®å•†å“ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

**æ–°è¦è¿½åŠ ã‚¿ãƒ–: ã€Œä¾¡æ ¼æˆ¦ç•¥ã€**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å•†å“ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ åŸºæœ¬æƒ…å ± | ä¾¡æ ¼ãƒ»åˆ©ç›Š | [ä¾¡æ ¼æˆ¦ç•¥] | ...â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                    â”‚
â”‚  ä¾¡æ ¼æˆ¦ç•¥è¨­å®š                                      â”‚
â”‚                                                    â”‚
â”‚  è¨­å®šã®ç¶™æ‰¿                                        â”‚
â”‚  [â˜‘] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ç”¨                         â”‚
â”‚  â””â†’ æœ‰åŠ¹æ™‚: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒé©ç”¨ã•ã‚Œã¾ã™          â”‚
â”‚                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚                                                    â”‚
â”‚  å€‹åˆ¥è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä¸Šæ›¸ãï¼‰                    â”‚
â”‚  [â˜] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ç”¨                         â”‚
â”‚                                                    â”‚
â”‚  ğŸ“Š ä¾¡æ ¼æˆ¦ç•¥ï¼ˆã“ã®å•†å“å°‚ç”¨ï¼‰                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â—‹ æœ€å®‰å€¤è¿½å¾“ï¼ˆæœ€ä½åˆ©ç›Šç¢ºä¿ï¼‰          â”‚         â”‚
â”‚  â”‚ â—‹ æœ€å®‰å€¤ã‚ˆã‚Š5%å®‰ã                    â”‚         â”‚
â”‚  â”‚ â—‹ æœ€å®‰å€¤ã‚ˆã‚Š$5é«˜ã                    â”‚         â”‚
â”‚  â”‚ â—‹ æœ€ä½åˆ©ç›Šç¢ºä¿ã®ã¿                    â”‚         â”‚
â”‚  â”‚ â—‹ æˆ¦ç•¥ãªã—                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                    â”‚
â”‚  ğŸ’° ã“ã®å•†å“ã®æœ€ä½åˆ©ç›Šé¡                           â”‚
â”‚  USD: [___15___]                                   â”‚
â”‚  â€»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: $10                                 â”‚
â”‚                                                    â”‚
â”‚  ğŸ“¦ åœ¨åº«åˆ‡ã‚Œæ™‚ã®å¯¾å¿œ                               â”‚
â”‚  [â–¼ åœ¨åº«ã‚’0ã«è¨­å®š]                                â”‚
â”‚                                                    â”‚
â”‚  â± ç›£è¦–é »åº¦                                       â”‚
â”‚  [â–¼ 6æ™‚é–“ã”ã¨] â€»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1æ—¥1å›               â”‚
â”‚                                                    â”‚
â”‚  [è¨­å®šã‚’ä¿å­˜] [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**:
1. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç¶™æ‰¿/å€‹åˆ¥è¨­å®šã®åˆ‡ã‚Šæ›¿ãˆ
2. å•†å“å›ºæœ‰ã®ä¾¡æ ¼æˆ¦ç•¥é¸æŠ
3. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
4. ç¾åœ¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®è¡¨ç¤º
5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## ğŸ”§ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### **Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤**ï¼ˆ1-2æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 1.1: ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `pricing_defaults` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `products_master` ã«ã‚«ãƒ©ãƒ è¿½åŠ 
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿æŒ¿å…¥

**SQLãƒ•ã‚¡ã‚¤ãƒ«**: `database/migrations/006_individual_pricing_strategy.sql`

#### ã‚¿ã‚¹ã‚¯ 1.2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®CRUDå‹•ä½œç¢ºèª
- [ ] å•†å“å€‹åˆ¥è¨­å®šã®ä¿å­˜ãƒ»å–å¾—ç¢ºèª
- [ ] ç¶™æ‰¿ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ

---

### **Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯**ï¼ˆ2-3æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 2.1: ä¾¡æ ¼æˆ¦ç•¥ã‚¨ãƒ³ã‚¸ãƒ³ã®æ‹¡å¼µ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/lib/pricing-engine/strategy-resolver.ts` (æ–°è¦)

```typescript
/**
 * å•†å“ã®æœ‰åŠ¹ãªä¾¡æ ¼æˆ¦ç•¥ã‚’è§£æ±º
 * å„ªå…ˆé †ä½: å€‹åˆ¥è¨­å®š > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
 */
export async function resolveProductStrategy(productId: number): Promise<PricingStrategy> {
  // 1. å•†å“ã®å€‹åˆ¥è¨­å®šã‚’å–å¾—
  const product = await getProduct(productId)
  
  // 2. å€‹åˆ¥è¨­å®šãŒæœ‰åŠ¹ãªå ´åˆ
  if (!product.use_default_pricing && product.custom_pricing_strategy) {
    return {
      strategy: product.custom_pricing_strategy,
      params: product.custom_strategy_params,
      source: 'custom'
    }
  }
  
  // 3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’å–å¾—
  const defaults = await getDefaultSettings()
  return {
    strategy: defaults.strategy_type,
    params: defaults.strategy_params,
    source: 'default'
  }
}
```

#### ã‚¿ã‚¹ã‚¯ 2.2: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ

**æ–°è¦API**:
- `GET /api/settings/pricing-defaults` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šå–å¾—
- `PUT /api/settings/pricing-defaults` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šæ›´æ–°
- `GET /api/products/[id]/pricing-strategy` - å•†å“ã®æœ‰åŠ¹æˆ¦ç•¥å–å¾—
- `PUT /api/products/[id]/pricing-strategy` - å•†å“ã®å€‹åˆ¥è¨­å®šæ›´æ–°

#### ã‚¿ã‚¹ã‚¯ 2.3: åœ¨åº«ç›£è¦–ãƒ­ã‚¸ãƒƒã‚¯ã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/app/api/inventory-monitoring/execute/route.ts` (æ—¢å­˜ã‚’æ›´æ–°)

- å•†å“ã”ã¨ã®æˆ¦ç•¥ã‚’è§£æ±º
- å€‹åˆ¥è¨­å®šã‚’å„ªå…ˆé©ç”¨
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

---

### **Phase 3: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šUI**ï¼ˆ2-3æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 3.1: è¨­å®šç”»é¢ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/app/settings/pricing-defaults/page.tsx` (æ–°è¦)

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ**:
```
PricingDefaultsPage
â”œâ”€â”€ StrategySelector
â”‚   â”œâ”€â”€ FollowLowestOption
â”‚   â”œâ”€â”€ PriceDifferenceOption
â”‚   â”œâ”€â”€ MinimumProfitOption
â”‚   â””â”€â”€ NoStrategyOption
â”œâ”€â”€ ParametersForm
â”‚   â”œâ”€â”€ MinProfitInput
â”‚   â”œâ”€â”€ PriceAdjustInput
â”‚   â””â”€â”€ CompetitorFollowToggle
â”œâ”€â”€ OutOfStockActionSelector
â””â”€â”€ MonitoringFrequencySelector
```

#### ã‚¿ã‚¹ã‚¯ 3.2: ãƒ‡ãƒ¼ã‚¿é€£æº
- Supabaseæ¥ç¶š
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- å¤‰æ›´ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

---

### **Phase 4: ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«æ‹¡å¼µ**ï¼ˆ3-4æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 4.1: ä¾¡æ ¼æˆ¦ç•¥ã‚¿ãƒ–è¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/app/tools/editing/page.tsx` ã¾ãŸã¯é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (æ—¢å­˜ã‚’æ‹¡å¼µ)

**æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
```typescript
// PricingStrategyTab.tsx
export function PricingStrategyTab({ productId }: { productId: number }) {
  const [useDefault, setUseDefault] = useState(true)
  const [strategy, setStrategy] = useState<PricingStrategy>()
  const [defaultStrategy, setDefaultStrategy] = useState<PricingStrategy>()
  
  // UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
}
```

#### ã‚¿ã‚¹ã‚¯ 4.2: æ—¢å­˜ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨ã®çµ±åˆ
- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯ã®çµ±åˆ
- å¤‰æ›´æ¤œçŸ¥ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

---

### **Phase 5: ä¾¡æ ¼å†è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®æ›´æ–°**ï¼ˆ2-3æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 5.1: ã‚¨ãƒ³ã‚¸ãƒ³ã®æ‹¡å¼µ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/lib/pricing-engine/index.ts` (æ—¢å­˜ã‚’æ›´æ–°)

```typescript
export async function processPriceChange(input: PriceChangeInput) {
  // 1. å•†å“ã®æœ‰åŠ¹ãªæˆ¦ç•¥ã‚’è§£æ±º
  const strategy = await resolveProductStrategy(input.product_id)
  
  // 2. æˆ¦ç•¥ã«åŸºã¥ã„ã¦ä¾¡æ ¼ã‚’è¨ˆç®—
  let new_price
  switch (strategy.strategy) {
    case 'follow_lowest':
      new_price = await calculateFollowLowest(input, strategy.params)
      break
    case 'price_difference':
      new_price = await calculatePriceDifference(input, strategy.params)
      break
    case 'minimum_profit':
      new_price = await calculateMinimumProfit(input, strategy.params)
      break
    default:
      new_price = input.current_price
  }
  
  // 3. æœ€ä½åˆ©ç›Šãƒã‚§ãƒƒã‚¯ï¼ˆå¿…é ˆï¼‰
  const min_profit = strategy.params.min_profit_usd || 10
  if (calculateProfit(new_price, input) < min_profit) {
    new_price = adjustForMinProfit(new_price, min_profit)
  }
  
  return { new_price, strategy }
}
```

#### ã‚¿ã‚¹ã‚¯ 5.2: æˆ¦ç•¥åˆ¥è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- `calculateFollowLowest()` - æœ€å®‰å€¤è¿½å¾“
- `calculatePriceDifference()` - å·®åˆ†ç¶­æŒ
- `calculateMinimumProfit()` - æœ€ä½åˆ©ç›Šç¢ºä¿

---

### **Phase 6: åœ¨åº«åˆ‡ã‚Œå¯¾å¿œã®å®Ÿè£…**ï¼ˆ1-2æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 6.1: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/lib/inventory-monitoring/out-of-stock-handler.ts` (æ–°è¦)

```typescript
export async function handleOutOfStock(productId: number, action: OutOfStockAction) {
  switch (action) {
    case 'set_zero':
      await updateEbayInventory(productId, 0)
      break
    case 'pause_listing':
      await pauseEbayListing(productId)
      break
    case 'end_listing':
      await endEbayListing(productId)
      break
    case 'notify_only':
      await sendNotification(productId, 'out_of_stock')
      break
  }
}
```

#### ã‚¿ã‚¹ã‚¯ 6.2: çµ±åˆå®Ÿè¡ŒAPIæ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/app/api/inventory-monitoring/execute/route.ts` (æ—¢å­˜ã‚’æ›´æ–°)

- å•†å“ã”ã¨ã®åœ¨åº«åˆ‡ã‚Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è§£æ±º
- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
- å®Ÿè¡Œçµæœã‚’ãƒ­ã‚°ã«è¨˜éŒ²

---

### **Phase 7: ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°**ï¼ˆ2-3æ—¥ï¼‰

#### ã‚¿ã‚¹ã‚¯ 7.1: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- [ ] æˆ¦ç•¥è§£æ±ºãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
- [ ] ä¾¡æ ¼è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
- [ ] ç¶™æ‰¿ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯ 7.2: çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šâ†’å•†å“åæ˜ ã®ãƒ†ã‚¹ãƒˆ
- [ ] å€‹åˆ¥è¨­å®šâ†’ä¾¡æ ¼å†è¨ˆç®—ã®ãƒ†ã‚¹ãƒˆ
- [ ] åœ¨åº«åˆ‡ã‚Œâ†’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œã®ãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯ 7.3: UIãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šç”»é¢ã®å‹•ä½œç¢ºèª
- [ ] ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å‹•ä½œç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## ğŸ“‹ å®Ÿè£…å„ªå…ˆé †ä½

### ğŸ”´ å„ªå…ˆåº¦: æœ€é«˜ï¼ˆPhase 1-3ï¼‰
ã“ã‚Œã‚‰ãŒãªã„ã¨ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ä½œã—ã¾ã›ã‚“ï¼š
1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤ï¼ˆPhase 1ï¼‰
2. æˆ¦ç•¥è§£æ±ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆPhase 2.1ï¼‰
3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šUIï¼ˆPhase 3ï¼‰

### ğŸŸ¡ å„ªå…ˆåº¦: é«˜ï¼ˆPhase 4-5ï¼‰
ã‚³ã‚¢æ©Ÿèƒ½ã®å®Ÿè£…ï¼š
4. ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«æ‹¡å¼µï¼ˆPhase 4ï¼‰
5. ä¾¡æ ¼å†è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯æ›´æ–°ï¼ˆPhase 5ï¼‰

### ğŸŸ¢ å„ªå…ˆåº¦: ä¸­ï¼ˆPhase 6-7ï¼‰
è¿½åŠ æ©Ÿèƒ½ã¨å“è³ªå‘ä¸Šï¼š
6. åœ¨åº«åˆ‡ã‚Œå¯¾å¿œï¼ˆPhase 6ï¼‰
7. ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°ï¼ˆPhase 7ï¼‰

---

## ğŸ¯ å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```
Week 1 (Day 1-5):
  Day 1-2: Phase 1 (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤)
  Day 3-5: Phase 2 (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯)

Week 2 (Day 6-10):
  Day 6-7: Phase 3 (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šUI)
  Day 8-10: Phase 4 (ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«æ‹¡å¼µ)

Week 3 (Day 11-15):
  Day 11-13: Phase 5 (ä¾¡æ ¼å†è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯)
  Day 14-15: Phase 6 (åœ¨åº«åˆ‡ã‚Œå¯¾å¿œ)

Week 4 (Day 16-20):
  Day 16-18: Phase 7 (ãƒ†ã‚¹ãƒˆ)
  Day 19-20: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆãƒ»ãƒªãƒªãƒ¼ã‚¹æº–å‚™
```

**ç·é–‹ç™ºæœŸé–“**: ç´„3-4é€±é–“

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

### ä¾¡æ ¼å¤‰å‹•æ¤œçŸ¥æ™‚ã®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åœ¨åº«ç›£è¦–å®Ÿè¡Œ                                       â”‚
â”‚    /api/inventory-monitoring/execute                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å•†å“ã®æœ‰åŠ¹ãªä¾¡æ ¼æˆ¦ç•¥ã‚’è§£æ±º                         â”‚
â”‚    resolveProductStrategy(productId)                  â”‚
â”‚                                                       â”‚
â”‚    IF use_default_pricing = TRUE:                    â”‚
â”‚      â†’ pricing_defaults ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å–å¾—             â”‚
â”‚    ELSE:                                              â”‚
â”‚      â†’ products_master.custom_* ã‚«ãƒ©ãƒ ã‹ã‚‰å–å¾—       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æˆ¦ç•¥ã«åŸºã¥ã„ã¦æ–°ä¾¡æ ¼ã‚’è¨ˆç®—                         â”‚
â”‚    - follow_lowest: eBayæœ€å®‰å€¤ã‚’å–å¾—â†’è¿½å¾“            â”‚
â”‚    - price_difference: åŸºæº–ä¾¡æ ¼ Â± Nå††/ãƒ‰ãƒ«           â”‚
â”‚    - minimum_profit: æœ€ä½åˆ©ç›Šç¢ºä¿                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æœ€ä½åˆ©ç›Šãƒã‚§ãƒƒã‚¯ï¼ˆå¿…é ˆï¼‰                           â”‚
â”‚    IF profit < min_profit_usd:                        â”‚
â”‚      â†’ ä¾¡æ ¼ã‚’èª¿æ•´ã—ã¦æœ€ä½åˆ©ç›Šã‚’ç¢ºä¿                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. price_changes ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜                       â”‚
â”‚    status = 'pending' (æ‰¿èªå¾…ã¡)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. unified_changes ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜                     â”‚
â”‚    UI ã§è¡¨ç¤ºâ†’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰¿èª                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. eBayã«ä¾¡æ ¼æ›´æ–°ã‚’é©ç”¨                               â”‚
â”‚    /api/inventory-monitoring/changes/apply           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åœ¨åº«åˆ‡ã‚Œæ¤œçŸ¥æ™‚ã®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åœ¨åº«ç›£è¦–å®Ÿè¡Œ                                       â”‚
â”‚    ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°: stock = 0 ã‚’æ¤œçŸ¥                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å•†å“ã®åœ¨åº«åˆ‡ã‚Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è§£æ±º                     â”‚
â”‚                                                       â”‚
â”‚    IF use_default_inventory = TRUE:                  â”‚
â”‚      â†’ pricing_defaults.out_of_stock_action          â”‚
â”‚    ELSE:                                              â”‚
â”‚      â†’ products_master.custom_out_of_stock_action    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ                                   â”‚
â”‚    - set_zero: eBayåœ¨åº«ã‚’0ã«æ›´æ–°                     â”‚
â”‚    - pause_listing: å‡ºå“ã‚’ä¸€æ™‚åœæ­¢                   â”‚
â”‚    - end_listing: å‡ºå“ã‚’çµ‚äº†                         â”‚
â”‚    - notify_only: é€šçŸ¥ã®ã¿                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. unified_changes ã«è¨˜éŒ²                             â”‚
â”‚    change_category = 'page_error' ã¾ãŸã¯ 'inventory' â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ è¨­å®šãƒ‡ãƒ¼ã‚¿ä¾‹

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®ä¾‹

```json
{
  "setting_name": "global_default",
  "strategy_type": "follow_lowest",
  "strategy_params": {
    "min_profit_usd": 10,
    "price_adjust_percent": -5,
    "follow_competitor": true,
    "max_adjust_percent": 20
  },
  "out_of_stock_action": "set_zero",
  "default_check_frequency": "daily",
  "enable_price_monitoring": true,
  "enable_inventory_monitoring": true
}
```

### å€‹åˆ¥å•†å“è¨­å®šã®ä¾‹

```json
{
  "product_id": 12345,
  "sku": "POKE-GENGAR-001",
  "title": "Gengar VMAX",
  
  "use_default_pricing": false,
  "custom_pricing_strategy": "price_difference",
  "custom_strategy_params": {
    "min_profit_usd": 15,
    "price_difference_usd": 5,
    "apply_above_lowest": true
  },
  
  "use_default_inventory": false,
  "custom_out_of_stock_action": "pause_listing",
  "custom_check_frequency": "every_6h"
}
```

---

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒªãƒƒãƒˆ
1. **æŸ”è»Ÿæ€§å‘ä¸Š**: å•†å“ç‰¹æ€§ã«å¿œã˜ãŸæœ€é©ãªä¾¡æ ¼æˆ¦ç•¥
2. **åˆ©ç›Šæœ€å¤§åŒ–**: é«˜åˆ©ç›Šå•†å“ã¯å€‹åˆ¥ã«ä¾¡æ ¼æˆ¦ç•¥ã‚’èª¿æ•´
3. **ãƒªã‚¹ã‚¯è»½æ¸›**: åœ¨åº«åˆ‡ã‚Œæ™‚ã®é©åˆ‡ãªå¯¾å¿œã§é¡§å®¢æº€è¶³åº¦ç¶­æŒ
4. **é‹ç”¨åŠ¹ç‡åŒ–**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§å¤§åŠã‚’è‡ªå‹•åŒ–ã€é‡è¦å•†å“ã®ã¿å€‹åˆ¥ç®¡ç†

### æŠ€è¡“ãƒ¡ãƒªãƒƒãƒˆ
1. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: æ•°åƒå•†å“ã§ã‚‚åŠ¹ç‡çš„ã«ç®¡ç†
2. **ä¿å®ˆæ€§**: æˆ¦ç•¥ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸€å…ƒç®¡ç†
3. **æ‹¡å¼µæ€§**: æ–°ã—ã„æˆ¦ç•¥ã®è¿½åŠ ãŒå®¹æ˜“

---

## ğŸ”’ æ³¨æ„äº‹é …ã¨ãƒªã‚¹ã‚¯

### ãƒªã‚¹ã‚¯ç®¡ç†

1. **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**
   - ãƒªã‚¹ã‚¯: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šå¤‰æ›´æ™‚ã«æ—¢å­˜å•†å“ã¸ã®å½±éŸ¿
   - å¯¾ç­–: å¤‰æ›´å‰ã«å½±éŸ¿ç¯„å›²ã‚’è¡¨ç¤ºã€ç¢ºèªã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ 

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - ãƒªã‚¹ã‚¯: å¤§é‡å•†å“ã®æˆ¦ç•¥è§£æ±ºã«æ™‚é–“ãŒã‹ã‹ã‚‹
   - å¯¾ç­–: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã®å®Ÿè£…ã€ãƒãƒƒãƒå‡¦ç†

3. **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**
   - ãƒªã‚¹ã‚¯: è¨­å®šãŒè¤‡é›‘ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ··ä¹±
   - å¯¾ç­–: ã‚ã‹ã‚Šã‚„ã™ã„UIã€ãƒ˜ãƒ«ãƒ—ãƒ†ã‚­ã‚¹ãƒˆã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `/docs/DATABASE_SCHEMA.md` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è©³ç´°è¨­è¨ˆ
- `/docs/API_SPECIFICATION.md` - APIä»•æ§˜æ›¸
- `/docs/PRICING_ENGINE_GUIDE.md` - ä¾¡æ ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚¬ã‚¤ãƒ‰
- `/docs/UI_COMPONENT_GUIDE.md` - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [ ] `pricing_defaults` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `products_master` ã‚«ãƒ©ãƒ è¿½åŠ 
- [ ] SQLãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŒ¿å…¥

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- [ ] `strategy-resolver.ts` å®Ÿè£…
- [ ] APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- [ ] åœ¨åº«ç›£è¦–ãƒ­ã‚¸ãƒƒã‚¯æ›´æ–°
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

### Phase 3: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šUI
- [ ] ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] ãƒ•ã‚©ãƒ¼ãƒ å®Ÿè£…
- [ ] ãƒ‡ãƒ¼ã‚¿é€£æº
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### Phase 4: ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
- [ ] ä¾¡æ ¼æˆ¦ç•¥ã‚¿ãƒ–è¿½åŠ 
- [ ] ç¶™æ‰¿ãƒˆã‚°ãƒ«å®Ÿè£…
- [ ] ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯çµ±åˆ
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

### Phase 5: ä¾¡æ ¼å†è¨ˆç®—
- [ ] ã‚¨ãƒ³ã‚¸ãƒ³æ‹¡å¼µ
- [ ] æˆ¦ç•¥åˆ¥è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- [ ] æœ€ä½åˆ©ç›Šãƒã‚§ãƒƒã‚¯
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ

### Phase 6: åœ¨åº«åˆ‡ã‚Œå¯¾å¿œ
- [ ] ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
- [ ] ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯
- [ ] é€šçŸ¥æ©Ÿèƒ½
- [ ] eBay APIé€£æº

### Phase 7: ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] UIãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

---

## ğŸ‰ ã¾ã¨ã‚

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒå®Ÿç¾ã•ã‚Œã¾ã™ï¼š

1. **ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š**: å…¨å•†å“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬æˆ¦ç•¥
2. **å€‹åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: é‡è¦å•†å“ã”ã¨ã«æœ€é©ãªæˆ¦ç•¥ã‚’è¨­å®š
3. **æŸ”è»Ÿãªä¾¡æ ¼ç®¡ç†**: æœ€å®‰å€¤è¿½å¾“ã€å·®åˆ†ç¶­æŒã€æœ€ä½åˆ©ç›Šç¢ºä¿ãªã©
4. **è‡ªå‹•åœ¨åº«ç®¡ç†**: åœ¨åº«åˆ‡ã‚Œæ™‚ã®è‡ªå‹•å¯¾å¿œ
5. **æ‹¡å¼µå¯èƒ½ãªè¨­è¨ˆ**: å°†æ¥çš„ãªæˆ¦ç•¥è¿½åŠ ãŒå®¹æ˜“

**é–‹ç™ºæœŸé–“**: ç´„3-4é€±é–“  
**å®Ÿè£…é›£æ˜“åº¦**: ä¸­ç¨‹åº¦  
**æœŸå¾…åŠ¹æœ**: å¤§ï¼ˆåˆ©ç›Šæœ€å¤§åŒ–ã€é‹ç”¨åŠ¹ç‡åŒ–ï¼‰

---

**ä½œæˆè€…**: Claude  
**æœ€çµ‚æ›´æ–°**: 2025-11-02  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
